/*! For license information please see chunk~470.d17f018b984372a3021d.js.LICENSE.txt */
(self.webpackChunkCrownCADPlugin=self.webpackChunkCrownCADPlugin||[]).push([[470],{140:(e,t,n)=>{var r=n(793);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);(0,n(534).A)("29ffcf82",r,!1,{})},152:function(e,t){!function(e){"use strict";const t={INIT:"init",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unSubscribe",CALLBACK:"callback",DESTROYED:"destroyed",CALL_FUNCTION:"callFunction",EXECUTE_COMMAND:"executeCommand",EXECUTE_INCREMENT_COMMAND:"executeIncrementCommand",EXECUTE_IN_SPECIFIED_DOC:"EXECUTE_IN_SPECIFIED_DOC"},n={BY_IDS:"getElementsByIds",BY_FEATURE_ID:"getElementsByFeatureId",BY_ENTITY_ID:"getElementsByEntityId",IN_ASSEMBLY:"getElementInAssembly",BY_INSTANCE_ID:"getElementsByInstanceId",BY_FEATURE_NAME_INSTANCE_ID:"getElementsByFeatureNameAndInstanceId",BY_FEATURE_NAMES:"getElementsByFeatureNames",BY_FEATURE_NAMES_AND_INSTANCE_ID:"getElementsByFeatureNamesAndInsId",NORMAL_ON_FACE:"getPointNormalOnFace"},r={BY_IDS:"getEntitiesByIds",ALL:"getAllEntities",BY_FEATURE_IDS:"getEntitiesByFeatureIds",IN_ASSEMBLY:"getEntityInAssembly",BY_FEATURE_NAMES:"getEntitiesByFeatureNames",BY_INSTANCE_ID:"getEntitiesByInstanceId"},i={BY_IDS:"getFeaturesByIds",BY_NAMES:"getFeaturesByNames",BY_INSTANCE_ID:"getFeaturesByInstanceId"},a={BY_IDS:"getInstancesByIds",TOP_INSTANCE:"getTopInstance",INSTANCE_TREE:"getInstanceTree"},o={MESSAGE_TIP:"messageTip",ADD_HIGHLIGHT_ELEMENT:"addHighlightElement",REMOVE_HIGHLIGHT_ELEMENT:"removeHighlightElement",CLEAR_PREVIEW:"clearPreview",CLEAR_SELECTION:"clearSelection",CREATE_DOCUMENT:"CREATE_DOCUMENT",SET_SELECT_TYPE:"setSelectType",RESET_SELECT_TYPE:"resetSelectType",GET_SUPPORT_SELECT_TYPE:"getSupportSelectType"},c={ELEMENT_PICK:"elementPick",FEATURE_PICK:"featurePick"},s={CREATE_SKETCH:"createSketch",EXIT_SKETCH:"exitSketch",EDIT_SKETCH:"editSketch",SKETCH_COMMAND:"sketchCommand",FULL_SKETCH_COMMAND:"fullSketchCommand",GENERAL_COMMAND:"generalCommand"};class l{constructor(){return this.lineId=null,this.instanceId=null,this.point1=null,this.point2=null,this}setLineId(e){return this.lineId=e,this}setInstanceId(e){return this.instanceId=e,this}setPoint(e,t){return this.point1=e,this.point2=t,this}toScript(){return null!==this.point1&&null!==this.point2?"new Axis("+this.point1.toScript()+","+this.point2.toScript()+")":null!==this.lineId&&null===this.instanceId?"new Axis("+this.lineId+")":this.lineId&&this.instanceId?"new Axis("+this.lineId+",'"+this.instanceId+"')":"new Axis()"}}class u{constructor(e,t,n){this.x=e??0,this.y=t??0,this.z=n??0}toScript(){return"new Point("+this.x+","+this.y+","+this.z+")"}}class d{constructor(){return this.lineId=null,this.instanceId=null,this.point1=null,this.point2=null,this}setLineId(e){return this.lineId=e,this}setInstanceId(e){return this.instanceId=e,this}setPoint(e,t){return this.point1=e,this.point2=t,this}toScript(){return null!==this.point1&&null!==this.point2?"new Direction("+this.point1.toScript()+","+this.point2.toScript()+")":null!==this.lineId&&null===this.instanceId?"new Direction("+this.lineId+")":this.lineId&&this.instanceId?"new Direction("+this.lineId+",'"+this.instanceId+"')":"new Direction()"}}class p{constructor(e,t,n,r,i,a,o,c,s,l,u,d,p,m,h,f){return this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,c,s,l,u,d,p,m,h,f),this}set(e,t,n,r,i,a,o,c,s,l,u,d,p,m,h,f){const y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=r,y[1]=i,y[5]=a,y[9]=o,y[13]=c,y[2]=s,y[6]=l,y[10]=u,y[14]=d,y[3]=p,y[7]=m,y[11]=h,y[15]=f,this}setElements(e){return this.elements=e,this}toScript(){return"new Matrix4("+this.elements+")"}}function m(e){if(!e)return"[]";let t,n="[";for(let r=0;r<e.length;r++)t=e[r],"string"==typeof t?n=n+"'"+t+"'":"number"==typeof t?n+=t:t instanceof u&&(n+=t.toScript()),r!==e.length-1&&(n+=",");return n+="]",n}function h(e){if(!e)return"{}";let t="{";for(let n of Object.keys(e)){let r=e[n];"number"==typeof r?t+="'"+n+"': "+r+",":"string"==typeof r?t+="'"+n+"': '"+r+"',":(r instanceof u||r instanceof p)&&(t+=r.toScript())}return t+="}",t}const f={pointCoincidence:"ConstraintType.PointCoincidence",pointXCoordinatesCoincidence:"ConstraintType.PointXCoordinatesCoincidence",pointYCoordinatesCoincidence:"ConstraintType.PointYCoordinatesCoincidence",pointOnCurve:"ConstraintType.PointOnCurve",pointOnCurveNonePar:"ConstraintType.PointOnCurveNonePar",fixedDirection:"ConstraintType.FixedDirection",fixedHorizontalDirection:"ConstraintType.FixedHorizontalDirection",fixedVerticalDirection:"ConstraintType.FixedVerticalDirection",fixedPoint:"ConstraintType.FixedPoint",fixedPointXCoordinates:"ConstraintType.FixedPointXCoordinates",fixedPointYCoordinates:"ConstraintType.FixedPointYCoordinates",parallelism:"ConstraintType.Parallelism",perpendicularity:"ConstraintType.Perpendicularity",tangency:"ConstraintType.Tangency",collineation:"ConstraintType.Collineation",equalCurves:"ConstraintType.EqualCurves",equalLength:"ConstraintType.EqualLength",equalRadius:"ConstraintType.EqualRadius",equalCurvature:"ConstraintType.EqualCurvature",offset:"ConstraintType.Offset",mirror:"ConstraintType.Mirror"};class y{static createSketch(e){if(e)return"Sketch.createSketch('"+(e.sketchName??"")+"', "+(e.datumId??8)+");\n"}static exitSketch(){return"Sketch.exitSketch();\n"}static createSketchLine(e){if(e)return"Sketch.createLine("+(e.startPoint?.toScript()??"new Point()")+", "+(e.endPoint?.toScript()??"new Point()")+");\n"}static createRectangle(e){if(e)return"Sketch.createRectangle("+(e.startPoint?.toScript()??"new Point()")+", "+(e.endPoint?.toScript()??"new Point()")+");\n"}static editSketch(e){if(e)return"Sketch.editSketch('"+(e.sketchName??"")+"');\n"}static exitEditSketch(e){if(e)return"Sketch.exitEditSketch('"+(e.sketchName??"")+"');\n"}static createReferenceLine(e){if(e)return"Sketch.createReferenceLine("+(e.startPoint?.toScript()??"new Point()")+", "+(e.endPoint?.toScript()??"new Point()")+");\n"}static createRectangleByCenter(e){if(e)return"Sketch.createRectangleByCenter("+(e.centerPoint?.toScript()??"new Point()")+", "+(e.endPoint?.toScript()??"new Point()")+");\n"}static createThreePointRectangle(e){if(e)return"Sketch.createThreePointRectangle("+(e.firstPoint?.toScript()??"new Point()")+", "+(e.secondPoint?.toScript()??"new Point()")+", "+(e.thirdPoint?.toScript()??"new Point()")+");\n"}static createParallelogram(e){if(e)return"Sketch.createParallelogram("+(e.firstPoint?.toScript()??"new Point()")+", "+(e.secondPoint?.toScript()??"new Point()")+", "+(e.thirdPoint?.toScript()??"new Point()")+");\n"}static createCircle(e){if(e)return"Sketch.createCircle("+(e.centerPoint?.toScript()??"new Point()")+", "+(e.circlePoint?.toScript()??"new Point()")+");\n"}static createCircleByThreePoint(e){if(e)return"Sketch.createCircleByThreePoint("+(e.circlePoint1?.toScript()??"new Point()")+", "+(e.circlePoint2?.toScript()??"new Point()")+", "+(e.circlePoint3?.toScript()??"new Point()")+");\n"}static createArcByCenter(e){if(e)return"Sketch.createArcByCenter("+(e.centerPoint?.toScript()??"new Point()")+", "+(e.startPoint?.toScript()??"new Point()")+", "+(e.endPoint?.toScript()??"new Point()")+");\n"}static createArcByThreePoint(e){if(e)return"Sketch.createArcByThreePoint("+(e.firstPoint?.toScript()??"new Point()")+", "+(e.secondPoint?.toScript()??"new Point()")+", "+(e.thirdPoint?.toScript()??"new Point()")+");\n"}static createCenterArcSlot(e){if(e)return"Sketch.createCenterArcSlot("+(e.centerPoint?.toScript()??"new Point()")+", "+(e.startPoint?.toScript()??"new Point()")+", "+(e.endPoint?.toScript()??"new Point()")+", "+(e.radiusPoint?.toScript()??"new Point()")+");\n"}static createThreeArcSlot(e){if(e)return"Sketch.createThreeArcSlot("+(e.firstPoint?.toScript()??"new Point()")+", "+(e.secondPoint?.toScript()??"new Point()")+", "+(e.thirdPoint?.toScript()??"new Point()")+", "+(e.radiusPoint?.toScript()??"new Point()")+");\n"}static createStraightSlot(e){if(e)return"Sketch.createStraightSlot("+(e.startPoint?.toScript()??"new Point()")+", "+(e.endPoint?.toScript()??"new Point()")+", "+(e.radiusPoint?.toScript()??"new Point()")+");\n"}static createCenterStraightSlot(e){if(e)return"Sketch.createCenterStraightSlot("+(e.centerPoint?.toScript()??"new Point()")+", "+(e.endPoint?.toScript()??"new Point()")+", "+(e.radiusPoint?.toScript()??"new Point()")+");\n"}static createEllipse(e){if(e)return"Sketch.createEllipse("+(e.centerPoint?.toScript()??"new Point()")+", "+(e.minorPoint?.toScript()??"new Point()")+", "+(e.majorPoint?.toScript()??"new Point()")+");\n"}static createEllipseArc(e){if(e)return"Sketch.createEllipseArc("+(e.centerPoint?.toScript()??"new Point()")+", "+(e.minorPoint?.toScript()??"new Point()")+", "+(e.majorPoint?.toScript()??"new Point()")+", "+(e.startAngle??0)+", "+(e.endAngle??45)+");\n"}static createRegularPolygon(e){if(e)return"Sketch.createRegularPolygon("+(e.centerPoint?.toScript()??"new Point()")+", "+(e.startPoint?.toScript()??"new Point()")+", "+(e.edgeNum??6)+", "+(e.mode??0)+");\n"}static createIntpCurve(e){if(e)return"Sketch.createIntpCurve("+(m(e.pickPoints)??"[]")+");\n"}static createPoint(e){if(e)return"Sketch.createPoint("+(e.x??0)+", "+(e.y??0)+");\n"}static setReference(e){if(e)return"Sketch.setReference("+(m(e.curveIds)??"[]")+", "+(e.reference??1)+");\n"}static createFilletCurve(e){if(e)return"Sketch.createFilletCurve("+(e.curveId1??0)+", "+(e.curveId2??0)+", "+(e.radius??10)+", "+(e.type1??4)+", "+(e.type2??4)+");\n"}static createChamferCurve(e){if(e)return"Sketch.createChamferCurve("+(e.curveId1??0)+", "+(e.curveId2??0)+", "+(e.distance1??10)+", "+(e.distance2??10)+");\n"}static createChamferCurveByAngle(e){if(e)return"Sketch.createChamferCurveByAngle("+(e.curveId1??0)+", "+(e.curveId2??0)+", "+(e.distance1??10)+", "+(e.angle??45)+");\n"}static createAutoTrimCurve(e){if(e)return"Sketch.createAutoTrimCurve("+(e.trimCurveId??0)+", "+(e.trimCurvePoint?.toScript()??"new Point()")+");\n"}static createExtendCurve(e){if(e)return"Sketch.createExtendCurve("+(e.firstCurveId??0)+", "+(e.secondCurveId??0)+");\n"}static createOffsetCurve(e){if(e)return"Sketch.createOffsetCurve("+(e.offsetOnPlane??1)+", "+(m(e.offsetCurveIds)??"[]")+", "+(e.offsetType??0)+", "+(e.offsetDistance??10)+", "+(e.bothWay??0)+");\n"}static createMirror(e){if(e)return"Sketch.createMirror("+(m(e.elementIds)??"[]")+", "+(e.axisId??0)+", "+(e.copy??1)+", "+(e.instanceId??"'0'")+", "+(e.mirrorAxisType??0)+");\n"}static copyElements(e){if(e)return"Sketch.copyElements("+(m(e.elementIds)??"[]")+", "+(e.startPoint?.toScript()??"new Point()")+", "+(e.endPoint?.toScript()??"new Point()")+");\n"}static deleteElements(e){if(e)return"Sketch.deleteElements("+(m(e.elementIds)??"[]")+");\n"}static createDimension(e){if(e)return"Sketch.createDimension({\n  firstSnapId: "+(e.firstSnapId??0)+",\n  firstPickPnt: "+(e.firstPickPnt?.toScript()??"new Point()")+",\n  firstSnapType: "+(e.firstSnapType??7)+",\n  secondSnapId: "+(e.secondSnapId??0)+",\n  secondPickPnt: "+(e.secondPickPnt?.toScript()??"new Point()")+",\n  secondSnapType: "+(e.secondSnapType??0)+",\n  direction: "+(e.direction??3)+",\n  dimPosition: "+(e.dimPosition?.toScript()??"new Point()")+",\n  dimVal: new Variable("+(e.dimVal??10)+"),\n  changeDimVal: "+(e.changeDimVal??0)+",\n  radiusOrDiameter: "+(e.radiusOrDiameter??0)+",\n});\n"}static editDimensionValue(e){if(e)return"Sketch.editDimensionValue("+(e.dimensionId??0)+", new Variable("+(e.value??"10")+");\n"}static modifyDimensionPosition(e){if(e)return"Sketch.modifyDimensionPosition("+(e.dimensionId??0)+", "+(e.newPosition?.toScript()??"new Point()")+");\n"}static createDivision(e){if(e)return"Sketch.createDivision("+(e.curveId??0)+", "+(e.newPosition?.toScript()??"new Point()")+");\n"}static moveElements(e){if(e)return"Sketch.moveElements({\n  elementIds: "+(m(e.elementIds)??"[]")+",\n  startPnt: "+(e.startPnt?.toScript()??"new Point()")+",\n  endPnt: "+(e.endPnt?.toScript()??"new Point()")+",\n});\n"}static scaleElements(e){if(e)return"Sketch.createScaleElements({\n  elementIds: "+(m(e.elementIds)??"[]")+",\n  scalePnt: "+(e.scalePnt?.toScript()??"new Point()")+",\n  scaleRef: "+(e.scaleRef??1)+",\n  copyFlag: "+(e.copyFlag??0)+",\n  copyNum: "+(e.copyNum??1)+",\n});\n"}static rotateElements(e){if(e)return"Sketch.createRotateElements("+(m(e.elementIds)??"[]")+", "+(e.centerPoint?.toScript()??"new Point()")+", "+(e.angle??1)+");\n"}static createSketchLinearPattern(e){if(e)return"Sketch.createSketchLinearPattern({\n  elementIds: "+(m(e.elementIds)??"[]")+",\n  direction1: "+(e.direction1?.toScript()??"new Direction()")+",\n  spacing1: "+(e.spacing1??10)+",\n  reverse1: "+(e.reverse1??0)+",\n  copyNum1: "+(e.copyNum1??2)+",\n  XAngle1: "+(e.XAngle1??0)+",\n  disFlag1: "+(e.disFlag1??0)+",\n  copyNumFlag1: "+(e.copyNumFlag1??0)+",\n  direction2: "+(e.direction2?.toScript()??"new Direction()")+",\n  spacing2: "+(e.spacing2??10)+",\n  reverse2: "+(e.reverse2??0)+",\n  copyNum2: "+(e.copyNum2??2)+",\n  XAngle2: "+(e.XAngle2??90)+",\n  disFlag2: "+(e.disFlag2??0)+",\n  copyNumFlag2: "+(e.copyNumFlag2??0)+",\n  angleFlag: "+(e.angleFlag??0)+",\n  patternSeedFlag: "+(e.patternSeedFlag??0)+",\n  skipInstance: "+(m(e.skipInstance)??"[]")+",\n});\n"}static createSketchCircularPattern(e){if(e)return"Sketch.createSketchCircularPattern({\n  elementIds: "+(m(e.elementIds)??"[]")+",\n  angle: "+(e.angle??360)+",\n  instanceNum: "+(e.instanceNum??4)+",\n  reverse: "+(e.reverse??0)+",\n  equalDisFlag: "+(e.equalDisFlag??1)+",\n  labelDisFlag: "+(e.labelDisFlag??0)+",\n  labelRadiusFlag: "+(e.labelRadiusFlag??0)+",\n  labelSolidNumFlag: "+(e.labelSolidNumFlag??0)+",\n  pointX: "+(e.pointX??0)+",\n  pointY: "+(e.pointY??0)+",\n  pointId: "+(e.pointId??0)+",\n  skipInstance: "+(m(e.skipInstance)??"[]")+",\n});\n"}static createIntersectCurve(e){if(e)return"Sketch.createIntersectCurve("+(m(e.faceIds)??"[]")+");\n"}static createEquationCurve(e){if(e)return"Sketch.createEquationCurve({\n  equationType: "+(e.equationType??1)+",\n  coordinateType: "+(e.coordinateType??1)+",\n  equation1: '"+(e.equation1??"''")+"',\n  equation2: '"+(e.equation2??"''")+"',\n  startValue: "+(e.startValue??0)+",\n  endValue: "+(e.endValue??0)+",\n});\n"}static convertEdge(e){if(e)return"Sketch.convertEdge("+(m(e.edgeIds)??"[]")+");\n"}static addConstraintList(e){if(e)return"Sketch.addConstraint({\n  constraintType: "+(e.constraintType??f.pointCoincidence)+",\n  firstSnapId: "+(e.firstSnapId??0)+",\n  firstSnapType: "+(e.firstSnapType??0)+",\n  firstInstanceId: "+(e.firstInstanceId??0)+",\n  firstPickPnt: ["+(e.firstPickPnt??[0,0,0])+"],\n  secondSnapId: "+(e.secondSnapId??0)+",\n  secondSnapType: "+(e.secondSnapType??0)+",\n  secondInstanceId: "+(e.secondInstanceId??0)+",\n  secondPickPnt: ["+(e.secondPickPnt??[0,0,0])+"],\n});\n"}static createVirtualInterPoint(e){if(e)return"Sketch.virtualInterPoint({\n  curveId1: "+(e.curveId1??0)+",\n  instanceId1: "+(e.instanceId1??0)+",\n  curveId2: "+(e.curveId2??0)+",\n  instanceId2: "+(e.instanceId2??0)+",\n  pickPoint: "+(e.pickPoint?.toScript()??"new Point()")+",\n});\n"}static createCenterLine(e){if(e)return"Sketch.createCenterLine("+(e.centerPoint?.toScript()??"new Point()")+","+(e.endPnt?.toScript()??"new Point()")+","+(e.dimensionType??0)+");\n"}static createThreePointCenterRectangle(e){if(e)return"Sketch.createThreePointCenterRectangle("+(e.centerPoint?.toScript()??"new Point()")+","+(e.middlePoint?.toScript()??"new Point()")+","+(e.endPoint?.toScript()??"new Point()")+","+(e.dimConstraint??0)+");\n"}}class v{constructor(e){this.parent=e}#e(e){e&&(this.parent.commandScript+=e)}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}async executeFullSketchCommand(e){return this.parent.executeIncrementCommand(e,s.FULL_SKETCH_COMMAND)}createSketch(e){let t=y.createSketch(e);this.#e(t)}async createSketchIncrement(e){let t=y.createSketch(e);return this.#t(t,s.CREATE_SKETCH)}exitSketch(){let e=y.exitSketch();this.#e(e)}async exitSketchIncrement(){let e=y.exitSketch();return this.#t(e,s.EXIT_SKETCH)}editSketch(e){let t=y.editSketch(e);this.#e(t)}async editSketchIncrement(e){let t=y.editSketch(e);return this.#t(t,s.EDIT_SKETCH)}exitEditSketch(e){let t=y.exitEditSketch(e);this.#e(t)}async exitEditSketchIncrement(e){let t=y.exitEditSketch(e);return this.#t(t,s.EXIT_SKETCH)}createSketchLine(e){let t=y.createSketchLine(e);this.#e(t)}async createSketchLineIncrement(e){let t=y.createSketchLine(e);return this.#t(t)}createRectangle(e){let t=y.createRectangle(e);this.#e(t)}async createRectangleIncrement(e){let t=y.createRectangle(e);return this.#t(t)}createReferenceLine(e){let t=y.createReferenceLine(e);this.#e(t)}async createReferenceLineIncrement(e){let t=y.createReferenceLine(e);return this.#t(t)}createRectangleByCenter(e){let t=y.createRectangleByCenter(e);this.#e(t)}async createRectangleByCenterIncrement(e){let t=y.createRectangleByCenter(e);return this.#t(t)}createThreePointRectangle(e){let t=y.createThreePointRectangle(e);this.#e(t)}async createThreePointRectangleIncrement(e){let t=y.createThreePointRectangle(e);return this.#t(t)}createParallelogram(e){let t=y.createParallelogram(e);this.#e(t)}async createParallelogramIncrement(e){let t=y.createParallelogram(e);return this.#t(t)}createCircle(e){let t=y.createCircle(e);this.#e(t)}async createCircleIncrement(e){let t=y.createCircle(e);return this.#t(t)}createCircleByThreePoint(e){let t=y.createCircleByThreePoint(e);this.#e(t)}async createCircleByThreePointIncrement(e){let t=y.createCircleByThreePoint(e);return this.#t(t)}createArcByCenter(e){let t=y.createArcByCenter(e);this.#e(t)}async createArcByCenterIncrement(e){let t=y.createArcByCenter(e);return this.#t(t)}createArcByThreePoint(e){let t=y.createArcByThreePoint(e);this.#e(t)}async createArcByThreePointIncrement(e){let t=y.createArcByThreePoint(e);return this.#t(t)}createCenterArcSlot(e){let t=y.createCenterArcSlot(e);this.#e(t)}async createCenterArcSlotIncrement(e){let t=y.createCenterArcSlot(e);return this.#t(t)}createThreeArcSlot(e){let t=y.createThreeArcSlot(e);this.#e(t)}async createThreeArcSlotIncrement(e){let t=y.createThreeArcSlot(e);return this.#t(t)}createStraightSlot(e){let t=y.createStraightSlot(e);this.#e(t)}async createStraightSlotIncrement(e){let t=y.createStraightSlot(e);return this.#t(t)}createCenterStraightSlot(e){let t=y.createCenterStraightSlot(e);this.#e(t)}async createCenterStraightSlotIncrement(e){let t=y.createCenterStraightSlot(e);return this.#t(t)}createEllipse(e){let t=y.createEllipse(e);this.#e(t)}async createEllipseIncrement(e){let t=y.createEllipse(e);return this.#t(t)}createEllipseArc(e){let t=y.createEllipseArc(e);this.#e(t)}async createEllipseArcIncrement(e){let t=y.createEllipseArc(e);return this.#t(t)}createRegularPolygon(e){let t=y.createRegularPolygon(e);this.#e(t)}async createRegularPolygonIncrement(e){let t=y.createRegularPolygon(e);return this.#t(t)}createIntpCurve(e){let t=y.createIntpCurve(e);this.#e(t)}async createIntpCurveIncrement(e){let t=y.createIntpCurve(e);return this.#t(t)}createPoint(e){let t=y.createPoint(e);this.#e(t)}async createPointIncrement(e){let t=y.createPoint(e);return this.#t(t)}setReference(e){let t=y.setReference(e);this.#e(t)}async setReferenceIncrement(e){let t=y.setReference(e);return this.#t(t)}createFilletCurve(e){let t=y.createFilletCurve(e);this.#e(t)}async createFilletCurveIncrement(e){let t=y.createFilletCurve(e);return this.#t(t)}createChamferCurve(e){let t=y.createChamferCurve(e);this.#e(t)}async createChamferCurveIncrement(e){let t=y.createChamferCurve(e);return this.#t(t)}createChamferCurveByAngle(e){let t=y.createChamferCurveByAngle(e);this.#e(t)}async createChamferCurveByAngleIncrement(e){let t=y.createChamferCurveByAngle(e);return this.#t(t)}createAutoTrimCurve(e){let t=y.createAutoTrimCurve(e);this.#e(t)}async createAutoTrimCurveIncrement(e){let t=y.createAutoTrimCurve(e);return this.#t(t)}createExtendCurve(e){let t=y.createExtendCurve(e);this.#e(t)}async createExtendCurveIncrement(e){let t=y.createExtendCurve(e);return this.#t(t)}createOffsetCurve(e){let t=y.createOffsetCurve(e);this.#e(t)}async createOffsetCurveIncrement(e){let t=y.createOffsetCurve(e);return this.#t(t)}createMirror(e){let t=y.createMirror(e);this.#e(t)}async createMirrorIncrement(e){let t=y.createMirror(e);return this.#t(t)}copyElements(e){let t=y.copyElements(e);this.#e(t)}async copyElementsIncrement(e){let t=y.copyElements(e);return this.#t(t)}deleteElements(e){let t=y.deleteElements(e);this.#e(t)}async deleteElementsIncrement(e){let t=y.deleteElements(e);return this.#t(t)}createDimension(e){let t=y.createDimension(e);this.#e(t)}async createDimensionIncrement(e){let t=y.createDimension(e);return this.#t(t)}editDimensionValue(e){let t=y.editDimensionValue(e);this.#e(t)}async editDimensionValueIncrement(e){let t=y.editDimensionValue(e);return this.#t(t)}modifyDimensionPosition(e){let t=y.modifyDimensionPosition(e);this.#e(t)}async modifyDimensionPositionIncrement(e){let t=y.modifyDimensionPosition(e);return this.#t(t)}createDivision(e){let t=y.createDivision(e);this.#e(t)}async createDivisionIncrement(e){let t=y.createDivision(e);return this.#t(t)}moveElements(e){let t=y.moveElements(e);this.#e(t)}async moveElementsIncrement(e){let t=y.moveElements(e);return this.#t(t)}scaleElements(e){let t=y.scaleElements(e);this.#e(t)}async scaleElementsIncrement(e){let t=y.scaleElements(e);return this.#t(t)}rotateElements(e){let t=y.rotateElements(e);this.#e(t)}async rotateElementsIncrement(e){let t=y.rotateElements(e);return this.#t(t)}createSketchLinearPattern(e){let t=y.createSketchLinearPattern(e);this.#e(t)}async createSketchLinearPatternIncrement(e){let t=y.createSketchLinearPattern(e);return this.#t(t)}createSketchCircularPattern(e){let t=y.createSketchCircularPattern(e);this.#e(t)}async createSketchCircularPatternIncrement(e){let t=y.createSketchCircularPattern(e);return this.#t(t)}createIntersectCurve(e){let t=y.createIntersectCurve(e);this.#e(t)}async createIntersectCurveIncrement(e){let t=y.createIntersectCurve(e);return this.#t(t)}createEquationCurve(e){let t=y.createEquationCurve(e);this.#e(t)}async createEquationCurveIncrement(e){let t=y.createEquationCurve(e);return this.#t(t)}convertEdge(e){let t=y.convertEdge(e);this.#e(t)}async convertEdgeIncrement(e){let t=y.convertEdge(e);return this.#t(t)}addConstraintList(e){let t=y.addConstraintList(e);this.#e(t)}async addConstraintListIncrement(e){let t=y.addConstraintList(e);return this.#t(t)}createCenterLine(e){let t=y.createCenterLine(e);this.#e(t)}async createCenterLineIncrement(e){let t=y.createCenterLine(e);return this.#t(t)}createThreePointCenterRectangle(e){let t=y.createThreePointCenterRectangle(e);this.#e(t)}async createThreePointCenterRectangleIncrement(e){let t=y.createThreePointCenterRectangle(e);return this.#t(t)}}class g{static extrude(e,t=""){if(e)return"Solid.extrude('"+t+"',{\n  sketch:"+(e.sketch??0)+",\n  reverse:"+(e.reverse??0)+",\n  directionType:"+(e.directionType??0)+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  extrudeType1:"+(e.extrudeType1??0)+",\n  height1:"+(e.height1??10)+",\n  toSurface1:"+(e.toSurface1??0)+",\n  toSurface1InsId:"+(e.toSurface1InsId??"'0'")+",\n  toVertex1:"+(e.toVertex1?.toScript()??"new Point()")+",\n  reverseSurDis1:"+(e.reverseSurDis1??0)+",\n  transSurface1:"+(e.transSurface1??0)+",\n  draftType1:"+(e.draftType1??-1)+",\n  angle1:"+(e.angle1??0)+",\n  extrudeType2:"+(e.extrudeType2??-1)+",\n  height2:"+(e.height2??0)+",\n  toSurface2:"+(e.toSurface2??0)+",\n  toSurface2InsId:"+(e.toSurface2InsId??"'0'")+",\n  toVertex2:"+(e.toVertex2?.toScript()??"new Point()")+",\n  reverseSurDis2:"+(e.reverseSurDis2??0)+",\n  transSurface2:"+(e.transSurface2??0)+",\n  draftType2:"+(e.draftType2??-1)+",\n  angle2:"+(e.angle2??0)+",\n  offsetType:"+(e.offsetType??-1)+",\n  distance:"+(e.distance??0)+",\n  reverseOffset:"+(e.reverseOffset??0)+",\n  thicknessType:"+(e.thicknessType??-2)+",\n  thickness1:"+(e.thickness1??0)+",\n  thickness2:"+(e.thickness2??0)+",\n  mergeType:"+(e.mergeType??0)+",\n  mergeSolids:"+(m(e.mergeSolids)??"[]")+",\n});\n"}static extrudeCut(e,t){if(e)return"Solid.extrudeCut('"+t+"',{\n  sketch:"+(e.sketch??0)+",\n  reverse:"+(e.reverse??0)+",\n  directionType:"+(e.directionType??0)+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  extrudeType1:"+(e.extrudeType1??0)+",\n  height1:"+(e.height1??10)+",\n  toSurface1:"+(e.toSurface1??0)+",\n  toSurface1InsId:"+(e.toSurface1InsId??"'0'")+",\n  toVertex1:"+(e.toVertex1?.toScript()??"new Point()")+",\n  reverseSurDis1:"+(e.reverseSurDis1??0)+",\n  transSurface1:"+(e.transSurface1??0)+",\n  draftType1:"+(e.draftType1??-1)+",\n  angle1:"+(e.angle1??0)+",\n  extrudeType2:"+(e.extrudeType2??-1)+",\n  height2:"+(e.height2??0)+",\n  toSurface2:"+(e.toSurface2??0)+",\n  toSurface2InsId:"+(e.toSurface2InsId??"'0'")+",\n  toVertex2:"+(e.toVertex2?.toScript()??"new Point()")+",\n  reverseSurDis2:"+(e.reverseSurDis2??0)+",\n  transSurface2:"+(e.transSurface2??0)+",\n  draftType2:"+(e.draftType2??-1)+",\n  angle2:"+(e.angle2??0)+",\n  offsetType:"+(e.offsetType??-1)+",\n  distance:"+(e.distance??0)+",\n  reverseOffset:"+(e.reverseOffset??0)+",\n  thicknessType:"+(e.thicknessType??-2)+",\n  thickness1:"+(e.thickness1??0)+",\n  thickness2:"+(e.thickness2??0)+",\n  reverseToCut:"+(e.reverseToCut??0)+",\n  cutSolids:"+(m(e.cutSolids)??"[]")+",\n});\n"}static revolve(e,t){if(e)return"Solid.revolve('"+t+"',{\n  sketch:"+(e.sketch??0)+",\n  axis:"+(e.axis?.toScript()??"new Axis()")+",\n  reverse:"+(e.reverse??0)+",\n  revolveType1:"+(e.revolveType1??0)+",\n  angle1:"+(e.angle1??30)+",\n  toSurface1:"+(e.toSurface1??10)+",\n  revolveType2:"+(e.revolveType2??0)+",\n  angle2:"+(e.angle2??0)+",\n  toSurface2:"+(e.toSurface2??0)+",\n  mergeType:"+(e.mergeType??0)+",\n  mergeSolids:"+(m(e.mergeSolids)??"[]")+",\n});\n"}static revolveCut(e,t){if(e)return"Solid.revolveCut('"+t+"',{\n  sketch:"+(e.sketch??0)+",\n  axis:"+(e.axis?.toScript()??"new Axis()")+",\n  reverse:"+(e.reverse??0)+",\n  revolveType1:"+(e.revolveType1??0)+",\n  angle1:"+(e.angle1??30)+",\n  toSurface1:"+(e.toSurface1??0)+",\n  revolveType2:"+(e.revolveType2??-1)+",\n  angle2:"+(e.angle2??0)+",\n  toSurface2:"+(e.toSurface2??0)+",\n  cutSolids:"+(m(e.cutSolids)??"[]")+",\n});\n"}static sweep(e,t){if(e)return"Solid.sweep('"+t+"',{\n  sweepType:"+(e.sweepType??0)+",\n  sweepProfile:"+(e.sweepProfile??0)+",\n  loopCurveIds:"+(m(e.loopCurveIds)??"[]")+",\n  sweepPath:"+(m(e.sweepPath)??"[]")+",\n  selectChain:"+(e.selectChain??0)+",\n  profileDirection:"+(e.profileDirection??2)+",\n  sweepDirection:"+(e.sweepDirection??0)+",\n  radius:"+(e.radius??10)+",\n  mergeType:"+(e.mergeType??0)+",\n  mergeSolids:"+(m(e.mergeSolids)??"[]")+",\n});\n"}static sweepCut(e,t){if(e)return"Solid.sweepCut('"+t+"',{\n  sweepType:"+(e.sweepType??0)+",\n  sweepProfile:"+(e.sweepProfile??0)+",\n  loopCurveIds:"+(m(e.loopCurveIds)??"[]")+",\n  sweepPath:"+(m(e.sweepPath)??"[]")+",\n  profileDirection:"+(e.profileDirection??2)+",\n  sweepDirection:"+(e.sweepDirection??0)+",\n  selectChain:"+(e.selectChain??0)+",\n  radius:"+(e.radius??10)+",\n  cutSolids:"+(m(e.cutSolids)??"[]")+",\n});\n"}static loft(e,t){if(e)return"Solid.loft('"+t+"',{\n  sketchs:"+(m(e.sketchs)??"[]")+",\n  startConstraint:"+(e.startConstraint??0)+",\n  endConstraint:"+(e.endConstraint??0)+",\n  startTangent:"+(e.startTangent??"new Direction()")+",\n  endTangent:"+(e.endTangent??"new Direction()")+",\n  startMagnitude:"+(e.startMagnitude??0)+",\n  endMagnitude:"+(e.endMagnitude??0)+",\n  hasGuideCurve:"+(e.hasGuideCurve??0)+",\n  guideCurves:"+(m(e.guideCurves)??"[]")+",\n  matchPoints:"+(m(e.matchPoints)??"[]")+",\n  mergeType:"+(e.mergeType??0)+",\n  mergeSolids:"+(m(e.mergeSolids)??"[]")+",\n});\n"}static loftCut(e,t){if(e)return"Solid.loftCut('"+t+"',{\n  sketchs:"+(m(e.sketchs)??"[]")+",\n  startConstraint:"+(e.startConstraint??0)+",\n  endConstraint:"+(e.endConstraint??0)+",\n  startTangent:"+(e.startTangent??"new Direction()")+",\n  endTangent:"+(e.endTangent??"new Direction()")+",\n  startMagnitude:"+(e.startMagnitude??0)+",\n  endMagnitude:"+(e.endMagnitude??0)+",\n  hasGuideCurve:"+(e.hasGuideCurve??0)+",\n  guideCurves:"+(m(e.guideCurves)??"[]")+",\n  matchPoints:"+(m(e.matchPoints)??"[]")+",\n  cutType:"+(e.cutType??1)+",\n  cutSolids:"+(m(e.cutSolids)??"[]")+",\n});\n"}static createShell(e,t){if(e)return"Solid.createShell('"+t+"',{\n  removeFaces:"+(m(e.removeFaces)??"[]")+",\n  thickenSolid:"+(e.thickenSolid??0)+",\n  thickness:"+(e.thickness??10)+",\n  outward:"+(e.outward??0)+",\n  multiFaces:"+(m(e.multiFaces)??"[]")+",\n  multiThickness:"+(m(e.multiThickness)??"[]")+",\n});\n"}static thicken(e,t){if(e)return"Solid.thicken('"+t+"',{\n  thickenSurfaceId:"+(e.thickenSurfaceId??0)+",\n  thickness:"+(e.thickness??10)+",\n  outward:"+(e.outward??0)+",\n});\n"}static draftAngle(e,t){if(e)return"Solid.draftAngle('"+t+"',{\n  draftType:"+(e.draftType??0)+",\n  neutralPlane:"+(e.neutralPlane??0)+",\n  draftAngle:"+(e.draftAngle??30)+",\n  draftFaces:"+(m(e.draftFaces)??"[]")+",\n  reverse:"+(e.reverse??0)+",\n  pullDirection:"+(e.pullDirection?.toScript()??"new Direction()")+",\n  partingLines:"+(m(e.partingLines)??"[]")+",\n  otherFace:"+(e.otherFace??0)+",\n});\n"}static cutSplit(e,t){if(e)return"Solid.cutSplit('"+t+"',{\n  solidId:"+(e.solidId??0)+",\n  cutSurfaceId:"+(e.cutSurfaceId??0)+",\n});\n"}static createHole(e,t){if(e)return"Solid.createHole('"+t+"',{\n  holeFace:"+(e.holeFace??0)+",\n  holePoint:"+(e.holePoint?.toScript()??"new Point()")+",\n  holeType:"+(e.holeType??0)+",\n  endCondition:"+(e.endCondition??0)+",\n  hasEndAngle:"+(e.hasEndAngle??0)+",\n  endAngle:"+(e.endAngle??10)+",\n  depth:"+(e.depth??100)+",\n  diameter:"+(e.diameter??10)+",\n  angle1:"+(e.angle1??10)+",\n  depth1:"+(e.depth1??10)+",\n  diameter1:"+(e.diameter1??15)+",\n});\n"}static createHoles(e,t){if(e)return"Solid.createHoles('"+t+"',{\n  holeFace:"+(e.holeFace??0)+",\n  holePoint:"+(m(e.holePoint)??"[]")+",\n  holePrfId:"+(e.holePrfId??0)+",\n  holeType:"+(e.holeType??0)+",\n  diameter:"+(e.diameter??10)+",\n  hasEndAngle:"+(e.hasEndAngle??0)+",\n  endAngle:"+(e.endAngle??10)+",\n  endCondition:"+(e.endCondition??0)+",\n  depth:"+(e.depth??100)+",\n  depthToType:"+(e.depthToType??0)+",\n  toFace:"+(e.toFace??0)+",\n  offsetDis:"+(e.offsetDis??15)+",\n  toFaceType:"+(e.toFaceType??0)+",\n  diameter1:"+(e.diameter1??15)+",\n  depth1:"+(e.depth1??10)+",\n  angle1:"+(e.angle1??10)+",\n  slotDirection:"+(e.slotDirection??0)+",\n  slotDir:"+(e.slotDir?.toScript()??"new Point()")+",\n  slotLength:"+(e.slotLength??0)+",\n  arcCenterToArcCenter:"+(e.arcCenterToArcCenter??0)+",\n  slotAngle:"+(e.slotAngle??15)+",\n  slotAngleReverse:"+(e.slotAngleReverse??0)+",\n  holeForm:"+(e.holeForm??1)+",\n  threadEndType:"+(e.threadEndType??0)+",\n  displayType:"+(e.displayType??3)+",\n  showCutThread:"+(e.showCutThread??1)+",\n});\n"}static createRib(e,t){if(e)return"Solid.createRib('"+t+"',{\n  sketch:"+(e.sketch??0)+",\n  body:"+(e.body??0)+",\n  ribDirection:"+(e.ribDirection??0)+",\n  direction:"+(e.slotDir?.direction()??"new Direction()")+",\n  reverse:"+(e.reverse??0)+",\n  thicknessType:"+(e.thicknessType??0)+",\n  thickness:"+(e.thickness??10)+",\n  draftType:"+(e.draftType??-1)+",\n  angle:"+(e.angle??0)+",\n  extendType:"+(e.extendType??0)+",\n});\n"}static booleanUnion(e,t){if(e)return"Solid.booleanUnion('"+t+"',{\n  entitys:"+(m(e.entitys)??"[]")+",\n});\n"}static booleanSubtract(e,t){if(e)return"Solid.booleanSubtract('"+t+"',{\n  entityBs:"+(m(e.entityBs)??"[]")+",\n  entityA:"+(e.entityA??0)+",\n  keep:"+(e.keep??0)+",\n});\n"}static booleanIntersect(e,t){if(e)return"Solid.booleanIntersect('"+t+"',{\n  entitys:"+(m(e.entitys)??"[]")+",\n  keep:"+(e.keep??0)+",\n});\n"}static createChamfer(e,t){if(e)return"Solid.createChamfer('"+t+"',{\n  type:"+(e.type??0)+",\n  tangentPropagation:"+(e.tangentPropagation??1)+",\n  distance:"+(e.distance??0)+",\n  distance2:"+(e.distance2??0)+",\n  elements:"+(m(e.elements)??"[]")+",\n  elementTypes:"+(m(e.elementTypes)??"[]")+",\n  reverse:"+(e.reverse??0)+",\n});\n"}static createChamferByAngle(e,t){if(e)return"Solid.createChamferByAngle('"+t+"',{\n  tangentPropagation:"+(e.tangentPropagation??1)+",\n  angle:"+(e.angle??0)+",\n  distance:"+(e.distance??0)+",\n  elements:"+(m(e.elements)??"[]")+",\n  elementTypes:"+(m(e.elementTypes)??"[]")+",\n  reverse:"+(e.reverse??0)+",\n});\n"}static createFillet(e,t){if(e)return"Solid.createFillet('"+t+"',{\n  type:"+(e.type??0)+",\n  tangentPropagation:"+(e.tangentPropagation??1)+",\n  elements:"+(m(e.elements)??"[]")+",\n  radius:"+(m(e.radius)??"[]")+",\n  multiRadiusFillet:"+(e.multiRadiusFillet??1)+",\n  instanceNumber:"+(e.instanceNumber??0)+",\n  internalPoints:"+(m(e.internalPoints)??"[]")+",\n  internalRadius:"+(m(e.internalRadius)??"[]")+",\n});\n"}static mirrorSolid(e,t){if(e)return"Solid.mirrorSolid('"+t+"',{\n  baseType:"+(e.baseType??0)+",\n  body:"+(e.body??0)+",\n  features:"+(m(e.features)??"[]")+",\n  mirrorPlane:"+(e.mirrorPlane??0)+",\n  mergeSolids:"+(e.mergeSolids??0)+",\n  geometryPattern:"+(e.geometryPattern??0)+",\n});\n"}static linearPattern(e,t){if(e)return"Solid.linearPattern('"+t+"',{\n  baseType:"+(e.baseType??0)+",\n  body:"+(e.body??0)+",\n  features:"+(m(e.features)??"[]")+",\n  direction1:"+(e.direction1?.toScript()??"new Direction()")+",\n  spacing1:"+(e.spacing1??10)+",\n  instanceNum1:"+(e.instanceNum1??2)+",\n  reverse1:"+(e.reverse1??0)+",\n  direction2:"+(e.direction2?.toScript()??"new Direction()")+",\n  hasDirection2:"+(e.hasDirection2??0)+",\n  spacing2:"+(e.spacing2??10)+",\n  instanceNum2:"+(e.instanceNum2??2)+",\n  reverse2:"+(e.reverse2??0)+",\n  patternSeed:"+(e.patternSeed??0)+",\n  skipInstance:"+(e.skipInstance??0)+",\n  instancesToSkip:"+(m(e.instancesToSkip)??"[]")+",\n  geometryPattern:"+(e.geometryPattern??1)+",\n});\n"}static circularPattern(e,t){if(e)return"Solid.circularPattern('"+t+"',{\n  baseType:"+(e.baseType??0)+",\n  body:"+(e.body??0)+",\n  features:"+(m(e.features)??"[]")+",\n  axis:"+(e.axis?.toScript()??"new Axis()")+",\n  reverse:"+(e.reverse??0)+",\n  angle1:"+(e.angle1??0)+",\n  instanceNum1:"+(e.instanceNum1??2)+",\n  equalSpacing1:"+(e.equalSpacing1??1)+",\n  symmetric:"+(e.symmetric??0)+",\n  hasDirection2:"+(e.hasDirection2??0)+",\n  angle2:"+(e.angle2??120)+",\n  instanceNum2:"+(e.instanceNum2??0)+",\n  equalSpacing2:"+(e.equalSpacing2??0)+",\n  skipInstance:"+(e.skipInstance??0)+",\n  instancesToSkip:"+(m(e.instancesToSkip)??"[]")+",\n  geometryPattern:"+(e.geometryPattern??0)+",\n});\n"}static curvePattern(e,t){if(e)return"Solid.curvePattern('"+t+"',{\n  baseType:"+(e.baseType??0)+",\n  body:"+(e.body??0)+",\n  features:"+(m(e.features)??"[]")+",\n  curves:"+(m(e.curves)??"[]")+",\n  spacing:"+(e.spacing??10)+",\n  instanceNum:"+(e.instanceNum??2)+",\n  reverse:"+(e.reverse??0)+",\n  equalSpacing:"+(e.equalSpacing??1)+",\n  curveMethod:"+(e.curveMethod??0)+",\n  alignmentMethod:"+(e.alignmentMethod??0)+",\n  skipInstance:"+(e.skipInstance??0)+",\n  instancesToSkip:"+(m(e.instancesToSkip)??"[]")+",\n  curvesInsId:"+(m(e.curvesInsId)??"[]")+",\n  geometryPattern:"+(e.geometryPattern??0)+",\n});\n"}static sketchPattern(e,t){if(e)return"Solid.sketchPattern('"+t+"',{\n  baseType:"+(e.baseType??0)+",\n  body:"+(e.body??0)+",\n  features:"+(m(e.features)??"[]")+",\n  sketchId:"+(e.sketchId??0)+",\n  referenceType:"+(e.referenceType??0)+",\n  referencePoint:"+(e.referencePoint?.toScript()??"new Point()")+",\n  geometryPattern:"+(e.geometryPattern??1)+",\n  sketchInsId:"+(e.sketchInsId??1)+",\n});\n"}static createBox(e,t){if(e)return"Solid.createBox('"+t+"',{\n  positionType:"+(e.positionType??0)+",\n  positionPoint:"+(e.positionPoint?.toScript()??"new Point()")+",\n  length:"+(e.length??40)+",\n  width:"+(e.width??50)+",\n  height:"+(e.height??60)+",\n});\n"}static createCylinder(e,t){if(e)return"Solid.createCylinder('"+t+"',{\n  positionType:"+(e.positionType??0)+",\n  positionPoint:"+(e.positionPoint?.toScript()??"new Point()")+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  radius:"+(e.radius??30)+",\n  height:"+(e.height??40)+",\n});\n"}static createSphere(e,t){if(e)return"Solid.createSphere('"+t+"',{\n  center:"+(e.center?.toScript()??"new Point()")+",\n  radius:"+(e.radius??10)+",\n});\n"}static createWedge(e,t){if(e)return"Solid.createWedge('"+t+"',{\n  baseVertex:"+(e.baseVertex?.toScript()??"new Point()")+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  length:"+(e.length??20)+",\n  width:"+(e.width??20)+",\n  height:"+(e.height??20)+",\n});\n"}static createCone(e,t){if(e)return"Solid.createCone('"+t+"',{\n  center:"+(e.center?.toScript()??"new Point()")+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  radius:"+(e.radius??40)+",\n  height:"+(e.height??40)+",\n  minorRadius:"+(e.minorRadius??0)+",\n});\n"}static createPyramid(e,t){if(e)return"Solid.createPyramid('"+t+"',{\n  center:"+(e.center?.toScript()??"new Point()")+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  edgeNum:"+(e.edgeNum??8)+",\n  radius:"+(e.radius??20)+",\n  height:"+(e.height??100)+",\n});\n"}static createTorus(e,t){if(e)return"Solid.createTorus('"+t+"',{\n  center:"+(e.center?.toScript()??"new Point()")+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  innerRadius:"+(e.radius??1)+",\n  radius:"+(e.height??10)+",\n});\n"}static moveFaces(e,t){if(e)return"Solid.moveFaces('"+t+"',{\n  moveFaceIds:"+(m(e.moveFaceIds)??"[]")+",\n  X:"+(e.X??10)+",\n  Y:"+(e.Y??10)+",\n  Z:"+(e.Z??10)+",\n});\n"}static offsetFaces(e,t){if(e)return"Solid.offsetFaces('"+t+"',{\n  offsetFaceIds:"+(m(e.offsetFaceIds)??"[]")+",\n  distance:"+(e.distance??10)+",\n});\n"}static deleteFaces(e,t){if(e)return"Solid.deleteFaces('"+t+"',{\n  deleteFaceIds:"+(m(e.deleteFaceIds)??"[]")+",\n  isFix:"+(e.isFix??0)+",\n});\n"}static replaceFaces(e,t){if(e)return"Solid.replaceFaces('"+t+"',{\n  replaceFaceIds:"+(m(e.replaceFaceIds)??"[]")+",\n  targetFaceId:"+(e.targetFaceId??0)+",\n});\n"}static createCutSplit(e,t){if(e)return"Solid.createCutSplit('"+t+"',{\n  solidId:"+(e.solidId??0)+",\n  cutSurfaceId:"+(e.cutSurfaceId??0)+",\n  isInvert:"+(e.isInvert??0)+",\n});\n"}static fillPattern(e,t){if(e)return"Solid.fillPattern('"+t+"',{\n  baseType:"+(e.baseType??1)+",\n  body:"+(m(e.body)??"[]")+",\n  features:"+(m(e.features)??"[]")+",\n  fillBound:"+(m(e.fillBound)??"[]")+",\n  fillType:"+(e.fillType??0)+",\n  instDist:"+(e.instDist??10)+",\n  angle:"+(e.angle??60)+",\n  edgeDist:"+(e.edgeDist??0)+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  reverse:"+(e.reverse??0)+",\n  skipInstance:"+(e.skipInstance??0)+",\n  instSkip:"+(m(e.instSkip)??"[]")+",\n  ringInstNum:"+(e.ringInstNum??0)+",\n  polySidesNum:"+(e.polySidesNum??6)+",\n  averType:"+(e.averType??0)+",\n  geometryPattern:"+(e.geometryPattern??0)+",\n  fillBoundInsId:"+(m(e.fillBoundInsId)??"[]")+",\n});\n"}static createTransformByDistance(e,t=""){if(e)return"Solid.createTransformByDistance('"+t+"',{\n  entityIds: "+(m(e.entityIds)??"[]")+",\n  copy: "+(e.copy??1)+",\n  startPoint: "+(e.startPoint?.toScript()??"new Point()")+",\n  distance: "+(e.distance??10)+",\n  direction: "+(e.direction?.toScript()??"new Direction()")+",\n  reverse: "+(e.reverse??0)+",\n});"}static createTransformByXYZ(e,t=""){if(e)return"Solid.createTransformByXYZ('"+t+"',{\n  entityIds: "+(m(e.entityIds)??"[]")+",\n  copy: "+(e.copy??1)+",\n  startPoint: "+(e.startPoint?.toScript()??"new Point()")+",\n  endPoint: "+(e.endPoint?.toScript()??"new Point()")+",\n  reverse: "+(e.reverse??0)+",\n});"}static createTransformByRotate(e,t=""){if(e)return"Solid.createTransformByRotate('"+t+"',{\n  entityIds: "+(m(e.entityIds)??"[]")+",\n  copy: "+(e.copy??1)+",\n  startPoint: "+(e.startPoint?.toScript()??"new Point()")+",\n  angle: "+(e.angle??"10")+",\n  axis: "+(e.axis?.toScript()??"new Direction()")+",\n  reverse: "+(e.reverse??0)+",\n});"}static createTransformByCoordinateSystem(e,t=""){if(e)return"Solid.createTransformByCoordinateSystem('"+t+"',{\n  entityIds: "+(m(e.entityIds)??"[]")+",\n  copy: "+(e.copy??1)+",\n  refCoordSysId: "+(e.refCoordSysId??0)+",\n  refCoordSysInsId: '"+(e.refCoordSysInsId??"")+"',\n  tarCoordSysId: "+(e.tarCoordSysId??0)+",\n  tarCoordSysInsId: '"+(e.tarCoordSysInsId??"")+"',\n});"}}class S{constructor(e){this.parent=e}#e(e){e&&(this.parent.commandScript+=e)}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}extrude(e,t=""){let n=g.extrude(e,t);this.#e(n)}async extrudeIncrement(e,t=""){let n=g.extrude(e,t);return this.#t(n)}extrudeCut(e,t){let n=g.extrudeCut(e,t);this.#e(n)}async extrudeCutIncrement(e,t){let n=g.extrudeCut(e,t);return this.#t(n)}revolve(e,t){let n=g.revolve(e,t);this.#e(n)}async revolveIncrement(e,t){let n=g.revolve(e,t);return this.#t(n)}revolveCut(e,t){let n=g.revolveCut(e,t);this.#e(n)}async revolveCutIncrement(e,t){let n=g.revolveCut(e,t);return this.#t(n)}sweep(e,t){let n=g.sweep(e,t);this.#e(n)}async sweepIncrement(e,t){let n=g.sweep(e,t);return this.#t(n)}sweepCut(e,t){let n=g.sweepCut(e,t);this.#e(n)}async sweepCutIncrement(e,t){let n=g.sweepCut(e,t);return this.#t(n)}loft(e,t){let n=g.loft(e,t);this.#e(n)}async loftIncrement(e,t){let n=g.loft(e,t);return this.#t(n)}loftCut(e,t){let n=g.loftCut(e,t);this.#e(n)}async loftCutIncrement(e,t){let n=g.loftCut(e,t);return this.#t(n)}createShell(e,t){let n=g.createShell(e,t);this.#e(n)}async createShellIncrement(e,t){let n=g.createShell(e,t);return this.#t(n)}thicken(e,t){let n=g.thicken(e,t);this.#e(n)}async thickenIncrement(e,t){let n=g.thicken(e,t);return this.#t(n)}draftAngle(e,t){let n=g.draftAngle(e,t);this.#e(n)}async draftAngleIncrement(e,t){let n=g.draftAngle(e,t);return this.#t(n)}cutSplit(e,t){let n=g.cutSplit(e,t);this.#e(n)}async cutSplitIncrement(e,t){let n=g.cutSplit(e,t);return this.#t(n)}createHole(e,t){let n=g.createHole(e,t);this.#e(n)}async createHoleIncrement(e,t){let n=g.createHole(e,t);return this.#t(n)}createRib(e,t){let n=g.createRib(e,t);this.#e(n)}async createRibIncrement(e,t){let n=g.createRib(e,t);return this.#t(n)}booleanUnion(e,t){let n=g.booleanUnion(e,t);this.#e(n)}async booleanUnionIncrement(e,t){let n=g.booleanUnion(e,t);return this.#t(n)}booleanSubtract(e,t){let n=g.booleanSubtract(e,t);this.#e(n)}async booleanSubtractIncrement(e,t){let n=g.booleanSubtract(e,t);return this.#t(n)}booleanIntersect(e,t){let n=g.booleanIntersect(e,t);this.#e(n)}async booleanIntersectIncrement(e,t){let n=g.booleanIntersect(e,t);return this.#t(n)}createChamfer(e,t){let n=g.createChamfer(e,t);this.#e(n)}async createChamferIncrement(e,t){let n=g.createChamfer(e,t);return this.#t(n)}createChamferByAngle(e,t){let n=g.createChamferByAngle(e,t);this.#e(n)}async createChamferByAngleIncrement(e,t){let n=g.createChamferByAngle(e,t);return this.#t(n)}createFillet(e,t){let n=g.createFillet(e,t);this.#e(n)}async createFilletIncrement(e,t){let n=g.createFillet(e,t);return this.#t(n)}mirrorSolid(e,t){let n=g.mirrorSolid(e,t);this.#e(n)}async mirrorSolidIncrement(e,t){let n=g.mirrorSolid(e,t);return this.#t(n)}linearPattern(e,t){let n=g.linearPattern(e,t);this.#e(n)}async linearPatternIncrement(e,t){let n=g.linearPattern(e,t);return this.#t(n)}circularPattern(e,t){let n=g.circularPattern(e,t);this.#e(n)}async circularPatternIncrement(e,t){let n=g.circularPattern(e,t);return this.#t(n)}curvePattern(e,t){let n=g.curvePattern(e,t);this.#e(n)}async curvePatternIncrement(e,t){let n=g.curvePattern(e,t);return this.#t(n)}sketchPattern(e,t){let n=g.sketchPattern(e,t);this.#e(n)}async sketchPatternIncrement(e,t){let n=g.sketchPattern(e,t);return this.#t(n)}createBox(e,t){let n=g.createBox(e,t);this.#e(n)}async createBoxIncrement(e,t){let n=g.createBox(e,t);return this.#t(n)}createCylinder(e,t){let n=g.createCylinder(e,t);this.#e(n)}async createCylinderIncrement(e,t){let n=g.createCylinder(e,t);return this.#t(n)}createSphere(e,t){let n=g.createSphere(e,t);this.#e(n)}async createSphereIncrement(e,t){let n=g.createSphere(e,t);return this.#t(n)}createWedge(e,t){let n=g.createWedge(e,t);this.#e(n)}async createWedgeIncrement(e,t){let n=g.createWedge(e,t);return this.#t(n)}createCone(e,t){let n=g.createCone(e,t);this.#e(n)}async createConeIncrement(e,t){let n=g.createCone(e,t);return this.#t(n)}createPyramid(e,t){let n=g.createPyramid(e,t);this.#e(n)}async createPyramidIncrement(e,t){let n=g.createPyramid(e,t);return this.#t(n)}createTorus(e,t){let n=g.createTorus(e,t);this.#e(n)}async createTorusIncrement(e,t){let n=g.createTorus(e,t);return this.#t(n)}moveFaces(e,t){let n=g.moveFaces(e,t);this.#e(n)}async moveFacesIncrement(e,t){let n=g.moveFaces(e,t);return this.#t(n)}offsetFaces(e,t){let n=g.offsetFaces(e,t);this.#e(n)}async offsetFacesIncrement(e,t){let n=g.offsetFaces(e,t);return this.#t(n)}deleteFaces(e,t){let n=g.deleteFaces(e,t);this.#e(n)}async deleteFacesIncrement(e,t){let n=g.deleteFaces(e,t);return this.#t(n)}replaceFaces(e,t){let n=g.replaceFaces(e,t);this.#e(n)}async replaceFacesIncrement(e,t){let n=g.replaceFaces(e,t);return this.#t(n)}createCutSplit(e,t){let n=g.createCutSplit(e,t);this.#e(n)}async createCutSplitIncrement(e,t){let n=g.createCutSplit(e,t);return this.#t(n)}fillPattern(e,t){let n=g.fillPattern(e,t);this.#e(n)}async fillPatternIncrement(e,t){let n=g.fillPattern(e,t);return this.#t(n)}createTransformByDistance(e,t){let n=g.createTransformByDistance(e,t);this.#e(n)}async createTransformByDistanceIncrement(e,t){let n=g.createTransformByDistance(e,t);return this.#t(n)}createTransformByXYZ(e,t){let n=g.createTransformByXYZ(e,t);this.#e(n)}async createTransformByXYZIncrement(e,t){let n=g.createTransformByXYZ(e,t);return this.#t(n)}createTransformByRotate(e,t){let n=g.createTransformByRotate(e,t);this.#e(n)}async createTransformByRotateIncrement(e,t){let n=g.createTransformByRotate(e,t);return this.#t(n)}createTransformByCoordinateSystem(e,t){let n=g.createTransformByCoordinateSystem(e,t);this.#e(n)}async createTransformByCoordinateSystemIncrement(e,t){let n=g.createTransformByCoordinateSystem(e,t);return this.#t(n)}}class I{static createHelixCurve(e,t=""){if(e)return"Curve.createHelixCurve('"+t+"',{\n  helixPlane:"+(e.helixPlane??0)+",\n  inputModel:"+(e.inputModel??0)+",\n  step:"+(e.step??10)+",\n  height:"+(e.height??50)+",\n  revolution:"+(e.revolution??5)+",\n  rotation:"+(e.rotation??0)+",\n  isTaperAngle:"+(e.isTaperAngle??0)+",\n  taperAngle:"+(e.taperAngle??0)+",\n  isEndsAngles:"+(e.isEndsAngles??0)+",\n  startAngle:"+(e.startAngle??0)+",\n  endAngle:"+(e.endAngle??0)+",\n  isInvert:"+(e.isInvert??0)+",\n});\n"}static createCompositeCurve(e,t=""){if(e)return"Curve.createCompositeCurve('"+t+"',"+(m(e.JoinEntities)??"[]")+");\n"}static createProjectCurve(e,t=""){if(e)return"Curve.createProjectCurve('"+t+"',{\n  projectionType:"+(e.projectionType??1)+",\n  sketches:"+(m(e.sketches)??"[]")+",\n  faces:"+(m(e.faces)??"[]")+",\n  reverse:"+(e.reverse??0)+",\n  directionType:"+(e.directionType??0)+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  doubleDirection:"+(e.doubleDirection??0)+",\n});\n"}static createCurveByInterpolationPoints(e,t=""){if(e)return"Curve.createCurveByInterpolationPoints('"+t+"',{\n  pickPnts:"+(m(e.pickPnts)??"[]")+",\n  isClosed:"+(e.isClosed??0)+",\n});\n"}static createSplitLine(e,t=""){if(e)return"Curve.createSplitLine('"+t+"',{\n  limitIds:"+(m(e.limitIds)??"[]")+",\n  surfaceIds:"+(m(e.surfaceIds)??"[]")+",\n  splitDirectionType:"+(e.splitDirectionType??0)+",\n  splitDirectionReverse:"+(e.splitDirectionReverse??0)+",\n});\n"}static createConnectCurve(e,t=""){if(e)return"Curve.createConnectCurve('"+t+"',{\n  lPnt:"+(e.lPnt??0)+",\n  rPnt:"+(e.rPnt??0)+",\n  lCont:"+(e.lCont??0)+",\n  rCont:"+(e.rCont??0)+",\n  lWeight:"+(e.lWeight??1)+",\n  rWeight:"+(e.rWeight??1)+",\n});\n"}static createCurveByXYZPoints(e,t=""){if(e)return"Curve.createCurveByXYZPoints('"+t+"',{\n  pickPnts:"+(m(e.points)??"[]")+",\n});\n"}}class P{constructor(e){this.parent=e}#e(e){e&&(this.parent.commandScript+=e)}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}createHelixCurve(e,t=""){let n=I.createHelixCurve(e,t);this.#e(n)}async createHelixCurveIncrement(e,t=""){let n=I.createHelixCurve(e,t);return this.#t(n)}createCompositeCurve(e,t=""){let n=I.createCompositeCurve(e,t);this.#e(n)}async createCompositeCurveIncrement(e,t=""){let n=I.createCompositeCurve(e,t);return this.#t(n)}createProjectCurve(e,t=""){let n=I.createProjectCurve(e,t);this.#e(n)}async createProjectCurveIncrement(e,t=""){let n=I.createProjectCurve(e,t);return this.#t(n)}createCurveByInterpolationPoints(e,t=""){let n=I.createCurveByInterpolationPoints(e,t);this.#e(n)}async createCurveByInterpolationPointsIncrement(e,t=""){let n=I.createCurveByInterpolationPoints(e,t);return this.#t(n)}createSplitLine(e,t=""){let n=I.createSplitLine(e,t);this.#e(n)}async createSplitLineIncrement(e,t=""){let n=I.createSplitLine(e,t);return this.#t(n)}createConnectCurve(e,t=""){let n=I.createConnectCurve(e,t);this.#e(n)}async createConnectCurveIncrement(e,t=""){let n=I.createConnectCurve(e,t);return this.#t(n)}createCurveByXYZPoints(e,t=""){let n=I.createCurveByXYZPoints(e,t);this.#e(n)}async createCurveByXYZPointsIncrement(e,t=""){let n=I.createCurveByXYZPoints(e,t);return this.#t(n)}}class x{static createLine(e,t=""){if(e)return"Datum.createLine('"+t+"',{\n  referenceType:"+(e.referenceType??1)+",\n  referenceEntities:"+(m(e.referenceEntities)??"[]")+",\n  refInstanceIdList:"+(m(e.refInstanceIdList)??"[]")+",\n});\n"}static createDatumLineByPointAndSurface(e,t=""){if(e)return"Datum.createDatumLineByPointAndSurface('"+t+"',{\n  point:"+(e.point?.toScript()??"new Point()")+",\n  pointRefInstanceId:"+(e.pointRefInstanceId??0)+",\n  surfaceId:"+(e.surfaceId??0)+",\n  surfaceIdRefInstanceId:"+(e.surfaceIdRefInstanceId??0)+",\n});\n"}static createPlaneByDistance(e,t=""){if(e){let n;return n=e.faceId?"  faceId:"+e.faceId+",\n":"  planeId:"+(e.planeId??8)+",\n","Datum.createPlaneByDistance('"+t+"',{\n"+n+"  invertNormal:"+(e.invertNormal??"0")+",\n  paralDis:"+(e.paralDis??"10")+",\n  reverse:"+(e.reverse??"0")+",\n});\n"}}static createPlaneByPlanePoint(e,t=""){if(e){let n;return n=e.faceId?"  faceId:"+e.faceId+",\n":"  planeId:"+(e.planeId??8)+",\n","Datum.createPlaneByPlanePoint('"+t+"',{\n"+n+"  invertNormal:"+(e.invertNormal??0)+",\n  paralPnt:"+(e.paralPnt?.toScript()??"new Point()")+",\n});\n"}}static createPlaneByPlaneAngle(e,t=""){if(e){let n;return n=e.faceId?"  faceId:"+e.faceId+",\n":"  planeId:"+(e.planeId??8)+",\n","Datum.createPlaneByPlaneAngle('"+t+"',{\n"+n+"  invertNormal:"+(e.invertNormal??0)+",\n  additionalAxis:"+(e.additionalAxis?.toScript()??"new Axis()")+",\n  axisAngle:"+(e.axisAngle??0)+",\n  reverse:"+(e.reverse??0)+",\n});\n"}}static createPlaneByThreePoints(e,t=""){if(e)return"Datum.createPlaneByThreePoints('"+t+"',{\n  threePnts:"+(m(e.threePnts)??"[]")+",\n  invertNormal:"+(e.invertNormal??0)+",\n});\n"}static createPlaneByPointNormal(e,t=""){if(e)return"Datum.createPlaneByPointNormal('"+t+"',{\n  planeAxis:"+(e.planeAxis?.toScript()??"new Axis()")+",\n  planePnt:"+(e.planePnt?.toScript()??"new Point()")+",\n  invertNormal:"+(e.invertNormal??0)+",\n});\n"}static createPlaneByLineAngle(e,t=""){if(e)return"Datum.createPlaneByLineAngle('"+t+"',{\n  planeAxis:"+(e.planeAxis?.toScript()??"new Axis()")+",\n  planePnt:"+(e.planePnt?.toScript()??"new Point()")+",\n  invertNormal:"+(e.invertNormal??0)+",\n  axisAngle:"+(e.axisAngle??0)+",\n  reverse:"+(e.reverse??0)+",\n});\n"}static createPointByArcPoint(e,t=""){if(e)return"Datum.createPointByArcPoint('"+t+"',{\n  referenceArcId:"+(e.referenceArcId??0)+",\n});\n"}static createPointByFacePoint(e,t=""){if(e)return"Datum.createPointByFacePoint('"+t+"',{\n  referenceFaceId:"+(e.referenceFaceId??0)+",\n});\n"}static createPointByCrossPoint(e,t=""){if(e)return"Datum.createPointByCrossPoint('"+t+"',{\n  referenceElementIds:"+(m(e.referenceElementIds)??"[]")+",\n});\n"}static createPointByProjectionPoint(e,t=""){if(e)return"Datum.createPointByProjectionPoint('"+t+"',{\n  referenceFaceId:"+(e.referenceFaceId??0)+",\n  referencePoint:"+(e.referencePoint?.toScript()??"new Point()")+",\n});\n"}static createPointByPoint(e,t=""){if(e)return"Datum.createPointByPoint('"+t+"',{\n  referencePointId:"+(e.referencePointId??0)+",\n});\n"}static createPointByCurve(e,t=""){if(e)return"Datum.createPointByCurve('"+t+"',{\n  referenceEntities:"+(e.referenceEntities??0)+",\n  multiplePntsType:"+(e.multiplePntsType??0)+",\n  referenceValue:"+(e.referenceValue??10)+",\n});\n"}static createCoordinateSystemByThreePoint(e,t=""){if(e)return"Datum.createCoordinateSystemByThreePoint('"+t+"', {\n  originPoint: "+(e.originPoint?.toScript()??"new Point()")+",\n  xPoint: "+(e.xPoint?.toScript()??"new Point()")+",\n  yPoint: "+(e.yPoint?.toScript()??"new Point()")+",\n  xReverse: "+(e.xReverse??0)+",\n  yReverse: "+(e.yReverse??0)+",\n  zReverse: "+(e.zReverse??0)+",\n});"}static createCoordinateSystemByOnePointAndTwoLines(e,t=""){if(e)return"Datum.createCoordinateSystemByOnePointAndTwoLines('"+t+"', {\n  originPoint: "+(e.originPoint?.toScript()??"new Point()")+",\n  directionType: "+(e.directionType??4)+",\n  direction1: "+(e.direction1?.toScript()??"new Point()")+",\n  direction2: "+(e.direction2?.toScript()??"new Point()")+",\n  xReverse: "+(e.xReverse??0)+",\n  yReverse: "+(e.yReverse??0)+",\n  zReverse: "+(e.zReverse??0)+",\n});"}static createCoordinateSystemByThreePlanes(e,t=""){if(e)return"Datum.createCoordinateSystemByThreePlanes('"+t+"', {\n  xPlaneId: "+(e.xPlaneId??0)+",\n  xPlaneInsId: '"+(e.xPlaneInsId??0)+"',\n  yPlaneId: "+(e.yPlaneId??0)+",\n  yPlaneInsId: '"+(e.yPlaneInsId??0)+"',\n  zPlaneId: "+(e.zPlaneId??0)+",\n  zPlaneInsId: '"+(e.zPlaneInsId??0)+"',\n  xReverse: "+(e.xReverse??0)+",\n  yReverse: "+(e.yReverse??0)+",\n  zReverse: "+(e.zReverse??0)+",\n});"}static createCoordinateSystemByTrendsMatrix(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"Datum.createCoordinateSystemByTrendsMatrix('"+t+"', {\n  matrix: "+(n?"mat":"new Matrix4()")+",\n  xReverse: "+(e.xReverse??0)+",\n  yReverse: "+(e.yReverse??0)+",\n  zReverse: "+(e.zReverse??0)+",\n});"}}static createCoordinateSystemByOffset(e,t=""){if(e)return"Datum.createCoordinateSystemByOffset('"+t+"', {\n  arsId: "+(e.arsId??0)+",\n  type: "+(e.type??8)+",\n  xRotateAngle: "+(e.xRotateAngle??0)+",\n  yRotateAngle: "+(e.yRotateAngle??0)+",\n  zRotateAngle: "+(e.zRotateAngle??0)+",\n  xOffsetDistance: "+(e.xOffsetDistance??0)+",\n  yOffsetDistance: "+(e.yOffsetDistance??0)+",\n  zOffsetDistance: "+(e.zOffsetDistance??0)+",\n});"}static createCoordinateSystemByPointAndView(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"Datum.createCoordinateSystemByPointAndView('"+t+"', {\n  originPoint: "+(e.originPoint?.toScript()??"new Point()")+",\n  matrix: "+(n?"mat":"new Matrix4()")+",\n  xReverse: "+(e.xReverse??0)+",\n  yReverse: "+(e.yReverse??0)+",\n  zReverse: "+(e.zReverse??0)+",\n});"}}}class b{constructor(e){this.parent=e}#e(e){e&&(this.parent.commandScript+=e)}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}createLine(e,t=""){let n=x.createLine(e,t);this.#e(n)}async createLineIncrement(e,t=""){let n=x.createLine(e,t);return this.#t(n)}createPlaneByDistance(e,t=""){let n=x.createPlaneByDistance(e,t);this.#e(n)}async createPlaneByDistanceIncrement(e,t=""){let n=x.createPlaneByDistance(e,t);return this.#t(n)}createPlaneByPlanePoint(e,t=""){let n=x.createPlaneByPlanePoint(e,t);this.#e(n)}async createPlaneByPlanePointIncrement(e,t=""){let n=x.createPlaneByPlanePoint(e,t);return this.#t(n)}createPlaneByPlaneAngle(e,t=""){let n=x.createPlaneByPlaneAngle(e,t);this.#e(n)}async createPlaneByPlaneAngleIncrement(e,t=""){let n=x.createPlaneByPlaneAngle(e,t);return this.#t(n)}createPlaneByThreePoints(e,t=""){let n=x.createPlaneByThreePoints(e,t);this.#e(n)}async createPlaneByThreePointsIncrement(e,t=""){let n=x.createPlaneByThreePoints(e,t);return this.#t(n)}createPlaneByPointNormal(e,t=""){let n=x.createPlaneByPointNormal(e,t);this.#e(n)}async createPlaneByPointNormalIncrement(e,t=""){let n=x.createPlaneByPointNormal(e,t);return this.#t(n)}createPlaneByLineAngle(e,t=""){let n=x.createPlaneByLineAngle(e,t);this.#e(n)}async createPlaneByLineAngleIncrement(e,t=""){let n=x.createPlaneByLineAngle(e,t);return this.#t(n)}createPointByArcPoint(e,t=""){let n=x.createPointByArcPoint(e,t);this.#e(n)}async createPointByArcPointIncrement(e,t=""){let n=x.createPointByArcPoint(e,t);return this.#t(n)}createPointByFacePoint(e,t=""){let n=x.createPointByFacePoint(e,t);this.#e(n)}async createPointByFacePointIncrement(e,t=""){let n=x.createPointByFacePoint(e,t);return this.#t(n)}createPointByCrossPoint(e,t=""){let n=x.createPointByCrossPoint(e,t);this.#e(n)}async createPointByCrossPointIncrement(e,t=""){let n=x.createPointByCrossPoint(e,t);return this.#t(n)}createPointByProjectionPoint(e,t=""){let n=x.createPointByProjectionPoint(e,t);this.#e(n)}async createPointByProjectionPointIncrement(e,t=""){let n=x.createPointByProjectionPoint(e,t);return this.#t(n)}createPointByPoint(e,t=""){let n=x.createPointByPoint(e,t);this.#e(n)}async createPointByPointIncrement(e,t=""){let n=x.createPointByPoint(e,t);return this.#t(n)}createPointByCurve(e,t=""){let n=x.createPointByCurve(e,t);this.#e(n)}async createPointByCurveIncrement(e,t=""){let n=x.createPointByCurve(e,t);return this.#t(n)}createCoordinateSystemByThreePoint(e,t=""){let n=x.createCoordinateSystemByThreePoint(e,t);this.#e(n)}async createCoordinateSystemByThreePointIncrement(e,t=""){let n=x.createCoordinateSystemByThreePoint(e,t);return this.#t(n)}createCoordinateSystemByOnePointAndTwoLines(e,t=""){let n=x.createCoordinateSystemByOnePointAndTwoLines(e,t);this.#e(n)}async createCoordinateSystemByOnePointAndTwoLinesIncrement(e,t=""){let n=x.createCoordinateSystemByOnePointAndTwoLines(e,t);return this.#t(n)}createCoordinateSystemByThreePlanes(e,t=""){let n=x.createCoordinateSystemByThreePlanes(e,t);this.#e(n)}async createCoordinateSystemByThreePlanesIncrement(e,t=""){let n=x.createCoordinateSystemByThreePlanes(e,t);return this.#t(n)}createCoordinateSystemByTrendsMatrix(e,t=""){let n=x.createCoordinateSystemByTrendsMatrix(e,t);this.#e(n)}async createCoordinateSystemByTrendsMatrixIncrement(e,t=""){let n=x.createCoordinateSystemByTrendsMatrix(e,t);return this.#t(n)}createCoordinateSystemByOffset(e,t=""){let n=x.createCoordinateSystemByOffset(e,t);this.#e(n)}async createCoordinateSystemByOffsetIncrement(e,t=""){let n=x.createCoordinateSystemByOffset(e,t);return this.#t(n)}createCoordinateSystemByPointAndView(e,t=""){let n=x.createCoordinateSystemByPointAndView(e,t);this.#e(n)}async createCoordinateSystemByPointAndViewIncrement(e,t=""){let n=x.createCoordinateSystemByPointAndView(e,t);return this.#t(n)}}class C{static getEntityVolume(e){if(e)return"Evaluate.getEntityVolume("+(e.entityId??0)+");\n"}static getEntityArea(e){if(e)return"Evaluate.getEntityArea("+(e.entityId??0)+");\n"}static getEntityCentroid(e){if(e)return"Evaluate.getEntityCentroid("+(e.entityId??0)+");\n"}static getEntityMassProperties(e){if(e)return"Evaluate.getEntityMassProperties("+(e.entityId??0)+");\n"}static getInstanceMassProperties(e){if(e)return"Evaluate.getInstanceMassProperties('"+(e.instanceId??"")+"');\n"}static checkCollision(e){if(e)return"Evaluate.checkCollision("+(m(e.instanceId)??"[]")+","+(e.distance??0)+");\n"}static getMeasureInfo(e){if(e)return"Evaluate.getMeasureInfo("+(m(e.geomId)??"[]")+","+(m(e.instanceId)??"[]")+");\n"}static getBoundingBox(e){if(e)return"Evaluate.getBoundingBox({\n  boundType: "+(e.boundType??0)+",\n  entityIds: "+(m(e.entityIds)??"[]")+",\n  instanceIds: "+(m(e.instanceIds)??"[]")+",\n  defPlaneId: "+(e.defPlaneId??0)+",\n  defPlaneInstanceId: '"+(e.defPlaneInstanceId??"")+"',\n  includeHide: "+(e.includeHide??0)+",\n  includeSurface: "+(e.includeSurface??0)+",\n  includeComp: "+(e.includeComp??0)+",\n});"}}class w{constructor(e){this.parent=e}#e(e){e&&(this.parent.commandScript+=e)}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}async getEntityVolumeIncrement(e){let t=C.getEntityVolume(e);return this.#t(t)}async getEntityAreaIncrement(e){let t=C.getEntityArea(e);return this.#t(t)}async getEntityCentroidIncrement(e){let t=C.getEntityCentroid(e);return this.#t(t)}async getEntityMassPropertiesIncrement(e){let t=C.getEntityMassProperties(e);return this.#t(t)}async getInstanceMassPropertiesIncrement(e){let t=C.getInstanceMassProperties(e);return this.#t(t)}async checkCollisionIncrement(e){let t=C.checkCollision(e);return this.#t(t)}async getMeasureInfoIncrement(e){let t=C.getMeasureInfo(e);return this.#t(t)}async getBoundingBoxIncrement(e){let t=C.getBoundingBox(e);return this.#t(t)}}class _{static extrudeSurface(e,t=""){if(e)return"Surface.extrudeSurface('"+t+"',{\n  curveIds:"+(m(e.curveIds)??"[]")+",\n  reverse:"+(e.reverse??0)+",\n  directionType:"+(e.directionType??0)+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  extrudeType1:"+(e.extrudeType1??0)+",\n  height1:"+(e.height1??10)+",\n  toSurface1:"+(e.toSurface1??0)+",\n  draftType1:"+(e.draftType1??-1)+",\n  angle1:"+(e.angle1??0)+",\n  extrudeType2:"+(e.extrudeType2??-1)+",\n  height2:"+(e.height2??0)+",\n  toSurface2:"+(e.toSurface2??0)+",\n  draftType2:"+(e.draftType2??-1)+",\n  angle2:"+(e.angle2??0)+",\n  offsetType:"+(e.offsetType??-1)+",\n  distance:"+(e.distance??0)+",\n  reverseOffset:"+(e.reverseOffset??0)+",\n});\n"}static revolveSurface(e,t=""){if(e)return"Surface.revolveSurface('"+t+"',{\n  contours:"+(m(e.contours)??"[]")+",\n  axis:"+(e.axis?.toScript()??"new Axis()")+",\n  reverse:"+(e.reverse??0)+",\n  revolveType1:"+(e.revolveType1??0)+",\n  angle1:"+(e.angle1??120)+",\n  ToSurface1:"+(e.ToSurface1??0)+",\n  revolveType2:"+(e.revolveType2??-1)+",\n  angle2:"+(e.angle2??120)+",\n  ToSurface2:"+(e.ToSurface2??0)+",\n});\n"}static offsetSurface(e,t=""){if(e)return"Surface.offsetSurface('"+t+"',{\n  surfaceIds:"+(m(e.surfaceIds)??"[]")+",\n  distance:"+(e.distance??10)+",\n  modeType:"+(e.modeType??0)+",\n  reverse:"+(e.reverse??0)+",\n});\n"}static sweepSurface(e,t=""){if(e)return"Surface.sweepSurface('"+t+"',{\n  sweepType:"+(e.sweepType??0)+",\n  sweepProfile:"+(e.sweepProfile??0)+",\n  sweepPath:"+(m(e.sweepPath)??"[]")+",\n  profileDirection:"+(e.profileDirection??2)+",\n  sweepDirection:"+(e.sweepDirection??0)+",\n  diameter:"+(e.diameter??0)+",\n});\n"}static deleteSurface(e,t=""){if(e)return"Surface.deleteSurface('"+t+"', "+(m(e.surfaceIds)??"[]")+");\n"}static planeSurface(e,t=""){if(e)return"Surface.planeSurface('"+t+"', "+(m(e.boundingEntities)??"[]")+");\n"}static trimSurface(e,t=""){if(e)return"Surface.trimSurface('"+t+"',{\n  limitIds:"+(m(e.limitIds)??"[]")+",\n  surfaceIds:"+(m(e.surfaceIds)??"[]")+",\n  keepMode:"+(e.keepMode??0)+",\n  keepTags:"+(m(e.keepTags)??"[]")+",\n  oldSurfaceIds:"+(m(e.oldSurfaceIds)??"[]")+",\n  newSurfaceIds:"+(m(e.newSurfaceIds)??"[]")+",\n});\n"}static extendSurface(e,t=""){if(e)return"Surface.extendSurface('"+t+"',{\n  extendType:"+(e.extendType??0)+",\n  extendSrfIds:"+(m(e.extendSrfIds)??"[]")+",\n  U0:"+(e.U0??0)+",\n  U1:"+(e.U1??1)+",\n  V0:"+(e.V0??0)+",\n  V1:"+(e.V1??1)+",\n  extendBoundIds:"+(m(e.extendBoundIds)??"[]")+",\n  length:"+(e.length??10)+",\n});\n"}static fillSurface(e,t=""){if(e)return"Surface.fillSurface('"+t+"',{\n  boundaryCurveIds:"+(m(e.boundaryCurveIds)??"[]")+",\n  alternateFace:"+(e.alternateFace??0)+",\n  reverseSurface:"+(e.reverseSurface??0)+",\n});\n"}static boundarySurface(e,t=""){if(e)return"Surface.boundarySurface('"+t+"',{\n  selectMode:"+(e.selectMode??0)+",\n  primaryCurveIds:"+(m(e.primaryCurveIds)??"[]")+",\n  secondaryCurveIds:"+(m(e.secondaryCurveIds)??"[]")+",\n});\n"}static loftSurface(e,t=""){if(e)return"Surface.loftSurface('"+t+"',{\n  profiles:"+(m(e.profiles)??"[]")+",\n  hasGuideCurve:"+(e.hasGuideCurve??0)+",\n  guideCurves:"+(m(e.guideCurves)??"[]")+",\n});\n"}static knitSurface(e,t=""){if(e)return"Surface.knitSurface('"+t+"',{\n  surfaces:"+(m(e.surfaces)??"[]")+",\n  controlGap:"+(e.controlGap??0)+",\n  tolerance:"+(e.tolerance??.001)+",\n});\n"}static ruledSurface(e,t=""){if(e)return"Surface.ruledSurface('"+t+"',{\n  edgeCurveIds:"+(m(e.edgeCurveIds)??"[]")+",\n  alternateFaces:"+(m(e.alternateFaces)??"[]")+",\n  ruledSurfaceType:"+(e.ruledSurfaceType??0)+",\n  distance:"+(e.distance??50)+",\n  trimAndKnit:"+(e.trimAndKnit??1)+",\n  connectingSurface:"+(e.connectingSurface??1)+",\n  direction:"+(e.direction?.toScript()??"new Direction()")+",\n  angle:"+(e.angle??1)+",\n  coordinateInput:"+(e.coordinateInput?.toScript()??"new Point()")+",\n  scanType:"+(e.scanType??0)+",\n});\n"}static radiateSurface(e,t=""){if(e)return"Surface.radiateSurface('"+t+"',{\n  directionFaceId:"+(e.directionFaceId??0)+",\n  radiateLines:"+(m(e.radiateLines)??"[]")+",\n  length:"+(e.length??10)+",\n  reverse:"+(e.reverse??0)+",\n  extend:"+(e.extend??0)+",\n});\n"}}class T{constructor(e){this.parent=e}#e(e){e&&(this.parent.commandScript+=e)}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}extrudeSurface(e,t=""){let n=_.extrudeSurface(e,t);this.#e(n)}async extrudeSurfaceIncrement(e,t=""){let n=_.extrudeSurface(e,t);return this.#t(n)}revolveSurface(e,t=""){let n=_.revolveSurface(e,t);this.#e(n)}async revolveSurfaceIncrement(e,t=""){let n=_.revolveSurface(e,t);return this.#t(n)}offsetSurface(e,t=""){let n=_.offsetSurface(e,t);this.#e(n)}async offsetSurfaceIncrement(e,t=""){let n=_.offsetSurface(e,t);return this.#t(n)}sweepSurface(e,t=""){let n=_.sweepSurface(e,t);this.#e(n)}async sweepSurfaceIncrement(e,t=""){let n=_.sweepSurface(e,t);return this.#t(n)}deleteSurface(e,t=""){let n=_.deleteSurface(e,t);this.#e(n)}async deleteSurfaceIncrement(e,t=""){let n=_.deleteSurface(e,t);return this.#t(n)}planeSurface(e,t=""){let n=_.planeSurface(e,t);this.#e(n)}async planeSurfaceIncrement(e,t=""){let n=_.planeSurface(e,t);return this.#t(n)}trimSurface(e,t=""){let n=_.trimSurface(e,t);this.#e(n)}async trimSurfaceIncrement(e,t=""){let n=_.trimSurface(e,t);return this.#t(n)}extendSurface(e,t=""){let n=_.extendSurface(e,t);this.#e(n)}async extendSurfaceIncrement(e,t=""){let n=_.extendSurface(e,t);return this.#t(n)}fillSurface(e,t=""){let n=_.fillSurface(e,t);this.#e(n)}async fillSurfaceIncrement(e,t=""){let n=_.fillSurface(e,t);return this.#t(n)}boundarySurface(e,t=""){let n=_.boundarySurface(e,t);this.#e(n)}async boundarySurfaceIncrement(e,t=""){let n=_.boundarySurface(e,t);return this.#t(n)}loftSurface(e,t=""){let n=_.loftSurface(e,t);this.#e(n)}async loftSurfaceIncrement(e,t=""){let n=_.loftSurface(e,t);return this.#t(n)}knitSurface(e,t=""){let n=_.knitSurface(e,t);this.#e(n)}async knitSurfaceIncrement(e,t=""){let n=_.knitSurface(e,t);return this.#t(n)}ruledSurface(e,t=""){let n=_.ruledSurface(e,t);this.#e(n)}async ruledSurfaceIncrement(e,t=""){let n=_.ruledSurface(e,t);return this.#t(n)}radiateSurface(e,t=""){let n=_.radiateSurface(e,t);this.#e(n)}async radiateSurfaceIncrement(e,t=""){let n=_.radiateSurface(e,t);return this.#t(n)}}class E{static insertComponent(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"Assembly.insertComponent('"+t+"',{\n  docName:'"+(e.docName??"'Part 1'")+"',\n"+(n?"  matrix4:"+(n?"mat":"new Matrix4()")+",\n":"  position:"+(e.position?.toScript()??"new Point()")+",\n")+"  boxCenter:"+(e.boxCenter??0)+",\n  projectId:"+(e.projectId??"''")+",\n});\n"}}static insertParametricPart(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"Assembly.insertParametricPart('"+t+"',{\n  templateName:'"+(e.templateName??"'template 1'")+"',\n  parameters:"+(h(e.parameters)??"{}")+",\n"+(n?"  matrix4:"+(n?"mat":"new Matrix4()")+",\n  position:"+(e.position?.toScript()??"new Point()")+",\n":"  position:"+(e.position?.toScript()??"new Point()")+",\n")+"  boxCenter:"+(e.boxCenter??0)+",\n});\n"}}static insertStandardComponent(e,t=""){return e?"Assembly.insertStandardComponent('"+t+"',{\n  position: "+(e.position?.toScript()??"new Point()")+",\n  boxCenter: "+(e.boxCenter??1)+",\n  standardName: '"+(e.standardName??"standardName 1")+"',\n  categoryName: '"+(e.categoryName??"categoryName 1")+"',\n  className: '"+(e.className??"className 1")+"',\n  componentName: '"+(e.componentName??"componentName 1")+"',\n  optionParams: "+(h(e.optionParams)??"{}")+"\n});":""}static insertComponentFromExecProgram(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"Assembly.insertComponentFromExecProgram('"+t+"',{\n  programName:'"+(e.programName??"'program name'")+"',\n  arguments:"+(h(e.arguments)??"{}")+",\n"+(n?"  matrix4:"+(n?"mat":"new Matrix4()")+",\n  position:"+(e.position?.toScript()??"new Point()")+",\n":"  position:"+(e.position?.toScript()??"new Point()")+",\n")+"  boxCenter:"+(e.boxCenter??0)+",\n});\n"}}static replaceComponent(e){if(e)return"Assembly.replaceComponent('"+(e.instanceId??"")+"','"+(e.docName??"Part 1")+"',"+(e.projectId??"''")+");\n"}static replaceComponentFromExecProgram(e){if(e)return"Assembly.replaceComponentFromExecProgram('"+(e.instanceId??"")+"','"+(e.programName??"programName")+"',"+(h(e.arguments)??"{}")+");\n"}static createMating(e,t=""){if(e)return"Assembly.createMating('"+t+"',{\n  moveInstanceId:'"+(e.moveInstanceId??"0")+"',\n  moveElementId:"+(e.moveElementId??0)+",\n  refInstanceId:'"+(e.refInstanceId??"0")+"',\n  refElementId:"+(e.refElementId??0)+",\n  matingType:"+(e.matingType??0)+",\n  alignType:"+(e.alignType??0)+",\n  offsetValue:"+(e.offsetValue??0)+",\n});\n"}static createGearMating(e,t=""){if(e)return"Assembly.createGearMating('"+t+"',{\n  moveInstanceId:'"+(e.moveInstanceId??"0")+"',\n  moveElementId:"+(e.moveElementId??0)+",\n  refInstanceId:'"+(e.refInstanceId??"0")+"',\n  refElementId:"+(e.refElementId??0)+",\n  gearValue1:"+(e.gearValue1??0)+",\n  gearValue2:"+(e.gearValue2??0)+",\n  reverse:"+(e.reverse??0)+",\n});\n"}static createSlotMating(e,t=""){if(e)return"Assembly.createSlotMating ('"+t+"',{\n  moveInstanceId:'"+(e.moveInstanceId??"0")+"',\n  moveElementId:"+(e.moveElementId??0)+",\n  refInstanceId:'"+(e.refInstanceId??"0")+"',\n  refElementId:"+(e.refElementId??0)+",\n  constraintType:"+(e.constraintType??0)+",\n  offsetValue:"+(e.offsetValue??0)+",\n  reverse:"+(e.reverse??0)+",\n  alignType:"+(e.alignType??0)+",\n});\n"}static linearPattern(e,t=""){if(e){let n="  component:'"+(e.component??"")+"',\n";return e.component instanceof Array&&(n="  component:"+(m(e.component)??"[]")+",\n"),"Assembly.linearPattern('"+t+"',{\n"+n+"  direction1:"+(e.direction1?.toScript()??"new Direction()")+",\n  reverse1:"+(e.reverse1??0)+",\n  spacing1:"+(e.spacing1??10)+",\n  instanceNum1:"+(e.instanceNum1??2)+",\n  hasDirection2:"+(e.hasDirection2??0)+",\n  direction2:"+(e.direction2?.toScript()??"new Direction()")+",\n  reverse2:"+(e.reverse2??0)+",\n  spacing2:"+(e.spacing2??10)+",\n  instanceNum2:"+(e.instanceNum2??0)+",\n  patternSeed:"+(e.patternSeed??0)+",\n  skipInstance:"+(e.skipInstance??0)+",\n  instancesToSkip:"+(m(e.instancesToSkip)??"[]")+",\n});\n"}}static circularPattern(e,t=""){if(e){let n="  component:'"+(e.component??"")+"',\n";return e.component instanceof Array&&(n="  component:"+(m(e.component)??"[]")+",\n"),"Assembly.circularPattern('"+t+"',{\n"+n+"  axis:"+(e.axis?.toScript()??"new Axis()")+",\n  reverse:"+(e.reverse??0)+",\n  angle1:"+(e.angle1??0)+",\n  instanceNum1:"+(e.instanceNum1??2)+",\n  equalSpacing1:"+(e.equalSpacing1??1)+",\n  symmetric:"+(e.symmetric??0)+",\n  hasDirection2:"+(e.hasDirection2??0)+",\n  angle2:"+(e.angle2??120)+",\n  instanceNum2:"+(e.instanceNum2??0)+",\n  equalSpacing2:"+(e.equalSpacing2??0)+",\n  skipInstance:"+(e.skipInstance??0)+",\n  instancesToSkip:"+(m(e.instancesToSkip)??"[]")+",\n});\n"}}static curvePattern(e,t=""){if(e){let n="  component:'"+(e.component??"")+"',\n";return e.component instanceof Array&&(n="  component:"+(m(e.component)??"[]")+",\n"),"Assembly.curvePattern('"+t+"',{\n"+n+"  curves:"+(m(e.curves)??"[]")+",\n  curveInstances:"+(m(e.curveInstances)??"[]")+",\n  reverse:"+(e.reverse??0)+",\n  spacing:"+(e.spacing??0)+",\n  instanceNum:"+(e.instanceNum??2)+",\n  equalSpacing:"+(e.equalSpacing??1)+",\n  curveMethod:"+(e.curveMethod??0)+",\n  alignmentMethod:"+(e.alignmentMethod??0)+",\n  skipInstance:"+(e.skipInstance??0)+",\n  instancesToSkip:"+(m(e.instancesToSkip)??"[]")+",\n});\n"}}static sketchPattern(e,t=""){if(e){let n="  component:'"+(e.component??"")+"',\n";return e.component instanceof Array&&(n="  component:"+(m(e.component)??"[]")+",\n"),"Assembly.sketchPattern('"+t+"',{\n"+n+"  sketchId:"+(e.sketchId??0)+",\n  referenceType:"+(e.referenceType??0)+",\n  referencePoint:"+(e.referencePoint?.toScript()??"new Point()")+",\n});\n"}}static fixInstance(e){if(e)return"Assembly.fixInstance('"+(e.instanceId??"0")+"',"+ +(e.status??0)+");\n"}static moveInstance(e){if(e)return"Assembly.moveInstance({\n  instanceId:"+(m(e.instanceId)??"[]")+",\n  startPos:"+(e.startPos?.toScript()??"new Point()")+",\n  endPos:"+(e.endPos?.toScript()??"new Point()")+",\n  moveType:"+(e.moveType??0)+",\n  checkType:"+(e.checkType??0)+",\n  moveDir:"+(e.moveDir?.toScript()??"new Direction()")+",\n  varX:"+(e.varX??0)+",\n  varY:"+(e.varY??0)+",\n  varZ:"+(e.varZ??0)+",\n  checkRange:"+(m(e.checkRange)??"[]")+",\n});\n"}static rotateInstance(e){if(e)return"Assembly.rotateInstance({\n  instanceId:"+(m(e.instanceId)??"[]")+",\n  rotateType:"+(e.rotateType??0)+",\n  checkType:"+(e.checkType??0)+",\n  axialDir:"+(e.axialDir?.toScript()??"new Point()")+",\n  rotateAxis:"+(e.rotateAxis?.toScript()??"new Axis()")+",\n  angleVal:"+(e.angleVal??0)+",\n  angleValX:"+(e.angleValX??0)+",\n  angleValY:"+(e.angleValY??0)+",\n  angleValZ:"+(e.angleValZ??0)+",\n  checkRange:"+(m(e.checkRange)??"[]")+",\n});\n"}static mirrorInstances(e,t=""){if(e)return"Assembly.mirrorInstances('"+t+"',{\n  instanceId:"+(m(e.instanceId)??"[]")+",\n  mirrorPlaneId:"+(e.mirrorPlaneId??8)+",\n  mirrorPlaneInstanceId:'"+(e.mirrorPlaneInstanceId??"")+"',\n});\n"}static patternDrivePattern(e,t=""){if(e)return"Assembly.patternDrivePattern('"+t+"',{\n  instanceId:"+(m(e.instanceId)??"[]")+",\n  driveFeatureId:"+(e.driveFeatureId??0)+",\n  driveInstance:'"+(e.driveInstance??"")+"',\n  skipInstance:"+(e.skipInstance??0)+",\n  instanceToSkip:"+(m(e.instanceToSkip)??"[]")+",\n  modOriPosition:"+(e.modOriPosition??0)+",\n  orgPositionInsId:'"+(e.orgPositionInsId??"")+"',\n});\n"}}class k{constructor(e){this.parent=e}#e(e){e&&(this.parent.commandScript+=e)}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}insertComponent(e,t=""){let n=E.insertComponent(e,t);this.#e(n)}async insertComponentIncrement(e,t=""){let n=E.insertComponent(e,t);return this.#t(n)}insertParametricPart(e,t=""){let n=E.insertParametricPart(e,t);this.#e(n)}async insertParametricPartIncrement(e,t=""){let n=E.insertParametricPart(e,t);return this.#t(n)}async insertStandardComponentIncrement(e,t=""){let n=E.insertStandardComponent(e,t);return this.#t(n)}insertComponentFromExecProgram(e,t=""){let n=E.insertComponentFromExecProgram(e,t);this.#e(n)}async insertComponentFromExecProgramIncrement(e,t=""){let n=E.insertComponentFromExecProgram(e,t);return this.#t(n)}replaceComponent(e){let t=E.replaceComponent(e);this.#e(t)}async replaceComponentIncrement(e){let t=E.replaceComponent(e);return this.#t(t)}replaceComponentFromExecProgram(e){let t=E.replaceComponentFromExecProgram(e);this.#e(t)}async replaceComponentFromExecProgramIncrement(e){let t=E.replaceComponentFromExecProgram(e);return this.#t(t)}createMating(e,t=""){let n=E.createMating(e,t);this.#e(n)}async createMatingIncrement(e,t=""){let n=E.createMating(e,t);return this.#t(n)}linearPattern(e,t=""){let n=E.linearPattern(e,t);this.#e(n)}async linearPatternIncrement(e,t=""){let n=E.linearPattern(e,t);return this.#t(n)}circularPattern(e,t=""){let n=E.circularPattern(e,t);this.#e(n)}async circularPatternIncrement(e,t=""){let n=E.circularPattern(e,t);return this.#t(n)}curvePattern(e,t=""){let n=E.curvePattern(e,t);this.#e(n)}async curvePatternIncrement(e,t=""){let n=E.curvePattern(e,t);return this.#t(n)}sketchPattern(e,t=""){let n=E.sketchPattern(e,t);this.#e(n)}async sketchPatternIncrement(e,t=""){let n=E.sketchPattern(e,t);return this.#t(n)}fixInstance(e){let t=E.fixInstance(e);this.#e(t)}async fixInstanceIncrement(e){let t=E.fixInstance(e);return this.#t(t)}moveInstance(e){let t=E.moveInstance(e);this.#e(t)}async moveInstanceIncrement(e){let t=E.moveInstance(e);return this.#t(t)}rotateInstance(e){let t=E.rotateInstance(e);this.#e(t)}async rotateInstanceIncrement(e){let t=E.rotateInstance(e);return this.#t(t)}mirrorInstances(e,t=""){let n=E.mirrorInstances(e,t);this.#e(n)}async mirrorInstancesIncrement(e,t=""){let n=E.mirrorInstances(e,t);return this.#t(n)}patternDrivePattern(e,t=""){let n=E.patternDrivePattern(e,t);this.#e(n)}async patternDrivePatternIncrement(e,t=""){let n=E.patternDrivePattern(e,t);return this.#t(n)}}const D={Default:"FontName.Default",KaiTi:"FontName.KaiTi",SimHei:"FontName.SimHei",SimSun:"FontName.SimSun",FangSong:"FontName.FangSong",MicrosoftYaHei:"FontName.MicrosoftYaHei"},A={Vertex:"ElementType.Vertex",Edge:"ElementType.Edge",Face:"ElementType.Face",Point:"ElementType.Point",Curve:"ElementType.Curve",Surface:"ElementType.SURFACE",Dimension:"ElementType.Dimension"},F={Angle:"VariableType.Angle",Length:"VariableType.Length",Number:"VariableType.Number"},B={cm:"VariableUnit.cm",mm:"VariableUnit.mm",m:"VariableUnit.m",Degree:"VariableUnit.degree",Radian:"VariableUnit.radian",Number:"VariableUnit.number"};class N{static setEntityColor(e){if(e)return"Common.setEntityColor("+(e.entityId??0)+",{color:'"+(e.color??"")+"',opacity:'"+(e.opacity??"1")+"',});\n"}static setEntityVisible(e){if(e)return"Common.setEntitiesVisible("+(m(e.entityIds)??"[]")+","+(e.status??0)+");\n"}static setEntityName(e){if(e)return"Common.setEntityName("+(e.entityId??0)+",'"+(e.entityName??"")+"');\n"}static createVariable(e){if(e)return"Common.createVariable('"+e.variableName+"',{  variableValue: "+e.variableValue+",  variableType: "+(e.variableType??F.Length)+",  variableUnit: "+(e.variableUnit??B.mm)+",  description: '"+(e.description??"")+"',});\n"}static assignVariable(e){if(e)return"Common.assignVariable('"+e.variableName+"',{  variableValue: "+e.variableValue+",  variableType: "+(e.variableType??F.Length)+",  variableUnit: "+(e.variableUnit??B.mm)+",  description: '"+(e.description??"")+"',});\n"}static deleteVariable(e){if(e)return"Common.deleteVariable('"+e.variableName+"');\n"}static setDocAppearance(e){if(e)return"Common.setDocAppearance({\n  color: '"+(e.color??"#BBBBBB")+"',\n  opacity: "+(e.opacity??1)+",\n});\n"}static clearDocAppearance(){return"Common.clearDocAppearance();\n"}static setAppearance(e){if(e)return"Common.setAppearance({\n  ids: "+(m(e.ids)??"[]")+",\n  instanceIds: "+(m(e.instanceIds)??"[]")+",\n  color: '"+(e.color??"#BBBBBB")+"',\n  opacity: "+(e.opacity??1)+",\n});"}static clearAppearance(e){if(e)return"Common.clearAppearance({\n  ids: "+(m(e.ids)??"[]")+",\n  instanceIds: "+(m(e.instanceIds)??"[]")+",\n});\n"}static deleteEntity(e){if(e)return"Common.deleteEntity({\n  ids: "+(m(e.ids)??"[]")+",\n});\n"}static deleteFeature(e){if(e)return"Common.deleteFeature({\n  featureIds: "+(m(e.featureIds)??"[]")+",\n});\n"}}class M{constructor(e){this.parent=e}#e(e){e&&(this.parent.commandScript+=e)}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}setEntityColor(e){let t=N.setEntityColor(e);this.#e(t)}async setEntityColorIncrement(e){let t=N.setEntityColor(e);return this.#t(t)}setEntityVisible(e){let t=N.setEntityVisible(e);this.#e(t)}async setEntityVisibleIncrement(e){let t=N.setEntityVisible(e);return this.#t(t)}setEntityName(e){let t=N.setEntityName(e);this.#e(t)}async setEntityNameIncrement(e){let t=N.setEntityName(e);return this.#t(t)}createVariable(e){let t=N.createVariable(e);this.#e(t)}async createVariableIncrement(e){let t=N.createVariable(e);return this.#t(t)}assignVariable(e){let t=N.assignVariable(e);this.#e(t)}async assignVariableIncrement(e){let t=N.assignVariable(e);return this.#t(t)}deleteVariable(e){let t=N.deleteVariable(e);this.#e(t)}async deleteVariableIncrement(e){let t=N.deleteVariable(e);return this.#t(t)}setDocAppearance(e){let t=N.setDocAppearance(e);this.#e(t)}async setDocAppearanceIncrement(e){let t=N.setDocAppearance(e);return this.#t(t)}clearDocAppearance(){let e=N.clearDocAppearance();this.#e(e)}async clearDocAppearanceIncrement(){let e=N.clearDocAppearance();return this.#t(e)}setAppearance(e){let t=N.setAppearance(e);this.#e(t)}async setAppearanceIncrement(e){let t=N.setAppearance(e);return this.#t(t)}clearAppearance(e){let t=N.clearAppearance(e);this.#e(t)}async clearAppearanceIncrement(e){let t=N.clearAppearance(e);return this.#t(t)}async deleteEntityIncrement(e){let t=N.deleteEntity(e);return this.#t(t)}async deleteFeatureIncrement(e){let t=N.deleteFeature(e);return this.#t(t)}}class R{static createLabel(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"MBD.createLabel('"+t+"',{\n  elementId: "+(e.elementId??0)+",\n  startPoint: "+(e.startPoint?.toScript()??"new Point()")+",\n  leaderPoint: "+(m(e.leaderPoint)??"[]")+",\n  text: '"+(e.text??"")+"',\n  frameType: "+(e.frameType??1)+",\n  fontName: "+(e.fontName??D.Default)+",\n  fontSize: "+(e.fontSize??3.5)+",\n  leaderLineType: "+(e.leaderLineType??1)+",\n  leaderLineWidth: "+(e.leaderLineWidth??0)+",\n  fontItalic: "+(e.fontItalic??0)+",\n  fontBold: "+(e.fontBold??0)+",\n  matrix: "+(n?"mat":"new Matrix4()")+",\n});\n"}}static createDatum(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"MBD.createDatum('"+t+"',{\n  elementId: "+(e.elementId??0)+",\n  startPoint: "+(e.startPoint?.toScript()??"new Point()")+",\n  leaderPoint: "+(m(e.leaderPoint)??"[]")+",\n  datumLab: '"+(e.datumLab??"")+"',\n  frameType: "+(e.frameType??1)+",\n  fontName: "+(e.fontName??D.Default)+",\n  fontSize: "+(e.fontSize??3.5)+",\n  leaderLineType: "+(e.leaderLineType??1)+",\n  leaderLineWidth: "+(e.leaderLineWidth??0)+",\n  fontItalic: "+(e.fontItalic??0)+",\n  fontBold: "+(e.fontBold??0)+",\n  matrix: "+(n?"mat":"new Matrix4()")+",\n});\n"}}static createDatumTarget(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"MBD.createDatumTarget('"+t+"',{\n  elementId: "+(e.elementId??0)+",\n  startPoint: "+(e.startPoint?.toScript()??"new Point()")+",\n  leaderPoint: "+(m(e.leaderPoint)??"[]")+",\n  datumReference: '"+(e.datumReference??"")+"',\n  areaType: "+(e.areaType??0)+",\n  areaTxt: '"+(e.areaTxt??"")+"',\n  fontName: "+(e.fontName??D.Default)+",\n  fontSize: "+(e.fontSize??3.5)+",\n  leaderLineType: "+(e.leaderLineType??1)+",\n  leaderLineWidth: "+(e.leaderLineWidth??0)+",\n  fontItalic: "+(e.fontItalic??0)+",\n  fontBold: "+(e.fontBold??0)+",\n  matrix: "+(n?"mat":"new Matrix4()")+",\n});\n"}}static createWeldSymbol(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"MBD.createWeldSymbol('"+t+"',{\n  elementId: "+(e.elementId??0)+",\n  pickPoint: "+(e.pickPoint?.toScript()??"new Point()")+",\n  leaderPoints: "+(m(e.leaderPoints)??"[]")+",\n  topField: "+(e.topField??!1)+",\n  peripheral: "+(e.peripheral??!1)+",\n  bottomField: "+(e.bottomField??!1)+",\n  symmetric: "+(e.symmetric??!1)+",\n  stagger: "+(e.stagger??!1)+",\n  identificationLineOnTop: "+(e.identificationLineOnTop??!1)+",\n  reference: "+(e.reference??!1)+",\n  topSecondFillet: "+(e.topSecondFillet??!1)+",\n  topSecondFilletText1: '"+(e.topSecondFilletText1??"")+"',\n  topSecondFilletText2: '"+(e.topSecondFilletText2??"")+"',\n  bottomSecondFillet: "+(e.bottomSecondFillet??!1)+",\n  bottomSecondFilletText1: '"+(e.bottomSecondFilletText1??"")+"',\n  bottomSecondFilletText2: '"+(e.bottomSecondFilletText2??"")+"',\n  topWeld: "+(e.topWeld??0)+",\n  topWeldText1: '"+(e.topWeldText1??"")+"',\n  topWeldText2: '"+(e.topWeldText2??"")+"',\n  topEdgeProfile: "+(e.topEdgeProfile??0)+",\n  bottomWeld: "+(e.bottomWeld??0)+",\n  bottomWeldText1: '"+(e.bottomWeldText1??"")+"',\n  bottomWeldText2: '"+(e.bottomWeldText2??"")+"',\n  bottomEdgeProfile: "+(e.bottomEdgeProfile??0)+",\n  topInterlacedDiscontinuitiesText: '"+(e.topInterlacedDiscontinuitiesText??"")+"',\n  bottomInterlacedDiscontinuitiesText: '"+(e.bottomInterlacedDiscontinuitiesText??"")+"',\n  tailRemarks: '"+(e.tailRemarks??"")+"',\n  fontName: "+(e.fontName??D.Default)+",\n  fontSize: "+(e.fontSize??3.5)+",\n  leaderLineType: "+(e.leaderLineType??1)+",\n  leaderLineWidth: "+(e.leaderLineWidth??0)+",\n  fontItalic: "+(e.fontItalic??0)+",\n  fontBold: "+(e.fontBold??0)+",\n  matrix: "+(n?"mat":"new Matrix4()")+",\n});\n"}}static createSizeDimension(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"MBD.createSizeDimension('"+t+"',{\n  elementId: "+(e.elementId??0)+",\n  pickPoint: "+(e.pickPoint?.toScript()??"new Point()")+",\n  dimPosition: "+(e.dimPosition?.toScript()??"new Point()")+",\n  tolPrecisionType: "+(e.tolPrecisionType??0)+",\n  tolPrecision1: "+(e.tolPrecision1??2)+",\n  maxVariable: "+(e.maxVariable??0)+",\n  minVariable: "+(e.minVariable??0)+",\n  isReference: "+(e.isReference??0)+",\n  referenceValue: '"+(e.referenceValue??0)+"',\n  tolPrecision2: "+(e.tolPrecision2??0)+",\n  fontName: "+(e.fontName??D.Default)+",\n  fontSize: "+(e.fontSize??3.5)+",\n  leaderLineType: "+(e.leaderLineType??1)+",\n  leaderLineWidth: "+(e.leaderLineWidth??0)+",\n  fontItalic: "+(e.fontItalic??0)+",\n  fontBold: "+(e.fontBold??0)+",\n  matrix: "+(n?"mat":"new Matrix4()")+",\n});"}}static createPositionDimension(e,t=""){if(e){let n=16===e.matrix4?.elements?.length,r="";return n&&(r="var mat = new Matrix4();\nmat.set("+e.matrix4.elements+");\n"),r+"MBD.createPositionDimension('"+t+"',{\n  firstElementId: "+(e.firstElementId??0)+",\n  firstPickPoint: "+(e.firstPickPoint?.toScript()??"new Point()")+",\n  secondElementId: "+(e.secondElementId??0)+",\n  secondPickPoint: "+(e.secondPickPoint?.toScript()??"new Point()")+",\n  dimPosition: "+(e.dimPosition?.toScript()??"new Point()")+",\n  tolPrecisionType: "+(e.tolPrecisionType??0)+",\n  tolPrecision1: "+(e.tolPrecision1??2)+",\n  maxVariable: "+(e.maxVariable??0)+",\n  minVariable: "+(e.minVariable??0)+",\n  isReference: "+(e.isReference??0)+",\n  referenceValue: '"+(e.referenceValue??0)+"',\n  tolPrecision2: "+(e.tolPrecision2??0)+",\n  fontName: "+(e.fontName??D.Default)+",\n  fontSize: "+(e.fontSize??3.5)+",\n  leaderLineType: "+(e.leaderLineType??1)+",\n  leaderLineWidth: "+(e.leaderLineWidth??0)+",\n  fontItalic: "+(e.fontItalic??0)+",\n  fontBold: "+(e.fontBold??0)+",\n  matrix: "+(n?"mat":"new Matrix4()")+",\n});"}}}class L{constructor(e){this.parent=e}#e(e){e&&(this.parent.commandScript+=e)}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}createLabel(e,t=""){let n=R.createLabel(e,t);this.#e(n)}async createLabelIncrement(e,t=""){let n=R.createLabel(e,t);return this.#t(n)}createDatum(e,t=""){let n=R.createDatum(e,t);this.#e(n)}async createDatumIncrement(e,t=""){let n=R.createDatum(e,t);return this.#t(n)}createDatumTarget(e,t=""){let n=R.createDatumTarget(e,t);this.#e(n)}async createDatumTargetIncrement(e,t=""){let n=R.createDatumTarget(e,t);return this.#t(n)}createWeldSymbol(e,t=""){let n=R.createWeldSymbol(e,t);this.#e(n)}async createWeldSymbolIncrement(e,t=""){let n=R.createWeldSymbol(e,t);return this.#t(n)}createSizeDimension(e,t=""){let n=R.createSizeDimension(e,t);this.#e(n)}async createSizeDimensionIncrement(e,t=""){let n=R.createSizeDimension(e,t);return this.#t(n)}createPositionDimension(e,t=""){let n=R.createPositionDimension(e,t);this.#e(n)}async createPositionDimensionIncrement(e,t=""){let n=R.createPositionDimension(e,t);return this.#t(n)}}class O{static getElementIdsByElementType(e){if(e)return"Query.getElementIdsByElementType("+(e.entityId??0)+","+(e.elementType??A.Edge)+",'"+(e.instanceId??"")+"');\n"}static getElementIdsByVertexId(e){if(e)return"Query.getElementIdsByVertexId("+(e.entityId??0)+","+(e.vertexId??0)+","+(e.elementType??A.Face)+",'"+(e.instanceId??"")+"');\n"}static getBoundedFaceIdsByFaceOrEdge(e){if(e)return"Query.getBoundedFaceIdsByFaceOrEdge("+(e.elementId??0)+",'"+(e.instanceId??"")+"');\n"}static getPointNormalOnFace(e){if(e)return"Query.getPointNormalOnFace("+(e.point?.toScript()??"new Point()")+","+(e.elementId??0)+",'"+(e.instanceId??"")+"');\n"}}class z{constructor(e){this.parent=e}async#t(e,t=s.GENERAL_COMMAND,n={}){return this.parent.executeIncrementCommand(e,t,n)}async getElementIdsByElementTypeIncrement(e){let t=O.getElementIdsByElementType(e);return this.#t(t)}async getElementIdsByVertexIdIncrement(e){let t=O.getElementIdsByVertexId(e);return this.#t(t)}async getBoundedFaceIdsByFaceOrEdgeIncrement(e){let t=O.getBoundedFaceIdsByFaceOrEdge(e);return this.#t(t)}async getPointNormalOnFaceIncrement(e){let t=O.getPointNormalOnFace(e);return this.#t(t)}}const V={PART:"PartDocument",ASSEMBLY:"AssemblyDocument",DRAWING3D:"Drawing3dDocument",FOLDER:"FolderDocument"},j={GB_PART:"GB_PART",GB_ASSEMBLY:"GB_ASSEMBLY",GB_A0:"GB_A0",GB_A1:"GB_A1",GB_A2:"GB_A2",GB_A3:"GB_A3",GB_A4:"GB_A4",GB_A4_PORTRAIT:"GB_A4_Portrait"};class Y{constructor(e){this.parent=e,this.commandScript="",this.sketch=new v(this),this.solid=new S(this),this.curve=new P(this),this.datum=new b(this),this.evaluate=new w(this),this.surface=new T(this),this.assembly=new k(this),this.common=new M(this),this.mbd=new L(this),this.query=new z(this)}clearCommand(){this.commandScript=""}getCommandScript(){return this.commandScript}async execute(e=!1,n=""){return new Promise((r,i)=>{let a=t.EXECUTE_COMMAND,o=Math.floor(16777216*Math.random());this.parent.messageList.push({key:o,name:a,resolve:r,reject:i}),window.parent.postMessage({type:t.EXECUTE_COMMAND,value:{key:o,script:""===n?this.commandScript:n,overwrite:e}},this.parent.parentOrigin)})}async executeIncrementCommand(e="",n,r={}){return new Promise((i,a)=>{let o=t.EXECUTE_INCREMENT_COMMAND,c=Math.floor(16777216*Math.random());this.parent.messageList.push({key:c,name:o,resolve:i,reject:a}),window.parent.postMessage({type:t.EXECUTE_INCREMENT_COMMAND,value:{key:c,script:e,commandType:n,params:r}},this.parent.parentOrigin)})}async executeInSpecifiedDoc(e,n,r,i=!1,a=""){return new Promise((o,c)=>{let s=t.EXECUTE_IN_SPECIFIED_DOC,l=Math.floor(16777216*Math.random());this.parent.messageList.push({key:l,name:s,resolve:o,reject:c}),window.parent.postMessage({type:t.EXECUTE_IN_SPECIFIED_DOC,value:{key:l,script:""===a?this.commandScript:a,overwrite:i,projectId:e,documentId:n,versionId:r}},this.parent.parentOrigin)})}async createDocument(e,t,n,r,i){return await this.parent.request.execFunction(o.CREATE_DOCUMENT,{projectId:e,folderCode:t,docName:n,documentType:r,template:i})}}class ${constructor(e){this.parent=e}subscribeEvent(e,n){let r=Math.floor(16777216*Math.random());return this.parent.messageList.push({key:r,name:e,callback:n}),window.parent.postMessage({type:t.SUBSCRIBE,value:{key:r,eventName:e}},this.parent.parentOrigin),r}unSubscribeEvent(e,n){this.parent.messageList.filter(t=>t.name===e&&t.key===n).forEach(e=>{this.parent.messageList.splice(this.parent.messageList.indexOf(e),1)}),window.parent.postMessage({type:t.UNSUBSCRIBE,value:{subscribeId:n,eventName:e}},this.parent.parentOrigin)}async execFunction(e,n){return new Promise((r,i)=>{let a=Math.floor(16777216*Math.random());this.parent.messageList.push({key:a,name:e,params:n,resolve:r,reject:i}),window.parent.postMessage({type:t.CALL_FUNCTION,value:{key:a,functionName:e,params:n}},this.parent.parentOrigin)})}}class q{constructor(e){this.parent=e}async getElementsByIds(e){return this.parent.request.execFunction(n.BY_IDS,{elementIds:e})}async getElementsByFeatureId(e){return this.parent.request.execFunction(n.BY_FEATURE_ID,{featureId:e})}async getElementsByEntityId(e){return this.parent.request.execFunction(n.BY_ENTITY_ID,{entityId:e})}async getEntitiesByIds(e){return this.parent.request.execFunction(r.BY_IDS,{entityIds:e})}async getEntities(){return this.parent.request.execFunction(r.ALL,{})}async getEntitiesByFeatureIds(e){return this.parent.request.execFunction(r.BY_FEATURE_IDS,{featureIds:e})}async getFeatures(e){return this.parent.request.execFunction(i.BY_IDS,{featureIds:e})}async getFeaturesByNames(e){return this.parent.request.execFunction(i.BY_NAMES,{featureNames:e})}async getInstancesByIds(e){return this.parent.request.execFunction(a.BY_IDS,{instanceIds:e})}async getTopInstance(e){return this.parent.request.execFunction(a.TOP_INSTANCE,{instanceId:e})}async getElementInAssembly(e,t){return this.parent.request.execFunction(n.IN_ASSEMBLY,{instanceId:e,elementId:t})}async getEntityInAssembly(e,t){return this.parent.request.execFunction(r.IN_ASSEMBLY,{instanceId:e,entityId:t})}async getEntitiesByInstanceId(e){return this.parent.request.execFunction(r.BY_INSTANCE_ID,{instanceId:e})}async getElementsByInstanceId(e){return this.parent.request.execFunction(n.BY_INSTANCE_ID,{instanceId:e})}async getEntitiesByFeatureNames(e){return this.parent.request.execFunction(r.BY_FEATURE_NAMES,{featureNames:e})}async getElementsByFeatureNames(e){return this.parent.request.execFunction(n.BY_FEATURE_NAMES,{featureNames:e})}async getInstanceTree(){return this.parent.request.execFunction(a.INSTANCE_TREE,{})}}class G{constructor(e){this.parent=e}subscribeElementPickEvent(e){return this.parent.request.subscribeEvent(c.ELEMENT_PICK,e)}unSubscribeElementPickEvent(e){this.parent.request.unSubscribeEvent(c.ELEMENT_PICK,e)}subscribeFeaturePickEvent(e){return this.parent.request.subscribeEvent(c.FEATURE_PICK,e)}unSubscribeFeaturePickEvent(e){this.parent.request.unSubscribeEvent(c.FEATURE_PICK,e)}messageTip(e){this.parent.request.execFunction(o.MESSAGE_TIP,e)}async addHeightElement(e){return this.parent.request.execFunction(o.ADD_HIGHLIGHT_ELEMENT,{ids:e})}async removeHeightElement(e){return this.parent.request.execFunction(o.REMOVE_HIGHLIGHT_ELEMENT,{ids:e})}async clearPreview(){return this.parent.request.execFunction(o.CLEAR_PREVIEW,{})}async clearSelection(){return this.parent.request.execFunction(o.CLEAR_SELECTION,{})}async setSelectType(e){return this.parent.request.execFunction(o.SET_SELECT_TYPE,{elementTypes:e})}async resetSelectType(){return this.parent.request.execFunction(o.RESET_SELECT_TYPE,{})}async getSupportSelectType(){return this.parent.request.execFunction(o.GET_SUPPORT_SELECT_TYPE,{})}}class U{constructor(){this.maxAttemptNumber=5,this.parentOrigin="https://cad.crowncad.com/",this.command=null,this.query=null,this.event=null,this.messageList=[]}setParentOrigin(e){this.parentOrigin=e}setMaxAttempt(e){this.maxAttemptNumber=e}setLayout(e,t,n){this.layout={maxWidth:e,minWidth:t,maxHeight:n}}async connect(){let e,n=0;return new Promise((r,i)=>{const a=n=>{if(n.origin===this.parentOrigin){if(n.data.type===t.INIT){clearInterval(e),window.removeEventListener("message",a,!1),this.parentOrigin=n.origin,this.request=new $(this),this.command=new Y(this),this.query=new q(this),this.event=new G(this),this.listener=e=>{if(e.data.type===t.CALLBACK){const t=e.data.key;e.data.name;const n=e.data.response.code,r=e.data.response.data;this.messageList.filter(e=>e.key===t).forEach(e=>{e?.resolve?(e.resolve({code:n,data:r}),this.messageList.splice(this.messageList.indexOf(e),1)):e?.callback&&e.callback(r)})}else e.data.type===t.DESTROYED&&this.destroyed()},window.addEventListener("message",this.listener,!1);let i=n.data.initInfo;return r(i)}return i("Failed handshake")}};window.addEventListener("message",a,!1);const o=()=>{if(n++,window.parent.postMessage({type:t.INIT,value:{layout:this.layout}},this.parentOrigin),n===this.maxAttemptNumber)return clearInterval(e),i("Failed handshake")};o(),e=setInterval(o,500)})}destroyed(){window.removeEventListener("message",this.listener,!1),this.listener=null,this.parentOrigin="https://cad.crowncad.com/",this.command=null,this.request=null,this.query=null,this.event=null,this.messageList=[]}}e.Axis=l,e.ConstraintType=f,e.CrownCADPlugin=U,e.DefaultTemplate=j,e.Direction=d,e.DocumentType=V,e.Matrix4=p,e.Point=u,e.ScriptElementType=A,e.ScriptFontNameType=D,e.ScriptVariableType=F,e.ScriptVariableUnit=B,Object.defineProperty(e,"__esModule",{value:!0})}(t)},188:(e,t,n)=>{var r=n(773);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);(0,n(534).A)("56340578",r,!1,{})},208:(e,t,n)=>{(t=n(314)(!1)).push([e.id,"\n.el-row[data-v-41b4b2fb] {\r\n  display: flex;\n}\n[data-v-41b4b2fb] .el-input {\r\n  width: 100px;\n}\n.meshType[data-v-41b4b2fb] .el-input {\r\n  width: 320px;\n}\r\n",""]),e.exports=t},219:(e,t,n)=>{(t=n(314)(!1)).push([e.id,"\n.el-form-item[data-v-954bc2c8] {\n  margin-bottom: 15px;\n}\n",""]),e.exports=t},255:(e,t,n)=>{var r=n(208);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);(0,n(534).A)("ff5d6e8c",r,!1,{})},406:(e,t,n)=>{var r=n(659);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);(0,n(534).A)("7a79a98f",r,!1,{})},470:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>rt});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%",width:"100%"}},[n("el-tabs",{model:{value:e.activeDocumentType,callback:function(t){e.activeDocumentType=t},expression:"activeDocumentType"}},[n("el-tab-pane",{attrs:{label:"零件",name:"PartDocument",disabled:"PartDocument"!==e.activeDocumentType}}),e._v(" "),n("el-tab-pane",{attrs:{label:"装配",name:"AssemblyDocument",disabled:"AssemblyDocument"!==e.activeDocumentType}}),e._v(" "),n("el-tab-pane",{attrs:{label:"点云重建",name:"PointCloudDocument",disabled:"PointCloudDocument"!==e.activeDocumentType}})],1),e._v(" "),[n(e.currentPane,{tag:"component"})]],2)};r._withStripped=!0;var i=n(152);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"connect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=new i.CrownCADPlugin;n.setParentOrigin("https://cad.crowncad.com"),n.setMaxAttempt(5),n.setLayout(500,600,500),n.connect().then(function(r){e.command=n.command,e.request=n.request,e.query=n.query,e.event=n.event,t(r)})}}],t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),l=new s;function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}const m=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"infoTip",value:function(e){l.event.messageTip({type:"info",description:e,duration:1.5,closeBtn:!0})}},{key:"successTip",value:function(e){l.event.messageTip({type:"success",description:e,duration:1.5,closeBtn:!0})}},{key:"warningTip",value:function(e){l.event.messageTip({type:"error",description:e,duration:1.5,closeBtn:!0})}},{key:"errorTip",value:function(e){l.event.messageTip({type:"error",description:e,duration:1.5,closeBtn:!0})}}])&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}());function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}const v=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._docType=null},(t=[{key:"docType",get:function(){return this._docType},set:function(e){this._docType=e}}])&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}());var g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex"}},[n("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.activePane,callback:function(t){e.activePane=t},expression:"activePane"}},[n("el-tab-pane",{attrs:{label:"齿轮",name:"gear"}})],1),e._v(" "),n(e.currentPane,{tag:"component"})],1)};g._withStripped=!0;var S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"模型生成中"}},[n("el-form",{attrs:{"label-position":"left",inline:!1,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"啮合类型"}},[n("el-select",{staticClass:"meshType",attrs:{size:"small"},model:{value:e.meshType,callback:function(t){e.meshType=t},expression:"meshType"}},e._l(e.meshTypeOption,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),n("el-form",{staticClass:"el-row",attrs:{"label-position":"left",inline:!1,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"小齿数 z₁"}},[n("el-col",[n("el-input",{attrs:{size:"small"},model:{value:e.z1,callback:function(t){e.z1=t},expression:"z1"}})],1)],1)],1),e._v(" "),n("el-form",{staticClass:"el-row",attrs:{"label-position":"left",inline:!1,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"小齿宽 b₁"}},[n("el-input",{attrs:{size:"small"},model:{value:e.b1,callback:function(t){e.b1=t},expression:"b1"}})],1)],1),e._v(" "),n("el-form",{staticClass:"el-row",attrs:{"label-position":"left",inline:!1,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"齿顶高系数 Ha*"}},[n("el-select",{attrs:{size:"small"},model:{value:e.haC,callback:function(t){e.haC=t},expression:"haC"}},e._l(e.haCOptions,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"模数 m"}},[n("el-select",{attrs:{size:"small"},model:{value:e.m,callback:function(t){e.m=t},expression:"m"}},e._l(e.modules,function(t){return n("el-option",{key:t,style:e.modulesPadding(t),attrs:{label:t,value:t}})}),1)],1)],1),e._v(" "),n("el-form",{staticClass:"el-row",attrs:{"label-position":"left",inline:!1,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"顶隙系数 c*"}},[n("el-select",{attrs:{size:"small"},model:{value:e.cC,callback:function(t){e.cC=t},expression:"cC"}},e._l(e.cCOptions,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"压力角 α"}},[n("el-select",{attrs:{size:"small"},model:{value:e.alpha,callback:function(t){e.alpha=t},expression:"alpha"}},e._l(e.alphaOptions,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),n("el-form",{staticClass:"el-row",attrs:{"label-position":"left",inline:!1,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"齿根圆角 ρ"}},[n("el-select",{attrs:{size:"small"},model:{value:e.rho,callback:function(t){e.rho=t},expression:"rho"}},e._l(e.rhoOptions,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1)],1),e._v(" "),n("div",[n("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:e.createModel}},[e._v("生成齿轮")])],1)])};S._withStripped=!0;var I=n(437);function P(e,t,n){var r,i,a,o=function(e,t,n){var r=null;if(t.equals(n))return r;var i=n.y-t.y,a=n.x-t.x,o=-1*i,c=a,s=-1*a*t.y+i*t.x,l=(c*c*e.x-o*c*e.y-o*s)/(o*o+c*c),u=(o*o*e.y-o*c*e.x-c*s)/(o*o+c*c);return new I.Pq0(l,u,0)}(e,t,n),c=e.distanceTo(o);return r=o,i=o.clone().sub(e).normalize(),a=c,i.setLength(a),r.clone().add(i)}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return C(l,"_invoke",function(n,r,i){var a,c,s,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,s=e,p.n=n,o}};function m(n,r){for(c=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],m=p.p,h=a[2];n>3?(i=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((i=n<2&&m<a[1])?(c=0,p.v=r,p.n=a[1]):m<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,h),c=u,s=h;(t=c<2?e:s)||!d;){a||(c?c<3?(c>1&&(p.n=-1),m(c,s)):p.n=s:p.v=s);try{if(l=2,a){if(c||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),c=1);a=e}else if((t=(d=p.n<0)?s:n.call(r,p))!==o)break}catch(t){a=e,c=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function c(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(C(t={},r,function(){return this}),t),d=l.prototype=c.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,C(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=l,C(d,"constructor",l),C(l,"constructor",s),s.displayName="GeneratorFunction",C(l,i,"GeneratorFunction"),C(d),C(d,i,"Generator"),C(d,r,function(){return this}),C(d,"toString",function(){return"[object Generator]"}),(b=function(){return{w:a,m:p}})()}function C(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}C=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){C(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},C(e,t,n,r)}function w(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){w(a,r,i,o,c,"next",e)}function c(e){w(a,r,i,o,c,"throw",e)}o(void 0)})}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}var k=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"createSpurGear",value:(s=_(b().m(function e(t){var n,r,i;return b().w(function(e){for(;;)switch(e.n){case 0:return n=l.command.sketch,r=l.command.solid,this.createAddendumSketch(n,t.ra),i=this.createCutSketch(n,t),e.n=1,l.command.execute(!0);case 1:return l.command.clearCommand(),e.n=2,this.createFillet(n,t.toothFilterR,i);case 2:return e.n=3,l.command.execute();case 3:return l.command.clearCommand(),e.n=4,this.extrudeAddendum(r,t.teethWidth);case 4:return e.n=5,l.command.execute();case 5:return l.command.clearCommand(),e.n=6,this.extrudeCut(r,t.teethWidth);case 6:return e.n=7,l.command.execute();case 7:return l.command.clearCommand(),e.n=8,this.circularPattern(r,t.teethNumber);case 8:return e.n=9,l.command.execute();case 9:l.command.clearCommand();case 10:return e.a(2)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"createAddendumSketch",value:function(e,t){e.createSketch({sketchName:"草图1",datumId:8}),e.createCircle({centerPoint:new i.Point(0,0),circlePoint:new i.Point(t,0)}),e.exitSketch()}},{key:"createCutSketch",value:function(e,t){e.createSketch({sketchName:"草图2",datumId:8});var n=Math.PI/3,r=this.getIntersectionPointInInvolute(0,n,t.rb,t.rd+t.modification*t.module),a=Math.PI/(2*t.teethNumber),o=r.x*Math.cos(a)-r.y*Math.sin(a),c=r.x*Math.sin(a)+r.y*Math.cos(a),s=new I.Pq0(o,c),l=new I.Pq0(0,0),u=this.getPoint({x:0,y:t.rf}),d=this.getPoint(P(new I.Pq0(0,t.rf),l,s)),p=[],m=[];if(t.rb>t.rf)for(var h=0;h<n;h+=.05){var f=t.rb*(Math.sin(h)-h*Math.cos(h)),y=t.rb*(Math.cos(h)+h*Math.sin(h));p.push(this.getPoint({x:f,y}));var v=P(new I.Pq0(f,y),l,s);m.push(this.getPoint(v))}else{var g=this.getIntersectionPointInInvolute(0,n,t.rb,t.rf);u=this.getPoint(g),d=this.getPoint(P(new I.Pq0(g.x,g.y),l,s)),p.push(u),m.push(d);for(var S=0;S<n;S+=.05){var x=t.rb*(Math.sin(S)-S*Math.cos(S)),b=t.rb*(Math.cos(S)+S*Math.sin(S));if(Math.sqrt(x*x+b*b)>t.rf){p.push(this.getPoint({x,y:b}));var C=P(new I.Pq0(x,b),l,s);m.push(this.getPoint(C))}}}e.createIntpCurve({pickPoints:p}),e.createIntpCurve({pickPoints:m}),e.createSketchLine({startPoint:new i.Point(m[m.length-1].x,m[m.length-1].y),endPoint:new i.Point(p[p.length-1].x,p[p.length-1].y)}),e.createArcByCenter({centerPoint:new i.Point(0,0),startPoint:u,endPoint:d});var w=Math.sqrt((p[0].x-u.x)*(p[0].x-u.x)+(p[0].y-u.y)*(p[0].y-u.y));return w>t.toothFilterR&&(e.createSketchLine({startPoint:new i.Point(p[0].x,p[0].y),endPoint:u}),e.createSketchLine({startPoint:new i.Point(m[0].x,m[0].y),endPoint:d})),e.exitSketch(),w}},{key:"createFillet",value:(c=_(b().m(function e(t,n,r){var i,a,o,c,s,u,d,p;return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l.query.getElementsByFeatureNames(["草图2"]);case 1:i=(i=e.v).data,r>n?(i.elements.forEach(function(e){12===e.params.type&&(a=e.id),10===e.params.type&&(0===e.params.startPoint[0]?o=e.id:e.params.startPoint[0]<0&&e.params.endPoint[0]<0&&(c=e.id))}),t.editSketch({sketchName:"草图2"}),t.createFilletCurve({curveId1:a,curveId2:o,radius:n,type1:2,type2:2}),t.createFilletCurve({curveId1:a,curveId2:c,radius:n,type1:2,type2:2}),t.exitEditSketch({sketchName:"草图2"})):(i.elements.forEach(function(e){12===e.params.type&&(s=e.id),15===e.params.type&&(p&&(e.params.startPoint[0]>p.params.startPoint[0]?(u=e.id,d=p.id):(u=p.id,d=e.id)),p=e)}),t.editSketch({sketchName:"草图2"}),t.createFilletCurve({curveId1:s,curveId2:u,radius:n,type1:2,type2:2}),t.createFilletCurve({curveId1:s,curveId2:d,radius:n,type1:2,type2:2}),t.exitEditSketch({sketchName:"草图2"}));case 2:return e.a(2)}},e)})),function(e,t,n){return c.apply(this,arguments)})},{key:"getIntersectionPointInInvolute",value:function(e,t,n,r){var i=(e+t)/2,a=n*(Math.sin(i)-i*Math.cos(i)),o=n*(Math.cos(i)+i*Math.sin(i)),c=Math.sqrt(a*a+o*o)-r;return Math.abs(c)<.001?{x:a,y:o}:c>0?this.getIntersectionPointInInvolute(e,i,n,r):c<0?this.getIntersectionPointInInvolute(i,t,n,r):void 0}},{key:"extrudeAddendum",value:(o=_(b().m(function e(t,n){var r,i;return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l.query.getEntitiesByFeatureNames(["草图1"]);case 1:i=(i=e.v).data,null!==(r=i)&&void 0!==r&&r.entities&&t.extrude({sketch:i.entities[0].id,height1:n+""},"拉伸凸台");case 2:return e.a(2)}},e)})),function(e,t){return o.apply(this,arguments)})},{key:"extrudeCut",value:(a=_(b().m(function e(t,n){var r,i,a,o,c;return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l.query.getEntitiesByFeatureNames(["草图2"]);case 1:if(i=(i=e.v).data,null===(r=i)||void 0===r||!r.entities){e.n=3;break}return e.n=2,l.query.getEntitiesByFeatureNames(["拉伸凸台"]);case 2:o=(o=e.v).data,null!==(a=o)&&void 0!==a&&a.entities&&t.extrudeCut({sketch:i.entities[0].id,height1:n+"",cutSolids:[null===(c=o.entities[0])||void 0===c?void 0:c.id]},"拉伸切除");case 3:return e.a(2)}},e)})),function(e,t){return a.apply(this,arguments)})},{key:"circularPattern",value:(r=_(b().m(function e(t,n){var r,a,o,c;return b().w(function(e){for(;;)switch(e.n){case 0:return(a=new i.Axis).setPoint(new i.Point(0,0,0),new i.Point(0,0,10)),e.n=1,l.query.getFeaturesByNames(["拉伸切除"]);case 1:o=(o=e.v).data,null!==(r=o)&&void 0!==r&&r.features&&t.circularPattern({baseType:1,features:[null===(c=o.features[0])||void 0===c?void 0:c.id],axis:a,angle1:360,instanceNum1:n},"圆周阵列");case 2:return e.a(2)}},e)})),function(e,t){return r.apply(this,arguments)})},{key:"getPoint",value:function(e){var t=Math.abs(e.x)<1e-10?0:e.x,n=Math.abs(e.y)<1e-10?0:e.y;return new i.Point(t,n)}}],t&&T(e.prototype,t),n&&T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a,o,c,s}());function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function F(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function B(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}var N=F(function e(t,n,r,i,a,o,c,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.teethNumber=t,this.module=n,this.alpha=r,this.teethWidth=i,this.toothFilterR=a*n,this.beta=s,this.addendumCoefficient=o,this.clearanceCoefficient=c,this.modification=l,this.dividingD=this.module*this.teethNumber,this.rd=this.dividingD/2,this.baseD=this.dividingD*Math.cos(this.alpha),this.rb=this.baseD/2,this.addendumD=this.dividingD+2*this.module*this.addendumCoefficient+2*this.modification*this.module,this.ra=this.addendumD/2,this.dedendumD=this.dividingD-2*this.module*(this.addendumCoefficient+this.clearanceCoefficient)+2*this.modification*this.module,this.rf=this.dedendumD/2});function M(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return R(l,"_invoke",function(n,r,i){var a,c,s,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,s=e,p.n=n,o}};function m(n,r){for(c=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],m=p.p,h=a[2];n>3?(i=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((i=n<2&&m<a[1])?(c=0,p.v=r,p.n=a[1]):m<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,h),c=u,s=h;(t=c<2?e:s)||!d;){a||(c?c<3?(c>1&&(p.n=-1),m(c,s)):p.n=s:p.v=s);try{if(l=2,a){if(c||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),c=1);a=e}else if((t=(d=p.n<0)?s:n.call(r,p))!==o)break}catch(t){a=e,c=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function c(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(R(t={},r,function(){return this}),t),d=l.prototype=c.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,R(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=l,R(d,"constructor",l),R(l,"constructor",s),s.displayName="GeneratorFunction",R(l,i,"GeneratorFunction"),R(d),R(d,i,"Generator"),R(d,r,function(){return this}),R(d,"toString",function(){return"[object Generator]"}),(M=function(){return{w:a,m:p}})()}function R(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}R=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){R(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},R(e,t,n,r)}function L(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}const O={name:"SpurGear",data:function(){return{loading:!1,z1:17,zOptions:[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,55,60,65,70,75,80,85,90,95,100,110,120,500],b1:30,m:2,modules:[1,1.125,1.25,1.375,1.5,1.75,2,2.25,2.5,2.75,3,3.5,4,4.5,5,5.5,6,7,8,9,10,11,12,14,16,18,20,22,25,28,32,36,40,45,50],alpha:20,alphaOptions:[14.5,17.5,20,22.5,25,30],haC:1,haCOptions:[.8,1,1.2],cC:.25,cCOptions:[.157,.2,.25,.3,.35,.4],rho:.38,rhoOptions:[.25,.3,.38,.39],meshType:0,meshTypeOption:[{label:"外啮合",value:0}],x:0,beta:0,betaOptions:[0,6,8,10,12,15,20,25,30,35,40]}},mounted:function(){},methods:{createModel:function(){var e,t=this;return(e=M().m(function e(){var n;return M().w(function(e){for(;;)switch(e.n){case 0:return t.loading=!0,n=new N(t.z1,t.m,t.alpha/180*Math.PI,t.b1,t.rho,t.haC,t.cC,t.beta,t.x),e.n=1,k.createSpurGear(n);case 1:t.loading=!1;case 2:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){L(a,r,i,o,c,"next",e)}function c(e){L(a,r,i,o,c,"throw",e)}o(void 0)})})()},modulesPadding:function(e){return"padding-top: 1px; padding-bottom: 1px; padding-left: "+([1,1.25,1.5,2,2.5,3,4,5,6,8,10,12,16,20,25,32,40,50].includes(e)?1:15)+"px"}}};n(255);var z=n(486);const V=(0,z.A)(O,S,[],!1,null,"41b4b2fb",null).exports,j={name:"PartPlugins",data:function(){return{activePane:"gear"}},computed:{currentPane:function(){return this.activePane,V}}};const Y=(0,z.A)(j,g,[],!1,null,"47f08cf4",null).exports;var $=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex"}},[n("el-tabs",{staticStyle:{"min-width":"115px"},attrs:{"tab-position":"left"},model:{value:e.activePane,callback:function(t){e.activePane=t},expression:"activePane"}},[n("el-tab-pane",{attrs:{label:"装配配合",name:"mate"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"线性阵列",name:"linearArray"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"圆周阵列",name:"circularPattern"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"插入零件",name:"insertPart"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"信息查询",name:"infoQuery"}})],1),e._v(" "),n(e.currentPane,{tag:"component",staticStyle:{"flex-grow":"1.0",overflow:"hidden"}})],1)};$._withStripped=!0;var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{size:"mini"}},[n("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"选中的元素: "}},[n("picked-info-list",{attrs:{"info-list":e.selectedElementList}})],1),e._v(" "),n("el-form-item",{attrs:{label:"配合类型"}},[n("el-select",{attrs:{placeholder:"请选择配合类型",size:"mini"},model:{value:e.matingType,callback:function(t){e.matingType=t},expression:"matingType"}},e._l(e.matingTypeList,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirmMate}},[e._v("配合")])],1)],1)};function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G(t)?t:t+""}q._withStripped=!0;const W=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._featureName="",this._moveIntsanceId="",this._moveElementId=0,this._refInstanceId="",this._refElementId=0,this._matingType=0,this._alignType=0,this._offsetValue=0},(t=[{key:"executeCommand",value:function(){l.command.assembly.createMatingIncrement({moveInstanceId:this._moveIntsanceId,moveElementId:this._moveElementId,refInstanceId:this._refInstanceId,refElementId:this._refElementId,matingType:this._matingType,alignType:this._alignType,offsetValue:this._offsetValue},this.featureName)}},{key:"featureName",get:function(){return this._featureName},set:function(e){this._featureName=e}},{key:"moveIntsanceId",get:function(){return this._moveIntsanceId},set:function(e){this._moveIntsanceId=e}},{key:"refElementId",get:function(){return this._refElementId},set:function(e){this._refElementId=e}},{key:"moveElementId",get:function(){return this._moveElementId},set:function(e){this._moveElementId=e}},{key:"refInstanceId",get:function(){return this._refInstanceId},set:function(e){this._refInstanceId=e}},{key:"matingType",get:function(){return this._matingType},set:function(e){this._matingType=e}},{key:"alignType",get:function(){return this._alignType},set:function(e){this._alignType=e}},{key:"offsetValue",get:function(){return this._offsetValue},set:function(e){this._offsetValue=e}}])&&U(e.prototype,t),n&&U(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();var X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"90%"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[e._v("\n      元素id: "+e._s(e.elementId)+"\n    ")]),e._v(" "),n("el-col",{attrs:{span:8}},[e._v("\n      实例名: "+e._s(e.instanceName)+"\n    ")]),e._v(" "),n("el-col",{attrs:{span:8}},[e._v("\n      实例id: "+e._s(e.instanceId)+"\n    ")])],1)],1)};X._withStripped=!0;const Z={name:"ElementInfo",props:["elementId","instanceName","instanceId"]};const J=(0,z.A)(Z,X,[],!1,null,"6980349e",null).exports;var K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.showItemList,function(t,r){return n("div",{key:r,staticClass:"pick-info-list"},[n("el-row",[e._v(e._s(t.displayName))])],1)}),0)};function Q(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}K._withStripped=!0;const te={name:"PickedInfoList",props:["infoList"],data:function(){return{testList:[{key:"1"}]}},computed:{showItemList:function(){var e,t=[],n=Q(this.infoList);try{for(n.s();!(e=n.n()).done;){var r=e.value,i={rowKey:"3"};i.displayName=this.makeDisplayName(r),t.push(i)}}catch(e){n.e(e)}finally{n.f()}return t}},methods:{makeDisplayName:function(e){var t="",n=e.instance;e.element;return n&&(t+=n.name,t+="(id: "+n.id+")"),t}}};n(852);function ne(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const ie={name:"MateExample",components:{PickedInfoList:(0,z.A)(te,K,[],!1,null,"79d80954",null).exports,ElementInfo:J},data:function(){return{elementPickEventId:null,selectedElementList:[],matingTypeList:[{value:0,label:"重合"},{value:1,label:"平行"},{value:2,label:"相切",disabled:!0},{value:3,label:"同轴心",disabled:!0},{value:7,label:"垂直",disabled:!0},{value:11,label:"距离",disabled:!0},{value:12,label:"角度",disabled:!0}],matingType:0}},mounted:function(){var e=this;this.elementPickEventId=l.event.subscribeElementPickEvent(function(t){e.selectedElementList=t.element})},methods:{confirmMate:function(){2!==this.selectedElementList.length&&m.errorTip("选择元素数量错误。");var e,t=ne(this.selectedElementList);try{for(t.s();!(e=t.n()).done;){if(19!==e.value.element.type)return void m.errorTip("存在非法元素")}}catch(e){t.e(e)}finally{t.f()}var n=this.selectedElementList[0],r=this.selectedElementList[1],i=new W;i.refInstanceId=n.instance.id,i.refElementId=n.element.id,i.moveIntsanceId=r.instance.id,i.moveElementId=r.element.id,i.featureName="",i.matingType=this.matingType,i.alignType=0,i.offsetValue=0,i.executeCommand(),l.event.clearSelection()}},beforeDestroy:function(){l.event.unSubscribeElementPickEvent(this.elementPickEventId)}};const ae=(0,z.A)(ie,q,[],!1,null,"2ac997ee",null).exports;var oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{size:"mini"}},[n("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"选中的元素"}},e._l(e.selectedElementList,function(t,r){return n("el-row",{key:r,staticStyle:{width:"320px"}},[n("el-col",{attrs:{span:8}},[e._v("\n        "+e._s(t.instance.name)+"\n      ")]),e._v(" "),n("el-col",{attrs:{span:8}},[e._v("\n        元素id: "+e._s(t.element.id)+"\n      ")]),e._v(" "),n("el-col",{attrs:{span:8}},[e._v("\n        实例id: "+e._s(t.instance.id)+"\n      ")])],1)}),1)],1)};oe._withStripped=!0;const ce={name:"InfoQueryExample",components:{ElementInfo:J},comments:{ElementInfo:J},data:function(){return{elementPickEventId:null,featurePickEventId:null,selectedElementList:[],selectedFeatureList:[]}},mounted:function(){var e=this;this.elementPickEventId=l.event.subscribeElementPickEvent(function(t){e.selectedElementList=t.element}),this.featurePickEventId=l.event.subscribeFeaturePickEvent(function(t){e.selectedFeatureList=t.feature})},beforeDestroy:function(){l.event.unSubscribeElementPickEvent(this.elementPickEventId),l.event.unSubscribeFeaturePickEvent(this.featurePickEventId)}};const se=(0,z.A)(ce,oe,[],!1,null,"d4183ca6",null).exports;var le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{size:"mini"}},[n("el-form-item",{attrs:{label:"选择的实例: "}},[e.selectedElement?n("instance-info",{attrs:{"selected-instance":e.selectedElement.instance}}):n("span",[e._v("未选择实例")])],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"插入位置: "}},[n("el-row",[e._v("\n        x: "),n("el-input",{staticClass:"point-position-input",model:{value:e.position.x,callback:function(t){e.$set(e.position,"x",t)},expression:"position.x"}})],1),e._v(" "),n("el-row",[e._v("\n        y: "),n("el-input",{staticClass:"point-position-input",model:{value:e.position.y,callback:function(t){e.$set(e.position,"y",t)},expression:"position.y"}})],1),e._v(" "),n("el-row",[e._v("\n        z: "),n("el-input",{staticClass:"point-position-input",model:{value:e.position.z,callback:function(t){e.$set(e.position,"z",t)},expression:"position.z"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"按照模型中心确定"}},[n("el-checkbox",{attrs:{disabled:""},model:{value:e.boxCenter,callback:function(t){e.boxCenter=t},expression:"boxCenter"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"零件所在项目id"}},[n("el-input",{staticStyle:{width:"240px"},attrs:{size:"small",disabled:"",placeholder:"默认在当前项目下"}})],1)],1),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirm}},[e._v("插入零件")])],1)};le._withStripped=!0;var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"90%"}},[e.selectedInstance?n("el-row",[n("el-col",{attrs:{span:8}},[e._v("\n      实例id: "+e._s(e.selectedInstance.id)+"\n    ")]),e._v(" "),n("el-col",{attrs:{span:8}},[e._v("\n      实例名: "+e._s(e.selectedInstance.name)+"\n    ")])],1):n("el-row",[e._v("未选中实例信息")])],1)};ue._withStripped=!0;const de={name:"InstanceInfo",props:["selectedInstance"]};const pe=(0,z.A)(de,ue,[],!1,null,"2021222e",null).exports,me={name:"InsertPartExample.vue",data:function(){return{elementPickEventId:null,selectedElement:null,boxCenter:!0,position:new i.Point(100,100,100)}},components:{InstanceInfo:pe,ElementInfo:J},mounted:function(){var e=this;this.elementPickEventId=l.event.subscribeElementPickEvent(function(t){e.selectedElement=t.element[0]})},beforeDestroy:function(){l.event.unSubscribeElementPickEvent(this.elementPickEventId)},methods:{getDocNameFromInstanceName:function(e){e.lastIndex;var t=e.lastIndexOf("<");return e.substring(0,t)},confirm:function(){var e=this.selectedElement.instance.name;e=this.getDocNameFromInstanceName(e),l.command.assembly.insertComponentIncrement({docName:e,position:this.position,boxCenter:1},"")}}};n(907);const he=(0,z.A)(me,le,[],!1,null,"5928bb58",null).exports;var fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{size:"mini"}},[n("el-form-item",{attrs:{label:"选中的实例:"}},[n("instance-info",{attrs:{"selected-instance":e.selectedInstance}})],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"方向向量: "}},[n("el-row",[e._v("\n      x: "),n("el-input",{staticClass:"point-position-input",model:{value:e.vector.x,callback:function(t){e.$set(e.vector,"x",t)},expression:"vector.x"}})],1),e._v(" "),n("el-row",[e._v("\n      y: "),n("el-input",{staticClass:"point-position-input",model:{value:e.vector.y,callback:function(t){e.$set(e.vector,"y",t)},expression:"vector.y"}})],1),e._v(" "),n("el-row",[e._v("\n      z: "),n("el-input",{staticClass:"point-position-input",model:{value:e.vector.z,callback:function(t){e.$set(e.vector,"z",t)},expression:"vector.z"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"间隔距离: "}},[n("el-input",{staticStyle:{width:"80px",height:"30px"},attrs:{size:"mini"},model:{value:e.spacing1,callback:function(t){e.spacing1=t},expression:"spacing1"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"阵列数量: "}},[n("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:e.instanceNum1,callback:function(t){e.instanceNum1=t},expression:"instanceNum1"}})],1),e._v(" "),n("el-form-item",{staticClass:"input-form-item"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirm}},[e._v("确认")])],1)],1)};fe._withStripped=!0;const ye={name:"ArrayExample",components:{InstanceInfo:pe,ElementInfo:J},data:function(){return{selectedInstance:null,elementPickEventId:null,instanceId:"",vector:new i.Point(10,0,0),instanceNum1:2,spacing1:30,featureName:0}},mounted:function(){var e=this;this.elementPickEventId=l.event.subscribeElementPickEvent(function(t){e.selectedInstance=t.element[0].instance})},beforeDestroy:function(){l.event.unSubscribeElementPickEvent(this.elementPickEventId)},methods:{confirm:function(){var e=this.selectedInstance.id,t=new i.Direction;t.setPoint(new i.Point,this.vector),l.command.assembly.linearPatternIncrement({component:e,direction1:t,spacing1:this.spacing1,instanceNum1:this.instanceNum1},"")}}},ve=ye;n(188);const ge=(0,z.A)(ve,fe,[],!1,null,"67769155",null).exports;var Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{size:"mini"}},[n("el-form-item",{attrs:{label:"选中的实例:"}},[n("instance-info",{attrs:{"selected-instance":e.selectedInstance}})],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"阵列中心轴: "}},[n("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"起始点: "}},[n("el-row",[e._v("\n        x: "),n("el-input",{staticClass:"point-position-input",model:{value:e.startPoint.x,callback:function(t){e.$set(e.startPoint,"x",t)},expression:"startPoint.x"}})],1),e._v(" "),n("el-row",[e._v("\n        y: "),n("el-input",{staticClass:"point-position-input",model:{value:e.startPoint.y,callback:function(t){e.$set(e.startPoint,"y",t)},expression:"startPoint.y"}})],1),e._v(" "),n("el-row",[e._v("\n        z: "),n("el-input",{staticClass:"point-position-input",model:{value:e.startPoint.z,callback:function(t){e.$set(e.startPoint,"z",t)},expression:"startPoint.z"}})],1)],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"终止点:"}},[n("el-row",[e._v("\n        x: "),n("el-input",{staticClass:"point-position-input",model:{value:e.endPoint.x,callback:function(t){e.$set(e.endPoint,"x",t)},expression:"endPoint.x"}})],1),e._v(" "),n("el-row",[e._v("\n        y: "),n("el-input",{staticClass:"point-position-input",model:{value:e.endPoint.y,callback:function(t){e.$set(e.endPoint,"y",t)},expression:"endPoint.y"}})],1),e._v(" "),n("el-row",[e._v("\n        z: "),n("el-input",{staticClass:"point-position-input",model:{value:e.endPoint.z,callback:function(t){e.$set(e.endPoint,"z",t)},expression:"endPoint.z"}})],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"角度°: "}},[n("el-input",{staticStyle:{width:"80px",height:"30px"},attrs:{type:"number",min:"1",max:"360"},model:{value:e.angle1,callback:function(t){e.angle1=t},expression:"angle1"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"阵列数量: "}},[n("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:e.instanceNum1,callback:function(t){e.instanceNum1=t},expression:"instanceNum1"}})],1),e._v(" "),n("el-form-item",{staticClass:"input-form-item"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirm}},[e._v("确认")])],1)],1)};Se._withStripped=!0;const Ie={name:"ArrayExample",components:{InstanceInfo:pe,ElementInfo:J},data:function(){return{selectedInstance:null,elementPickEventId:null,instanceId:"",startPoint:new i.Point(0,0,0),endPoint:new i.Point(100,0,0),instanceNum1:2,angle1:30,featureName:0}},mounted:function(){var e=this;this.elementPickEventId=l.event.subscribeElementPickEvent(function(t){e.selectedInstance=t.element[0].instance})},beforeDestroy:function(){l.event.unSubscribeElementPickEvent(this.elementPickEventId)},methods:{confirm:function(){var e=this.selectedInstance.id,t=new i.Axis;t.setPoint(this.startPoint,this.endPoint),l.command.assembly.circularPatternIncrement({component:e,axis:t,angle1:this.angle1,instanceNum1:this.instanceNum1},"")}}},Pe=Ie;n(568);const xe=(0,z.A)(Pe,Se,[],!1,null,"3c04ee03",null).exports,be={name:"AssemblyPlugins",data:function(){return{activePane:"mate"}},mounted:function(){},computed:{currentPane:function(){switch(this.activePane){case"mate":default:return ae;case"infoQuery":return se;case"insertPart":return he;case"linearArray":return ge;case"circularPattern":return xe}}}};const Ce=(0,z.A)(be,$,[],!1,null,"6b171a52",null).exports;var we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex"}},[n("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.activePane,callback:function(t){e.activePane=t},expression:"activePane"}},[n("el-tab-pane",{attrs:{label:"点云上传",name:"upload"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"NeurCAD重建",name:"reconstruction"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"结果下载",name:"download"}})],1),e._v(" "),n(e.currentPane,{tag:"component",attrs:{pointCloudData:e.pointCloudData,pointCloudInfo:e.pointCloudInfo},on:{"point-cloud-ready":e.handlePointCloudReady}})],1)};we._withStripped=!0;var _e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"20px","flex-grow":"1"}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("点云文件上传")])]),e._v(" "),n("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#","auto-upload":!1,"on-change":e.handleFileChange,"file-list":e.fileList,"before-upload":e.beforeUpload,accept:".ply,.xyz,.pts,.pcd,.obj",multiple:""}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n        支持 PLY, XYZ, PTS, PCD, OBJ 格式的点云文件，单个文件不超过100MB\n      ")])]),e._v(" "),e.pointCloudInfo?n("div",{staticStyle:{"margin-top":"20px"}},[n("el-descriptions",{attrs:{title:"点云信息",column:2,border:""}},[n("el-descriptions-item",{attrs:{label:"文件名"}},[e._v(e._s(e.pointCloudInfo.fileName))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"文件大小"}},[e._v(e._s(e.formatFileSize(e.pointCloudInfo.fileSize)))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"点数量"}},[e._v(e._s(e.pointCloudInfo.pointCount))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"文件格式"}},[e._v(e._s(e.pointCloudInfo.format))]),e._v(" "),void 0!==e.pointCloudInfo.hasNormals?n("el-descriptions-item",{attrs:{label:"包含法向量"}},[e.pointCloudInfo.hasNormals?n("el-tag",{attrs:{type:"success"}},[e._v("是")]):n("el-tag",{attrs:{type:"info"}},[e._v("否")])],1):e._e()],1)],1):e._e(),e._v(" "),e.showPreview?n("div",{staticStyle:{"margin-top":"20px"}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("点云预览")]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.togglePreview}},[e._v("\n            "+e._s(e.previewExpanded?"收起":"展开")+"\n          ")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.previewExpanded,expression:"previewExpanded"}]},[n("div",{staticStyle:{"margin-bottom":"10px","text-align":"center"}},[n("el-button",{attrs:{size:"small"},on:{click:e.resetCamera}},[e._v("重置视角")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:e.toggleAutoRotate}},[e._v("\n              "+e._s(e.autoRotate?"停止旋转":"自动旋转")+"\n            ")])],1),e._v(" "),n("div",{staticStyle:{"margin-bottom":"10px",padding:"10px","background-color":"#f8f9fa","border-radius":"4px"}},[n("div",{staticStyle:{"margin-bottom":"5px","font-size":"12px",color:"#606266"}},[e._v("\n              显示点数: "+e._s(e.displayPointCount)+" / "+e._s(e.pointCloudData?e.pointCloudData.length:0)+"\n            ")]),e._v(" "),n("el-slider",{staticStyle:{margin:"0"},attrs:{min:100,max:e.pointCloudData?Math.min(e.pointCloudData.length,2e4):5e3,step:100,"show-input":""},on:{change:e.updatePointDisplay},model:{value:e.displayPointCount,callback:function(t){e.displayPointCount=t},expression:"displayPointCount"}}),e._v(" "),n("div",{staticStyle:{"margin-top":"5px","font-size":"11px",color:"#909399","text-align":"center"}},[e._v("\n              为防止性能问题出现，最多展示20000点\n            ")])],1),e._v(" "),n("div",{staticStyle:{"margin-bottom":"10px","text-align":"center",color:"#409EFF","font-weight":"bold"}},[e._v("\n            当前显示: "+e._s(Math.min(e.pointCloudData?e.pointCloudData.length:0,e.displayPointCount))+" 个点\n            "),e.pointCloudData&&e.pointCloudData.length>e.displayPointCount?n("span",{staticStyle:{color:"#E6A23C","font-size":"12px"}},[e._v("\n              (总点数: "+e._s(e.pointCloudData.length)+")\n            ")]):e._e()]),e._v(" "),n("div",{staticStyle:{"margin-bottom":"10px",padding:"8px","background-color":"#f5f7fa","border-radius":"4px","font-size":"12px",color:"#606266"}},[n("strong",[e._v("操作说明：")]),e._v("\n            鼠标左键拖拽旋转视角 | 鼠标滚轮缩放 | 鼠标右键拖拽平移\n          ")]),e._v(" "),n("div",{staticStyle:{height:"400px",border:"1px solid #dcdfe6","border-radius":"4px"}},[n("div",{ref:"pointCloudViewer",staticStyle:{width:"100%",height:"100%"}})])])])],1):e._e(),e._v(" "),n("div",{staticStyle:{"margin-top":"20px","text-align":"center"}},[n("el-button",{attrs:{type:"primary",disabled:!e.pointCloudInfo},on:{click:e.processPointCloud}},[e._v("\n        准备重建\n      ")]),e._v(" "),n("el-button",{on:{click:e.clearFiles}},[e._v("清空文件")])],1)],1)],1)};_e._withStripped=!0;var Te=n(24);function Ee(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||De(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=De(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function De(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Fe(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return Be(l,"_invoke",function(n,r,i){var a,c,s,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,s=e,p.n=n,o}};function m(n,r){for(c=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],m=p.p,h=a[2];n>3?(i=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((i=n<2&&m<a[1])?(c=0,p.v=r,p.n=a[1]):m<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,h),c=u,s=h;(t=c<2?e:s)||!d;){a||(c?c<3?(c>1&&(p.n=-1),m(c,s)):p.n=s:p.v=s);try{if(l=2,a){if(c||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),c=1);a=e}else if((t=(d=p.n<0)?s:n.call(r,p))!==o)break}catch(t){a=e,c=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function c(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Be(t={},r,function(){return this}),t),d=l.prototype=c.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Be(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=l,Be(d,"constructor",l),Be(l,"constructor",s),s.displayName="GeneratorFunction",Be(l,i,"GeneratorFunction"),Be(d),Be(d,i,"Generator"),Be(d,r,function(){return this}),Be(d,"toString",function(){return"[object Generator]"}),(Fe=function(){return{w:a,m:p}})()}function Be(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Be=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){Be(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},Be(e,t,n,r)}function Ne(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function Me(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Ne(a,r,i,o,c,"next",e)}function c(e){Ne(a,r,i,o,c,"throw",e)}o(void 0)})}}const Re={name:"PointCloudUpload",data:function(){return{fileList:[],pointCloudInfo:null,showPreview:!1,previewExpanded:!0,pointCloudData:null,scene:null,camera:null,renderer:null,controls:null,animationId:null,isViewerInitialized:!1,autoRotate:!1,displayPointCount:5e3,cacheFileUrl:null,cacheFileName:null,uploadedFileId:null}},methods:{beforeUpload:function(e){var t=[".ply",".xyz",".pts",".pcd",".obj"].some(function(t){return e.name.toLowerCase().endsWith(t)}),n=e.size/1024/1024<100;return t?(n||this.$message.error("文件大小不能超过 100MB!"),!1):(this.$message.error("只支持 PLY, XYZ, PTS, PCD, OBJ 格式的文件!"),!1)},handleFileChange:function(e,t){this.fileList=t,e.raw&&this.readPointCloudFile(e.raw)},readPointCloudFile:function(e){var t=this;return Me(Fe().m(function n(){var r;return Fe().w(function(n){for(;;)switch(n.n){case 0:try{"ply"===e.name.toLowerCase().split(".").pop()?t.readPLYFile(e):((r=new FileReader).onload=function(n){var r=n.target.result;t.parsePointCloud(r,e.name)},r.readAsText(e))}catch(e){t.$message.error("文件读取失败: "+e.message)}case 1:return n.a(2)}},n)}))()},readPLYFile:function(e){var t=this;return Me(Fe().m(function n(){var r;return Fe().w(function(n){for(;;)switch(n.n){case 0:try{(r=new FileReader).onload=function(n){var r=n.target.result;t.parsePLYFile(r,e.name)},r.readAsArrayBuffer(e)}catch(e){t.$message.error("PLY文件读取失败: "+e.message)}case 1:return n.a(2)}},n)}))()},parsePLYFile:function(e,t){console.log("开始解析PLY文件:",t);try{var n=new TextDecoder,r=n.decode(e.slice(0,1024));if(console.log("PLY头部信息:",r),r.includes("format ascii")){console.log("检测到ASCII格式PLY文件");var i=n.decode(e);this.parseASCIIPLY(i,t)}else if(r.includes("format binary"))console.log("检测到二进制格式PLY文件"),this.parseBinaryPLY(e,t);else{console.log("未知PLY格式，尝试作为ASCII解析");var a=n.decode(e);this.parseASCIIPLY(a,t)}}catch(e){console.error("PLY解析失败:",e),this.$message.error("PLY文件解析失败: "+e.message)}},parseBinaryPLY:function(e,t){var n=this;console.log("解析二进制PLY文件");try{for(var r=(new TextDecoder).decode(e.slice(0,2048)),i=r.split("\n"),a=-1,o=0,c="binary_little_endian",s=[],l=0,u=0;u<i.length;u++){var d=i[u].trim();if(d.startsWith("format"))c=d.split(" ")[1],console.log("PLY格式:",c);else if(d.startsWith("element vertex"))o=parseInt(d.split(" ")[2]),console.log("顶点数量:",o);else if(d.startsWith("property")){var p=d.split(" "),m=p[1],h=p[2];s.push({type:m,name:h}),console.log("属性:",m,h)}else if("end_header"===d){a=u,l=r.indexOf("end_header")+10+1;break}}if(-1===a)return void this.$message.error("PLY文件头部格式错误");console.log("头部结束位置:",a),console.log("数据偏移量:",l),console.log("属性列表:",s);for(var f=[],y=new DataView(e,l),v=0,g=0,S=0,I=s;S<I.length;S++){var P=I[S];"double"===P.type?g+=8:"float"===P.type||"int"===P.type?g+=4:"uchar"===P.type&&(g+=1)}console.log("每个顶点字节数:",g);for(var x="binary_little_endian"===c,b=0;b<o;b++)try{var C,w={},_=v,T=ke(s);try{for(T.s();!(C=T.n()).done;){var E=C.value,k=void 0;"double"===E.type?(k=y.getFloat64(_,x),_+=8):"float"===E.type?(k=y.getFloat32(_,x),_+=4):"int"===E.type?(k=y.getInt32(_,x),_+=4):"uchar"===E.type&&(k=y.getUint8(_),_+=1),isNaN(k)||(w[E.name]=k)}}catch(e){T.e(e)}finally{T.f()}void 0!==w.x&&void 0!==w.y&&void 0!==w.z&&(void 0!==w.red&&void 0!==w.green&&void 0!==w.blue&&(w.r=w.red/255,w.g=w.green/255,w.b=w.blue/255,delete w.red,delete w.green,delete w.blue),f.push(w),b<3&&console.log("第".concat(b+1,"个点:"),w)),v+=g}catch(e){console.warn("解析第".concat(b+1,"个点时出错:"),e);break}if(console.log("二进制PLY解析完成，有效点数:",f.length),0===f.length)return void this.$message.error("未能解析到有效的点云数据，请检查PLY文件格式");this.pointCloudData=f,this.pointCloudInfo={fileName:t,fileSize:e.byteLength,pointCount:f.length,format:"PLY (Binary)",hasNormals:void 0!==f[0].nx,hasColors:void 0!==f[0].r},this.displayPointCount=Math.min(f.length,5e3),console.log("点云信息:",this.pointCloudInfo),console.log("显示点数设置:",this.displayPointCount,"/",f.length),this.showPreview=!0,this.previewExpanded=!0,this.savePointCloudData(),this.$nextTick(function(){console.log("开始初始化点云预览"),setTimeout(function(){n.initViewer()},100)})}catch(e){console.error("二进制PLY解析失败:",e),this.$message.error("二进制PLY文件解析失败: "+e.message)}},parseASCIIPLY:function(e,t){var n=this;console.log("解析ASCII PLY文件");for(var r=e.split("\n"),i=-1,a=0,o=[],c=0;c<r.length;c++){var s=r[c].trim();if(s.startsWith("element vertex"))a=parseInt(s.split(" ")[2]),console.log("顶点数量:",a);else if(s.startsWith("property")){var l=s.split(" "),u=l[1],d=l[2];o.push({type:u,name:d}),console.log("属性:",u,d)}else if("end_header"===s){i=c;break}}if(-1!==i){console.log("头部结束位置:",i),console.log("文件总行数:",r.length),console.log("属性列表:",o);for(var p=[],m=0,h=0,f=i+1;f<r.length;f++){var y=r[f].trim();if(y){var v=y.split(/\s+/);if(v.length>=o.length){for(var g={},S=!0,I=0;I<o.length;I++){var P=parseFloat(v[I]);if(isNaN(P)){S=!1;break}g[o[I].name]=P}S&&void 0!==g.x&&void 0!==g.y&&void 0!==g.z?(void 0!==g.red&&void 0!==g.green&&void 0!==g.blue&&(g.r=g.red/255,g.g=g.green/255,g.b=g.blue/255,delete g.red,delete g.green,delete g.blue),p.push(g),++m<=3&&console.log("第".concat(m,"个点:"),g)):h++}else h++}}console.log("PLY解析完成，有效点数:",m,"无效行数:",h),0!==p.length?(this.pointCloudData=p,this.pointCloudInfo={fileName:t,fileSize:e.length,pointCount:p.length,format:"PLY (ASCII)",hasNormals:void 0!==p[0].nx,hasColors:void 0!==p[0].r},this.displayPointCount=Math.min(p.length,5e3),console.log("点云信息:",this.pointCloudInfo),console.log("显示点数设置:",this.displayPointCount,"/",p.length),this.showPreview=!0,this.previewExpanded=!0,this.savePointCloudData(),this.$nextTick(function(){console.log("开始初始化点云预览"),setTimeout(function(){n.initViewer()},100)})):this.$message.error("未能解析到有效的点云数据，请检查PLY文件格式")}else this.$message.error("PLY文件头部格式错误")},parsePointCloud:function(e,t){var n=this;console.log("开始解析点云文件:",t),console.log("文件内容长度:",e.length);var r=e.split("\n").filter(function(e){return e.trim()});console.log("有效行数:",r.length);var i=[],a=0,o=0;if(r.forEach(function(e,t){var n=e.trim().split(/\s+/);if(n.length>=3){var r=parseFloat(n[0]),c=parseFloat(n[1]),s=parseFloat(n[2]);if(isNaN(r)||isNaN(c)||isNaN(s))o++,console.warn("第".concat(t+1,"行包含无效坐标:"),n.slice(0,3));else{var l={x:r,y:c,z:s};if(n.length>=6){var u=parseFloat(n[3]),d=parseFloat(n[4]),p=parseFloat(n[5]);isNaN(u)||isNaN(d)||isNaN(p)||(l.nx=u,l.ny=d,l.nz=p)}i.push(l),a++,t<3&&console.log("第".concat(t+1,"行解析结果:"),l)}}else o++,t<5&&console.warn("第".concat(t+1,"行格式不正确:"),e)}),console.log("解析完成，有效点数:",a,"无效行数:",o),console.log("前3个点:",i.slice(0,3)),0!==i.length){this.pointCloudData=i,this.pointCloudInfo={fileName:t,fileSize:e.length,pointCount:i.length,format:t.split(".").pop().toUpperCase(),hasNormals:i.length>0&&i[0].hasOwnProperty("nx")};Math.min(i.length,2e4);this.displayPointCount=Math.min(i.length,5e3),console.log("点云信息:",this.pointCloudInfo),console.log("显示点数设置:",this.displayPointCount,"/",i.length),this.showPreview=!0,this.previewExpanded=!0,this.savePointCloudData(),this.$nextTick(function(){console.log("开始初始化点云预览"),setTimeout(function(){n.initViewer()},100)})}else this.$message.error("未能解析到有效的点云数据，请检查文件格式")},initViewer:function(){if(console.log("initViewer被调用"),this.isViewerInitialized)console.log("预览器已经初始化，跳过重复初始化");else if(this.pointCloudData&&this.pointCloudData.length){var e=this.$refs.pointCloudViewer;if(e){console.log("容器尺寸:",e.clientWidth,"x",e.clientHeight),this.cleanupViewer();try{this.scene=new I.Z58,this.scene.background=new I.Q1f(1710618),this.camera=new I.ubm(75,e.clientWidth/e.clientHeight,.1,1e4);var t=this.pointCloudData.slice(0,this.displayPointCount);console.log("用于计算边界框的点数:",t.length);var n=Math.min.apply(Math,Ee(t.map(function(e){return e.x}))),r=Math.max.apply(Math,Ee(t.map(function(e){return e.x}))),i=Math.min.apply(Math,Ee(t.map(function(e){return e.y}))),a=Math.max.apply(Math,Ee(t.map(function(e){return e.y}))),o=Math.min.apply(Math,Ee(t.map(function(e){return e.z}))),c=Math.max.apply(Math,Ee(t.map(function(e){return e.z})));console.log("边界框:",{minX:n,maxX:r,minY:i,maxY:a,minZ:o,maxZ:c});var s=(n+r)/2,l=(i+a)/2,u=(o+c)/2,d=Math.max(r-n,a-i,c-o);console.log("中心点:",{centerX:s,centerY:l,centerZ:u},"尺寸:",d),this.camera.position.set(s+d,l+d,u+d),this.camera.lookAt(s,l,u),this.renderer=new I.JeP({antialias:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),e.appendChild(this.renderer.domElement);var p=new I.$p8(4210752,.8);this.scene.add(p);var m=new I.ZyN(16777215,1);m.position.set(1,1,1),this.scene.add(m);var h=new I.LoY,f=new Float32Array(3*t.length),y=new Float32Array(3*t.length);console.log("开始创建几何体，点数:",t.length),t.forEach(function(e,n){if(f[3*n]=e.x,f[3*n+1]=e.y,f[3*n+2]=e.z,e.hasOwnProperty("r")&&!isNaN(e.r))y[3*n]=e.r,y[3*n+1]=e.g,y[3*n+2]=e.b;else if(e.hasOwnProperty("nx")&&!isNaN(e.nx))y[3*n]=(e.nx+1)/2,y[3*n+1]=(e.ny+1)/2,y[3*n+2]=(e.nz+1)/2;else{var r=n/t.length;y[3*n]=.2+.6*r,y[3*n+1]=.8-.4*r,y[3*n+2]=.2+.4*r}}),h.setAttribute("position",new I.THS(f,3)),h.setAttribute("color",new I.THS(y,3));var v=new I.BH$({size:.01,sizeAttenuation:!0,vertexColors:!0,transparent:!0,opacity:.9,blending:I.EZo}),g=new I.ONl(h,v);this.scene.add(g),this.controls=new Te.N(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.enableZoom=!0,this.controls.enablePan=!0,this.controls.enableRotate=!0,this.controls.autoRotate=!1,this.controls.autoRotateSpeed=2,this.controls.minDistance=.1,this.controls.maxDistance=1e3,this.startAnimation(),this.isViewerInitialized=!0,console.log("点云预览初始化成功，渲染了",t.length,"个点")}catch(e){console.error("初始化点云预览时发生错误:",e),this.$message.error("点云预览初始化失败: "+e.message),this.cleanupViewer()}}else console.error("找不到预览容器元素")}else console.error("没有点云数据，无法初始化预览")},startAnimation:function(){var e=this;this.animationId&&cancelAnimationFrame(this.animationId);var t=function(){e.controls&&e.renderer&&e.scene&&e.camera&&(e.controls.update(),e.renderer.render(e.scene,e.camera),e.animationId=requestAnimationFrame(t))};t()},cleanupViewer:function(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.renderer&&(this.renderer.domElement&&this.renderer.domElement.parentNode&&this.renderer.domElement.parentNode.removeChild(this.renderer.domElement),this.renderer.dispose(),this.renderer=null),this.controls&&(this.controls.dispose(),this.controls=null),this.isViewerInitialized=!1},togglePreview:function(){this.previewExpanded=!this.previewExpanded},formatFileSize:function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},processPointCloud:function(){var e=this;return Me(Fe().m(function t(){var n,r;return Fe().w(function(t){for(;;)switch(t.n){case 0:if(e.pointCloudInfo&&e.pointCloudData){t.n=1;break}return e.$message.warning("请先上传点云文件"),t.a(2);case 1:return n=e.$loading({lock:!0,text:"正在处理点云数据...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t.p=2,t.n=3,e.savePointCloudAsCache();case 3:e.$emit("point-cloud-ready",{data:e.pointCloudData,info:e.pointCloudInfo}),n.close(),e.$message.success("点云数据已准备就绪，可以进行NeurCAD重建"),t.n=5;break;case 4:t.p=4,r=t.v,n.close(),console.error("处理点云数据失败:",r),e.$message.error("处理点云数据失败: "+r.message);case 5:return t.a(2)}},t,null,[[2,4]])}))()},savePointCloudAsCache:function(){var e=this;return Me(Fe().m(function t(){var n,r,i,a,o,c,s,l;return Fe().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,n="ply\n",n+="format ascii 1.0\n",n+="comment Generated by CrownCAD Plugin\n",n+="element vertex ".concat(e.pointCloudData.length,"\n"),n+="property double x\n",n+="property double y\n",n+="property double z\n",e.pointCloudInfo.hasNormals&&(n+="property double nx\n",n+="property double ny\n",n+="property double nz\n"),n+="end_header\n",e.pointCloudData.forEach(function(t){var r="".concat(t.x," ").concat(t.y," ").concat(t.z);e.pointCloudInfo.hasNormals&&void 0!==t.nx&&(r+=" ".concat(t.nx," ").concat(t.ny," ").concat(t.nz)),n+=r+"\n"}),r=new Blob([n],{type:"text/plain"}),i=new File([r],"input_pld.ply",{type:"text/plain"}),console.log("准备上传点云文件到后端，大小:",r.size,"字节"),(a=new FormData).append("file",i),t.n=1,fetch("http://localhost:5001/api/upload-pointcloud",{method:"POST",body:a});case 1:if((o=t.v).ok){t.n=2;break}throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText));case 2:return t.n=3,o.json();case 3:if((c=t.v).success){t.n=4;break}throw new Error(c.error||"文件上传失败");case 4:console.log("点云文件上传成功:",c),s={fileId:c.file_id,fileName:c.filename,fileSize:c.file_size,pointCount:e.pointCloudData.length,format:"PLY",hasNormals:e.pointCloudInfo.hasNormals,timestamp:Date.now()},localStorage.setItem("crowncad_cache_file_info",JSON.stringify(s)),e.uploadedFileId=c.file_id,console.log("点云文件信息已保存:",s),t.n=6;break;case 5:throw t.p=5,l=t.v,console.error("上传点云文件失败:",l),new Error("上传点云文件失败: "+l.message);case 6:return t.a(2)}},t,null,[[0,5]])}))()},clearFiles:function(){this.fileList=[],this.pointCloudInfo=null,this.pointCloudData=null,this.showPreview=!1,this.uploadedFileId=null,this.cleanupViewer(),localStorage.removeItem("crowncad_cache_file_info"),this.clearPointCloudCache(),this.$message.info("文件已清空")},clearPointCloudCache:function(){try{localStorage.removeItem("crowncad_pointcloud_info"),localStorage.removeItem("crowncad_pointcloud_data"),localStorage.removeItem("crowncad_preview_expanded"),localStorage.removeItem("crowncad_display_point_count"),localStorage.removeItem("crowncad_auto_rotate"),localStorage.removeItem("crowncad_file_list"),localStorage.removeItem("crowncad_uploaded_file_id"),console.log("已清除点云缓存数据")}catch(e){console.error("清除点云缓存数据失败:",e)}},onWindowResize:function(){},resetCamera:function(){if(this.controls&&this.pointCloudData&&this.pointCloudData.length>0){var e=this.pointCloudData.slice(0,this.displayPointCount),t=Math.min.apply(Math,Ee(e.map(function(e){return e.x}))),n=Math.max.apply(Math,Ee(e.map(function(e){return e.x}))),r=Math.min.apply(Math,Ee(e.map(function(e){return e.y}))),i=Math.max.apply(Math,Ee(e.map(function(e){return e.y}))),a=Math.min.apply(Math,Ee(e.map(function(e){return e.z}))),o=Math.max.apply(Math,Ee(e.map(function(e){return e.z}))),c=(t+n)/2,s=(r+i)/2,l=(a+o)/2,u=Math.max(n-t,i-r,o-a);this.camera.position.set(c+u,s+u,l+u),this.camera.lookAt(c,s,l),this.controls.target.set(c,s,l),this.controls.update(),this.$message.success("视角已重置")}},toggleAutoRotate:function(){this.autoRotate=!this.autoRotate,this.controls&&(this.controls.autoRotate=this.autoRotate),this.$message.success(this.autoRotate?"已开启自动旋转":"已停止自动旋转")},updatePointDisplay:function(){var e=this;if(this.pointCloudData&&this.pointCloudData.length>0){console.log("更新点显示，目标点数:",this.displayPointCount),this.isViewerInitialized=!1,this.$nextTick(function(){e.initViewer()});var t=Math.min(this.pointCloudData.length,this.displayPointCount);this.$message.success("已更新显示 ".concat(t," 个点"))}},updatePointSize:function(){var e=this;this.isViewerInitialized=!1,this.$nextTick(function(){e.initViewer()})},restorePointCloudData:function(){var e=this;try{var t=localStorage.getItem("crowncad_pointcloud_info");t&&(this.pointCloudInfo=JSON.parse(t),console.log("恢复点云信息:",this.pointCloudInfo));var n=localStorage.getItem("crowncad_pointcloud_data");if(n){var r=JSON.parse(n);this.pointCloudData=r.slice(0,1e3),console.log("恢复点云数据:",this.pointCloudData.length,"个点（预览用）"),this.showPreview=!0,this.previewExpanded=JSON.parse(localStorage.getItem("crowncad_preview_expanded")||"true"),this.displayPointCount=parseInt(localStorage.getItem("crowncad_display_point_count")||"5000"),this.autoRotate=JSON.parse(localStorage.getItem("crowncad_auto_rotate")||"false");var i=localStorage.getItem("crowncad_file_list");i&&(this.fileList=JSON.parse(i));var a=localStorage.getItem("crowncad_uploaded_file_id");a&&(this.uploadedFileId=a),this.$nextTick(function(){e.initViewer()}),console.log("点云数据恢复完成")}}catch(e){console.error("恢复点云数据失败:",e)}},savePointCloudData:function(){try{if(this.pointCloudInfo&&(localStorage.setItem("crowncad_pointcloud_info",JSON.stringify(this.pointCloudInfo)),console.log("保存点云信息")),this.pointCloudData&&this.pointCloudData.length>0){var e=this.pointCloudData.slice(0,1e3);localStorage.setItem("crowncad_pointcloud_data",JSON.stringify(e)),console.log("保存点云数据:",e.length,"个点")}localStorage.setItem("crowncad_preview_expanded",JSON.stringify(this.previewExpanded)),localStorage.setItem("crowncad_display_point_count",this.displayPointCount.toString()),localStorage.setItem("crowncad_auto_rotate",JSON.stringify(this.autoRotate)),this.fileList.length>0&&localStorage.setItem("crowncad_file_list",JSON.stringify(this.fileList)),this.uploadedFileId&&localStorage.setItem("crowncad_uploaded_file_id",this.uploadedFileId),console.log("点云数据保存完成")}catch(e){console.error("保存点云数据失败:",e)}}},mounted:function(){this.restorePointCloudData()},beforeDestroy:function(){this.savePointCloudData(),this.cleanupViewer()}};n(140);const Le=(0,z.A)(Re,_e,[],!1,null,"3b15c078",null).exports;var Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"20px","flex-grow":"1"}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("NeurCAD重建 - 基于零高斯曲率的CAD表面重建")])]),e._v(" "),n("el-form",{staticStyle:{"margin-bottom":"20px"},attrs:{model:e.reconstructionParams,"label-width":"140px"}},[n("el-form-item",{attrs:{label:"网络架构"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{value:"SIREN",disabled:""}})],1),e._v(" "),n("el-form-item",{attrs:{label:"网络深度"}},[n("el-slider",{attrs:{min:2,max:4,step:1,"show-input":""},model:{value:e.reconstructionParams.decoder_n_hidden_layers,callback:function(t){e.$set(e.reconstructionParams,"decoder_n_hidden_layers",t)},expression:"reconstructionParams.decoder_n_hidden_layers"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"隐藏层维度"}},[n("el-slider",{attrs:{min:128,max:256,step:64,"show-input":""},model:{value:e.reconstructionParams.decoder_hidden_dim,callback:function(t){e.$set(e.reconstructionParams,"decoder_hidden_dim",t)},expression:"reconstructionParams.decoder_hidden_dim"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"学习率"}},[n("el-input-number",{attrs:{min:1e-6,max:.001,step:1e-5,precision:6},model:{value:e.reconstructionParams.lr,callback:function(t){e.$set(e.reconstructionParams,"lr",t)},expression:"reconstructionParams.lr"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"采样点数量"}},[n("el-slider",{attrs:{min:5e3,max:2e4,step:1e3,"show-input":""},model:{value:e.reconstructionParams.n_samples,callback:function(t){e.$set(e.reconstructionParams,"n_samples",t)},expression:"reconstructionParams.n_samples"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"网格分辨率"}},[n("el-slider",{attrs:{min:128,max:256,step:64,"show-input":""},model:{value:e.reconstructionParams.grid_res,callback:function(t){e.$set(e.reconstructionParams,"grid_res",t)},expression:"reconstructionParams.grid_res"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"SDF损失权重"}},[n("el-slider",{attrs:{min:0,max:1e4,step:100,"show-input":""},model:{value:e.reconstructionParams.loss_weights[0],callback:function(t){e.$set(e.reconstructionParams.loss_weights,0,t)},expression:"reconstructionParams.loss_weights[0]"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"插值损失权重"}},[n("el-slider",{attrs:{min:0,max:1e3,step:50,"show-input":""},model:{value:e.reconstructionParams.loss_weights[1],callback:function(t){e.$set(e.reconstructionParams.loss_weights,1,t)},expression:"reconstructionParams.loss_weights[1]"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"法向量损失权重"}},[n("el-slider",{attrs:{min:0,max:500,step:10,"show-input":""},model:{value:e.reconstructionParams.loss_weights[2],callback:function(t){e.$set(e.reconstructionParams.loss_weights,2,t)},expression:"reconstructionParams.loss_weights[2]"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Eikonal损失权重"}},[n("el-slider",{attrs:{min:0,max:200,step:5,"show-input":""},model:{value:e.reconstructionParams.loss_weights[3],callback:function(t){e.$set(e.reconstructionParams.loss_weights,3,t)},expression:"reconstructionParams.loss_weights[3]"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"散度损失权重"}},[n("el-slider",{attrs:{min:0,max:100,step:1,"show-input":""},model:{value:e.reconstructionParams.loss_weights[4],callback:function(t){e.$set(e.reconstructionParams.loss_weights,4,t)},expression:"reconstructionParams.loss_weights[4]"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Morse损失权重"}},[n("el-slider",{attrs:{min:0,max:50,step:1,"show-input":""},model:{value:e.reconstructionParams.loss_weights[5],callback:function(t){e.$set(e.reconstructionParams.loss_weights,5,t)},expression:"reconstructionParams.loss_weights[5]"}})],1)],1),e._v(" "),e.reconstructionProgress.show?n("div",{staticStyle:{margin:"20px 0"}},[n("el-progress",{attrs:{percentage:e.reconstructionProgress.percentage,status:e.reconstructionProgress.status,"stroke-width":18}}),e._v(" "),n("div",{staticStyle:{"margin-top":"10px","text-align":"center",color:"#606266"}},[e._v("\n        "+e._s(e.reconstructionProgress.message)+"\n      ")]),e._v(" "),e.reconstructionProgress.currentEpoch?n("div",{staticStyle:{"margin-top":"5px","text-align":"center",color:"#909399","font-size":"12px"}},[e._v("\n        当前轮次: "+e._s(e.reconstructionProgress.currentEpoch)+" / "+e._s(e.reconstructionProgress.totalEpochs)+"\n      ")]):e._e(),e._v(" "),e.reconstructionOutput.length>0?n("div",{staticStyle:{"margin-top":"20px"}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("重建输出 (显示最后3行，共"+e._s(e.totalOutputLines)+"行)")])]),e._v(" "),n("div",{staticClass:"reconstruction-output",staticStyle:{height:"200px","overflow-y":"auto","background-color":"#f5f5f5",padding:"10px","font-family":"monospace","font-size":"12px","white-space":"pre-wrap"}},e._l(e.reconstructionOutput,function(t,r){return n("div",{key:r,staticStyle:{"margin-bottom":"2px"}},[e._v("\n              "+e._s(t)+"\n            ")])}),0)])],1):e._e()],1):e._e(),e._v(" "),e.reconstructionResult?n("div",{staticStyle:{margin:"20px 0"}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("重建结果预览")])]),e._v(" "),e.reconstructionResult.meshFilePath?n("div",{staticStyle:{"margin-bottom":"15px"}},[n("el-alert",{attrs:{title:"重建结果文件已生成",type:"success",closable:!1,"show-icon":""}},[n("div",{attrs:{slot:"description"},slot:"description"},[n("p",[e._v("文件路径: "+e._s(e.reconstructionResult.meshFilePath))]),e._v(" "),n("p",[e._v("文件状态: 可下载")])])])],1):e._e(),e._v(" "),n("div",{staticStyle:{height:"300px",border:"1px solid #dcdfe6","border-radius":"4px"}},[n("div",{ref:"resultViewer",staticStyle:{width:"100%",height:"100%"}})]),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-descriptions",{attrs:{column:3,border:""}},[n("el-descriptions-item",{attrs:{label:"顶点数"}},[e._v(e._s(e.reconstructionResult.vertexCount))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"面数"}},[e._v(e._s(e.reconstructionResult.faceCount))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"重建时间"}},[e._v(e._s(e.reconstructionResult.duration)+"ms")]),e._v(" "),n("el-descriptions-item",{attrs:{label:"最终损失"}},[e._v(e._s(e.reconstructionResult.finalLoss.toFixed(6)))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"收敛轮次"}},[e._v(e._s(e.reconstructionResult.convergenceEpoch))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"网格质量"}},[e._v(e._s(e.reconstructionResult.meshQuality))])],1),e._v(" "),e.reconstructionResult.meshData?n("div",{staticStyle:{"margin-top":"15px"}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("网格详细信息")])]),e._v(" "),n("el-descriptions",{attrs:{column:2,border:""}},[n("el-descriptions-item",{attrs:{label:"坐标范围"}},[n("div",[e._v("X: ["+e._s(e.meshBounds.xMin.toFixed(3))+", "+e._s(e.meshBounds.xMax.toFixed(3))+"]")]),e._v(" "),n("div",[e._v("Y: ["+e._s(e.meshBounds.yMin.toFixed(3))+", "+e._s(e.meshBounds.yMax.toFixed(3))+"]")]),e._v(" "),n("div",[e._v("Z: ["+e._s(e.meshBounds.zMin.toFixed(3))+", "+e._s(e.meshBounds.zMax.toFixed(3))+"]")])]),e._v(" "),n("el-descriptions-item",{attrs:{label:"网格尺寸"}},[n("div",[e._v("宽度: "+e._s(e.meshBounds.width.toFixed(3)))]),e._v(" "),n("div",[e._v("高度: "+e._s(e.meshBounds.height.toFixed(3)))]),e._v(" "),n("div",[e._v("深度: "+e._s(e.meshBounds.depth.toFixed(3)))])])],1)],1)],1):e._e()],1)])],1):e._e(),e._v(" "),n("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[n("el-button",{attrs:{type:"primary",loading:e.reconstructionProgress.show&&e.reconstructionProgress.percentage<100,disabled:!e.canStartReconstruction},on:{click:e.startReconstruction}},[e._v("\n        开始NeurCAD重建\n      ")]),e._v(" "),n("el-button",{on:{click:e.resetReconstruction}},[e._v("重置")]),e._v(" "),n("el-button",{attrs:{type:"success",disabled:!e.reconstructionResult},on:{click:e.saveToCAD}},[e._v("\n        保存到CAD\n      ")]),e._v(" "),n("el-button",{attrs:{type:"warning",disabled:!e.reconstructionResult},on:{click:e.exportMesh}},[e._v("\n        导出网格\n      ")])],1)],1)],1)};function ze(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return Ve(l,"_invoke",function(n,r,i){var a,c,s,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,s=e,p.n=n,o}};function m(n,r){for(c=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],m=p.p,h=a[2];n>3?(i=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((i=n<2&&m<a[1])?(c=0,p.v=r,p.n=a[1]):m<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,h),c=u,s=h;(t=c<2?e:s)||!d;){a||(c?c<3?(c>1&&(p.n=-1),m(c,s)):p.n=s:p.v=s);try{if(l=2,a){if(c||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),c=1);a=e}else if((t=(d=p.n<0)?s:n.call(r,p))!==o)break}catch(t){a=e,c=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function c(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Ve(t={},r,function(){return this}),t),d=l.prototype=c.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Ve(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=l,Ve(d,"constructor",l),Ve(l,"constructor",s),s.displayName="GeneratorFunction",Ve(l,i,"GeneratorFunction"),Ve(d),Ve(d,i,"Generator"),Ve(d,r,function(){return this}),Ve(d,"toString",function(){return"[object Generator]"}),(ze=function(){return{w:a,m:p}})()}function Ve(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Ve=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){Ve(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},Ve(e,t,n,r)}function je(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function Ye(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){je(a,r,i,o,c,"next",e)}function c(e){je(a,r,i,o,c,"throw",e)}o(void 0)})}}Oe._withStripped=!0;const $e={name:"PointCloudReconstruction",props:{pointCloudData:{type:Array,default:null},pointCloudInfo:{type:Object,default:null}},data:function(){return{reconstructionParams:{init_type:"siren",decoder_n_hidden_layers:4,decoder_hidden_dim:256,lr:5e-5,n_samples:1e4,grid_res:128,loss_weights:[7e3,600,100,50,0,10],morse_type:"l1",morse_decay:"linear",bidirectional_morse:!1,use_morse_nonmnfld_grad:!1,use_relax_eikonal:!1},reconstructionProgress:{show:!1,percentage:0,status:"active",message:"",currentEpoch:0,totalEpochs:0},reconstructionOutput:[],totalOutputLines:0,reconstructionResult:null,uploadedFileInfo:null,scene:null,camera:null,renderer:null,controls:null,meshBounds:{xMin:0,xMax:0,yMin:0,yMax:0,zMin:0,zMax:0,width:0,height:0,depth:0}}},computed:{canStartReconstruction:function(){return this.pointCloudData&&this.pointCloudData.length>0&&!this.reconstructionProgress.show}},mounted:function(){this.checkCacheFile(),this.restoreReconstructionData()},methods:{checkCacheFile:function(){try{var e=localStorage.getItem("crowncad_cache_file_info");e&&(this.uploadedFileInfo=JSON.parse(e),console.log("检测到缓存文件:",this.uploadedFileInfo),this.$message.info("检测到缓存文件: ".concat(this.uploadedFileInfo.fileName," (").concat(this.uploadedFileInfo.pointCount," 个点)")))}catch(e){console.error("检查缓存文件失败:",e)}},startReconstruction:function(){var e=this;return Ye(ze().m(function t(){var n,r;return ze().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,e.reconstructionProgress.show=!0,e.reconstructionProgress.percentage=0,e.reconstructionProgress.status="active",e.reconstructionProgress.message="正在启动NeurCAD重建...",e.reconstructionProgress.currentEpoch=0,e.reconstructionProgress.totalEpochs=0,e.reconstructionOutput=[],e.totalOutputLines=0,n=e.getNeurCADParameters(),t.n=1,e.executeLocalReconstruction(n);case 1:t.n=3;break;case 2:t.p=2,r=t.v,console.error("重建失败:",r),e.reconstructionProgress.status="exception",e.reconstructionProgress.message="重建失败: "+r.message,e.$message.error("重建失败: "+r.message);case 3:return t.a(2)}},t,null,[[0,2]])}))()},executeLocalReconstruction:function(e){var t=this;return Ye(ze().m(function n(){var r,i,a,o,c,s;return ze().w(function(n){for(;;)switch(n.n){case 0:return n.p=0,r=t.buildConfigFile(e),i=null,t.uploadedFileInfo&&t.uploadedFileInfo.fileId?(i=t.uploadedFileInfo.fileId,console.log("使用上传的文件ID:",i)):console.warn("没有上传的文件，将使用默认文件"),a={config:r,params:e,file_id:i},console.log("发送请求到后端，文件ID:",i),n.n=1,fetch("http://localhost:5001/api/neurcad/execute-local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 1:if((o=n.v).ok){n.n=2;break}throw new Error("HTTP error! status: ".concat(o.status));case 2:return n.n=3,o.json();case 3:if((c=n.v).success){n.n=4;break}throw new Error(c.error||"启动重建失败");case 4:console.log("后端响应:",c),t.setupSSEConnection(c.queue_id),n.n=6;break;case 5:throw n.p=5,s=n.v,new Error("本地执行失败: "+s.message);case 6:return n.a(2)}},n,null,[[0,5]])}))()},buildConfigFile:function(e){var t={init_type:e.init_type,decoder_n_hidden_layers:e.decoder_n_hidden_layers,decoder_hidden_dim:e.decoder_hidden_dim,lr:e.lr,n_samples:e.n_samples,grid_res:e.grid_res,loss_weights:e.loss_weights,morse_type:e.morse_type,morse_decay:e.morse_decay,bidirectional_morse:e.bidirectional_morse,use_morse_nonmnfld_grad:e.use_morse_nonmnfld_grad,use_relax_eikonal:e.use_relax_eikonal,input_file:"input_pld.ply",output_dir:"./reconstruction_results"};return JSON.stringify(t,null,2)},setupSSEConnection:function(e){var t=this,n=new EventSource("http://localhost:5001/api/neurcad/stream-output?queue_id=".concat(e));n.onmessage=function(e){var r=JSON.parse(e.data);"output"===r.type?(t.reconstructionOutput.push(r.content),t.totalOutputLines++,t.reconstructionOutput.length>3&&(t.reconstructionOutput=t.reconstructionOutput.slice(-3)),t.saveReconstructionData(),t.$nextTick(function(){var e=document.querySelector(".reconstruction-output");e&&(e.scrollTop=e.scrollHeight)})):"progress"===r.type?(t.reconstructionProgress.percentage=r.percentage,t.reconstructionProgress.message=r.message,t.reconstructionProgress.currentEpoch=r.currentEpoch,t.reconstructionProgress.totalEpochs=r.totalEpochs,t.saveReconstructionData()):"complete"===r.type?(t.reconstructionProgress.status="success",t.reconstructionProgress.percentage=100,t.reconstructionProgress.message="重建完成！",n.close(),t.showReconstructionResult(r.result)):"error"===r.type&&(t.reconstructionProgress.status="exception",t.reconstructionProgress.message="重建失败: "+r.error,n.close())},n.onerror=function(e){console.error("SSE连接错误:",e),t.reconstructionProgress.status="exception",t.reconstructionProgress.message="连接错误，重建可能仍在进行中",n.close()}},showReconstructionResult:function(e){var t=this;return Ye(ze().m(function n(){var r,i,a;return ze().w(function(n){for(;;)switch(n.n){case 0:return console.log("收到重建结果:",e),t.reconstructionResult={vertexCount:e.vertex_count||0,faceCount:e.face_count||0,duration:e.duration||0,finalLoss:e.final_loss||0,convergenceEpoch:e.convergence_epoch||0,meshQuality:e.mesh_quality||"Unknown",meshData:null,meshFilePath:e.mesh_file_path||null},console.log("处理后的重建结果:",t.reconstructionResult),t.$message.success("NeurCAD重建完成！"),t.reconstructionResult.meshFilePath&&t.$message.info("重建结果文件已生成，可以下载查看"),n.p=1,console.log("获取真实网格数据..."),n.n=2,fetch("http://localhost:5001/api/neurcad/get-mesh-data",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if((r=n.v).ok){n.n=3;break}throw new Error("HTTP error! status: ".concat(r.status));case 3:return n.n=4,r.json();case 4:(i=n.v).success?(t.reconstructionResult.meshData=i.mesh_data,t.reconstructionResult.vertexCount=i.mesh_data.vertex_count,t.reconstructionResult.faceCount=i.mesh_data.face_count,console.log("获取到真实网格数据:",t.reconstructionResult.meshData),console.log("顶点数:",t.reconstructionResult.meshData.vertex_count),console.log("面数:",t.reconstructionResult.meshData.face_count),t.calculateMeshBounds(t.reconstructionResult.meshData),t.saveReconstructionData()):(console.error("获取网格数据失败:",i.error),t.$message.warning("获取网格数据失败，将显示默认预览")),n.n=6;break;case 5:n.p=5,a=n.v,console.error("获取网格数据时发生错误:",a),t.$message.warning("获取网格数据失败，将显示默认预览");case 6:t.$nextTick(function(){console.log("准备初始化3D预览"),t.initResultViewer()});case 7:return n.a(2)}},n,null,[[1,5]])}))()},calculateMeshBounds:function(e){if(e&&e.vertices){for(var t=e.vertices,n=1/0,r=-1/0,i=1/0,a=-1/0,o=1/0,c=-1/0,s=0;s<t.length;s+=3){var l=t[s],u=t[s+1],d=t[s+2];l<n&&(n=l),l>r&&(r=l),u<i&&(i=u),u>a&&(a=u),d<o&&(o=d),d>c&&(c=d)}this.meshBounds={xMin:n,xMax:r,yMin:i,yMax:a,zMin:o,zMax:c,width:r-n,height:a-i,depth:c-o},console.log("网格边界:",this.meshBounds)}else console.warn("没有有效的网格数据，无法计算网格边界")},getNeurCADParameters:function(){return{init_type:"siren",decoder_n_hidden_layers:Math.min(Math.max(this.reconstructionParams.decoder_n_hidden_layers,2),4),decoder_hidden_dim:Math.min(Math.max(this.reconstructionParams.decoder_hidden_dim,128),256),lr:this.reconstructionParams.lr,n_samples:this.reconstructionParams.n_samples,grid_res:Math.min(Math.max(this.reconstructionParams.grid_res,128),256),loss_weights:this.reconstructionParams.loss_weights,morse_type:"l1",morse_decay:"linear",bidirectional_morse:!1,use_morse_nonmnfld_grad:!1,use_relax_eikonal:!1,pointCloud:this.pointCloudData}},generateNeurCADMesh:function(){var e=new I.Gu$(1,32,32);return{vertices:e.attributes.position.array,faces:e.index?e.index.array:[],normals:e.attributes.normal?e.attributes.normal.array:[]}},initResultViewer:function(){var e=this,t=this.$refs.resultViewer;if(t){console.log("初始化3D预览器"),console.log("重建结果:",this.reconstructionResult),console.log("网格数据:",this.reconstructionResult.meshData),this.renderer&&(this.renderer.dispose(),t.innerHTML=""),this.scene=new I.Z58,this.scene.background=new I.Q1f(0),this.camera=new I.ubm(75,t.clientWidth/t.clientHeight,.1,1e3),this.camera.position.set(2,2,2),this.camera.lookAt(0,0,0),this.renderer=new I.JeP({antialias:!0}),this.renderer.setSize(t.clientWidth,t.clientHeight),t.appendChild(this.renderer.domElement);var n=new I.$p8(4210752);this.scene.add(n);var r=new I.ZyN(16777215,.8);if(r.position.set(1,1,1),this.scene.add(r),this.reconstructionResult.meshData&&this.reconstructionResult.meshData.vertices){console.log("创建网格几何体"),console.log("顶点数:",this.reconstructionResult.meshData.vertex_count||this.reconstructionResult.meshData.vertices.length/3),console.log("面索引数:",this.reconstructionResult.meshData.face_count||this.reconstructionResult.meshData.faces.length);var i=new I.LoY,a=new Float32Array(this.reconstructionResult.meshData.vertices);if(i.setAttribute("position",new I.THS(a,3)),this.reconstructionResult.meshData.faces&&this.reconstructionResult.meshData.faces.length>0){var o=new Uint32Array(this.reconstructionResult.meshData.faces);i.setIndex(new I.THS(o,1))}i.computeVertexNormals();var c=new I.tXL({color:65416,side:I.$EB,transparent:!0,opacity:.8,wireframe:!1}),s=new I.eaF(i,c);this.scene.add(s);var l=(new I.NRn).setFromObject(s),u=l.getCenter(new I.Pq0),d=l.getSize(new I.Pq0),p=2*Math.max(d.x,d.y,d.z);this.camera.position.copy(u),this.camera.position.x+=p,this.camera.position.y+=p,this.camera.position.z+=p,this.camera.lookAt(u),console.log("网格创建成功，相机位置已调整")}else{console.warn("没有有效的网格数据，显示默认球体");var m=new I.Gu$(1,32,32),h=new I.tXL({color:65416,side:I.$EB,transparent:!0,opacity:.8}),f=new I.eaF(m,h);this.scene.add(f)}this.renderer.render(this.scene,this.camera),this.controls=new Te.N(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05;var y=function(){requestAnimationFrame(y),e.controls.update(),e.renderer.render(e.scene,e.camera)};y(),console.log("3D预览器初始化完成")}else console.error("找不到预览容器")},saveToCAD:function(){var e=this;return Ye(ze().m(function t(){var n;return ze().w(function(t){for(;;)switch(t.n){case 0:if(e.reconstructionResult){t.n=1;break}return e.$message.warning("没有可保存的重建结果"),t.a(2);case 1:return t.p=1,t.n=2,e.exportToCAD();case 2:e.$message.success("模型已成功保存到CAD"),t.n=4;break;case 3:t.p=3,n=t.v,e.$message.error("保存失败: "+n.message);case 4:return t.a(2)}},t,null,[[1,3]])}))()},exportToCAD:function(){return Ye(ze().m(function e(){var t;return ze().w(function(e){for(;;)switch(e.n){case 0:return t=l.command.solid,e.n=1,t.createBox({centerPoint:{x:0,y:0,z:0},length:10,width:10,height:10});case 1:return e.n=2,l.command.execute();case 2:l.command.clearCommand();case 3:return e.a(2)}},e)}))()},exportMesh:function(){var e=this;return Ye(ze().m(function t(){var n,r;return ze().w(function(t){for(;;)switch(t.n){case 0:if(e.reconstructionResult){t.n=1;break}return e.$message.warning("没有可导出的重建结果"),t.a(2);case 1:if(t.p=1,!e.reconstructionResult.meshFilePath){t.n=3;break}return t.n=2,e.downloadReconstructionResult();case 2:t.n=4;break;case 3:n=e.generateSTL(e.reconstructionResult.meshData),e.downloadFile(n,"reconstructed_mesh.stl","application/octet-stream"),e.$message.success("网格已导出为STL文件");case 4:t.n=6;break;case 5:t.p=5,r=t.v,e.$message.error("导出失败: "+r.message);case 6:return t.a(2)}},t,null,[[1,5]])}))()},downloadReconstructionResult:function(){var e=this;return Ye(ze().m(function t(){var n,r,i,a,o,c,s,l;return ze().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch("http://localhost:5001/api/neurcad/download-result",{method:"GET",headers:{"Content-Type":"application/json"}});case 1:if((n=t.v).ok){t.n=2;break}throw new Error("HTTP error! status: ".concat(n.status));case 2:return r=n.headers.get("content-disposition"),i="reconstructed_mesh.ply",r&&(a=r.match(/filename="(.+)"/))&&(i=a[1]),t.n=3,n.blob();case 3:o=t.v,c=window.URL.createObjectURL(o),(s=document.createElement("a")).href=c,s.download=i,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(c),e.$message.success("重建结果文件已下载: ".concat(i)),t.n=5;break;case 4:t.p=4,l=t.v,console.error("下载重建结果失败:",l),e.$message.error("下载失败: "+l.message);case 5:return t.a(2)}},t,null,[[0,4]])}))()},generateSTL:function(e){for(var t="solid reconstructed_mesh\n",n=0;n<e.faces.length;n+=3){var r={x:e.vertices[3*e.faces[n]],y:e.vertices[3*e.faces[n]+1],z:e.vertices[3*e.faces[n]+2]},i={x:e.vertices[3*e.faces[n+1]],y:e.vertices[3*e.faces[n+1]+1],z:e.vertices[3*e.faces[n+1]+2]},a={x:e.vertices[3*e.faces[n+2]],y:e.vertices[3*e.faces[n+2]+1],z:e.vertices[3*e.faces[n+2]+2]},o=this.calculateNormal(r,i,a);t+="  facet normal ".concat(o.x," ").concat(o.y," ").concat(o.z,"\n"),t+="    outer loop\n",t+="      vertex ".concat(r.x," ").concat(r.y," ").concat(r.z,"\n"),t+="      vertex ".concat(i.x," ").concat(i.y," ").concat(i.z,"\n"),t+="      vertex ".concat(a.x," ").concat(a.y," ").concat(a.z,"\n"),t+="    endloop\n",t+="  endfacet\n"}return t+="endsolid reconstructed_mesh\n"},calculateNormal:function(e,t,n){var r=t.x-e.x,i=t.y-e.y,a=t.z-e.z,o=n.x-e.x,c=n.y-e.y,s=n.z-e.z,l=i*s-a*c,u=a*o-r*s,d=r*c-i*o,p=Math.sqrt(l*l+u*u+d*d);return{x:l/p,y:u/p,z:d/p}},downloadFile:function(e,t,n){var r=new Blob([e],{type:n}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)},resetReconstruction:function(){this.reconstructionProgress.show=!1,this.reconstructionProgress.percentage=0,this.reconstructionProgress.status="",this.reconstructionProgress.message="",this.reconstructionProgress.currentEpoch=0,this.reconstructionProgress.totalEpochs=0,this.reconstructionResult=null,this.reconstructionOutput=[],this.totalOutputLines=0,this.clearCachedData(),this.renderer&&(this.renderer.dispose(),this.renderer=null),this.controls&&(this.controls.dispose(),this.controls=null),this.$message.info("重建已重置")},clearCachedData:function(){try{localStorage.removeItem("crowncad_reconstruction_result"),localStorage.removeItem("crowncad_reconstruction_output"),localStorage.removeItem("crowncad_total_output_lines"),localStorage.removeItem("crowncad_reconstruction_progress"),console.log("已清除缓存的重建数据")}catch(e){console.error("清除缓存数据失败:",e)}},clearOutput:function(){this.reconstructionOutput=[]},restoreReconstructionData:function(){var e=this;try{var t=localStorage.getItem("crowncad_reconstruction_result");if(t){var n=JSON.parse(t);this.reconstructionResult=n,console.log("恢复重建结果:",this.reconstructionResult),this.reconstructionResult&&this.reconstructionResult.meshData&&this.$nextTick(function(){e.initResultViewer()})}var r=localStorage.getItem("crowncad_reconstruction_output");r&&(this.reconstructionOutput=JSON.parse(r),this.totalOutputLines=parseInt(localStorage.getItem("crowncad_total_output_lines")||"0"),console.log("恢复重建输出:",this.reconstructionOutput.length,"行"));var i=localStorage.getItem("crowncad_reconstruction_progress");if(i){var a=JSON.parse(i);a.percentage<100&&(this.reconstructionProgress=a,console.log("恢复重建进度:",a.percentage+"%"))}}catch(e){console.error("恢复重建数据失败:",e)}},saveReconstructionData:function(){try{this.reconstructionResult&&(localStorage.setItem("crowncad_reconstruction_result",JSON.stringify(this.reconstructionResult)),console.log("保存重建结果")),this.reconstructionOutput.length>0&&(localStorage.setItem("crowncad_reconstruction_output",JSON.stringify(this.reconstructionOutput)),localStorage.setItem("crowncad_total_output_lines",this.totalOutputLines.toString()),console.log("保存重建输出:",this.reconstructionOutput.length,"行")),this.reconstructionProgress.show&&(localStorage.setItem("crowncad_reconstruction_progress",JSON.stringify(this.reconstructionProgress)),console.log("保存重建进度:",this.reconstructionProgress.percentage+"%"))}catch(e){console.error("保存重建数据失败:",e)}}},beforeDestroy:function(){this.saveReconstructionData(),this.renderer&&this.renderer.dispose(),this.controls&&this.controls.dispose()}};n(662);const qe=(0,z.A)($e,Oe,[],!1,null,"954bc2c8",null).exports;var Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"20px","flex-grow":"1"}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("重建结果下载")])]),e._v(" "),n("el-form",{staticStyle:{"margin-bottom":"20px"},attrs:{model:e.downloadForm,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"导出格式"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择导出格式"},model:{value:e.downloadForm.format,callback:function(t){e.$set(e.downloadForm,"format",t)},expression:"downloadForm.format"}},[n("el-option",{attrs:{label:"STL (3D打印)",value:"stl"}}),e._v(" "),n("el-option",{attrs:{label:"OBJ (通用3D)",value:"obj"}}),e._v(" "),n("el-option",{attrs:{label:"PLY (点云)",value:"ply"}}),e._v(" "),n("el-option",{attrs:{label:"STEP (CAD)",value:"step"}}),e._v(" "),n("el-option",{attrs:{label:"IGES (CAD)",value:"iges"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"包含法向量"}},[n("el-switch",{model:{value:e.downloadForm.includeNormals,callback:function(t){e.$set(e.downloadForm,"includeNormals",t)},expression:"downloadForm.includeNormals"}})],1),e._v(" "),["stl","ply"].includes(e.downloadForm.format)?n("el-form-item",{attrs:{label:"二进制格式"}},[n("el-switch",{model:{value:e.downloadForm.binary,callback:function(t){e.$set(e.downloadForm,"binary",t)},expression:"downloadForm.binary"}})],1):e._e()],1),e._v(" "),e.fileInfo?n("div",{staticStyle:{margin:"20px 0"}},[n("el-descriptions",{attrs:{title:"文件信息",column:2,border:""}},[n("el-descriptions-item",{attrs:{label:"文件名"}},[e._v(e._s(e.fileInfo.filename))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"文件大小"}},[e._v(e._s(e.fileInfo.size))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"顶点数"}},[e._v(e._s(e.fileInfo.vertexCount))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"面数"}},[e._v(e._s(e.fileInfo.faceCount))]),e._v(" "),n("el-descriptions-item",{attrs:{label:"格式"}},[e._v(e._s(e.fileInfo.format.toUpperCase()))])],1)],1):e._e(),e._v(" "),n("div",{staticStyle:{margin:"20px 0"}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("下载历史")])]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.downloadHistory}},[n("el-table-column",{attrs:{prop:"filename",label:"文件名",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"format",label:"格式",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{prop:"size",label:"大小",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"timestamp",label:"时间",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return e.redownload(t.row)}}},[e._v("重新下载")])]}}])})],1)],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[n("el-button",{attrs:{type:"primary",loading:e.generating,disabled:!e.canGenerate},on:{click:e.generateFile}},[e._v("\n        生成文件\n      ")]),e._v(" "),n("el-button",{attrs:{type:"success",disabled:!e.fileInfo},on:{click:e.downloadFile}},[e._v("\n        下载文件\n      ")]),e._v(" "),n("el-button",{on:{click:e.clearHistory}},[e._v("清空历史")])],1)],1)],1)};function Ue(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return He(l,"_invoke",function(n,r,i){var a,c,s,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,s=e,p.n=n,o}};function m(n,r){for(c=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],m=p.p,h=a[2];n>3?(i=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((i=n<2&&m<a[1])?(c=0,p.v=r,p.n=a[1]):m<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,h),c=u,s=h;(t=c<2?e:s)||!d;){a||(c?c<3?(c>1&&(p.n=-1),m(c,s)):p.n=s:p.v=s);try{if(l=2,a){if(c||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),c=1);a=e}else if((t=(d=p.n<0)?s:n.call(r,p))!==o)break}catch(t){a=e,c=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function c(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(He(t={},r,function(){return this}),t),d=l.prototype=c.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,He(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=l,He(d,"constructor",l),He(l,"constructor",s),s.displayName="GeneratorFunction",He(l,i,"GeneratorFunction"),He(d),He(d,i,"Generator"),He(d,r,function(){return this}),He(d,"toString",function(){return"[object Generator]"}),(Ue=function(){return{w:a,m:p}})()}function He(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}He=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){He(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},He(e,t,n,r)}function We(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}Ge._withStripped=!0;const Xe={name:"PointCloudDownload",data:function(){return{downloadForm:{format:"ply",includeNormals:!0,binary:!1},fileInfo:null,generating:!1,downloadHistory:[]}},computed:{canGenerate:function(){return this.downloadForm.format}},methods:{generateFile:function(){var e,t=this;return(e=Ue().m(function e(){var n;return Ue().w(function(e){for(;;)switch(e.n){case 0:if(t.canGenerate){e.n=1;break}return e.a(2);case 1:return t.generating=!0,e.p=2,e.n=3,new Promise(function(e){return setTimeout(e,2e3)});case 3:t.fileInfo={filename:"reconstructed_mesh_".concat(Date.now(),".").concat(t.downloadForm.format),size:t.formatFileSize(1048576),vertexCount:Math.floor(1e3),faceCount:Math.floor(2e3),format:t.downloadForm.format,data:t.generateSampleFileData()},t.$message.success("文件生成完成！"),e.n=5;break;case 4:e.p=4,n=e.v,t.$message.error("文件生成失败: "+n.message);case 5:return e.p=5,t.generating=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){We(a,r,i,o,c,"next",e)}function c(e){We(a,r,i,o,c,"throw",e)}o(void 0)})})()},generateSampleFileData:function(){switch(this.downloadForm.format){case"stl":default:return this.generateSTLData();case"obj":return this.generateOBJData();case"ply":return this.generatePLYData()}},generateSTLData:function(){var e=this.downloadForm.binary?"":"solid reconstructed_mesh\n";if(this.downloadForm.binary){new ArrayBuffer(80);return new ArrayBuffer(50004)}for(var t=0;t<100;t++)e+="  facet normal 0 0 1\n",e+="    outer loop\n",e+="      vertex ".concat(Math.random()," ").concat(Math.random()," ").concat(Math.random(),"\n"),e+="      vertex ".concat(Math.random()," ").concat(Math.random()," ").concat(Math.random(),"\n"),e+="      vertex ".concat(Math.random()," ").concat(Math.random()," ").concat(Math.random(),"\n"),e+="    endloop\n",e+="  endfacet\n";return e+="endsolid reconstructed_mesh\n"},generateOBJData:function(){var e="# Generated by NeurCAD Reconstruction Plugin\n";e+="# Vertices\n";for(var t=0;t<100;t++)e+="v ".concat(Math.random()," ").concat(Math.random()," ").concat(Math.random(),"\n");if(this.downloadForm.includeNormals){e+="# Normals\n";for(var n=0;n<100;n++)e+="vn ".concat(Math.random()," ").concat(Math.random()," ").concat(Math.random(),"\n")}e+="# Faces\n";for(var r=0;r<50;r++){var i=2*r+2,a=2*r+3;e+="f ".concat(2*r+1," ").concat(i," ").concat(a,"\n")}return e},generatePLYData:function(){if(this.downloadForm.binary){return new ArrayBuffer(1024)}var e="ply\n";e+="format ascii 1.0\n",e+="element vertex 100\n",e+="property float x\n",e+="property float y\n",e+="property float z\n",this.downloadForm.includeNormals&&(e+="property float nx\n",e+="property float ny\n",e+="property float nz\n"),e+="element face 50\n",e+="property list uchar int vertex_indices\n",e+="end_header\n";for(var t=0;t<100;t++)e+="".concat(Math.random()," ").concat(Math.random()," ").concat(Math.random()),this.downloadForm.includeNormals&&(e+=" ".concat(Math.random()," ").concat(Math.random()," ").concat(Math.random())),e+="\n";for(var n=0;n<50;n++){var r=2*n+1,i=2*n+2;e+="3 ".concat(2*n," ").concat(r," ").concat(i,"\n")}return e},downloadFile:function(){if(this.fileInfo)try{var e=this.getContentType(this.downloadForm.format);this.downloadFileContent(this.fileInfo.data,this.fileInfo.filename,e),this.downloadHistory.unshift({filename:this.fileInfo.filename,format:this.downloadForm.format,size:this.fileInfo.size,timestamp:(new Date).toLocaleString()}),this.$message.success("文件下载成功！")}catch(e){this.$message.error("下载失败: "+e.message)}else this.$message.warning("没有可下载的文件")},getContentType:function(e){return{stl:"application/octet-stream",obj:"text/plain",ply:"application/octet-stream",step:"application/step",iges:"application/iges"}[e]||"application/octet-stream"},downloadFileContent:function(e,t,n){var r;r=(ArrayBuffer,new Blob([e],{type:n}));var i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)},redownload:function(e){this.$message.info("重新下载: ".concat(e.filename))},clearHistory:function(){this.downloadHistory=[],this.$message.info("下载历史已清空")},formatFileSize:function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}}};n(406);const Ze=(0,z.A)(Xe,Ge,[],!1,null,"6970af8e",null).exports,Je={name:"PointCloudPlugins",data:function(){return{activePane:"upload",pointCloudData:null,pointCloudInfo:null}},methods:{handlePointCloudReady:function(e){this.pointCloudData=e.data,this.pointCloudInfo=e.info,this.activePane="reconstruction"}},computed:{currentPane:function(){switch(this.activePane){case"upload":default:return Le;case"reconstruction":return qe;case"download":return Ze}}}};const Ke=(0,z.A)(Je,we,[],!1,null,"3832615c",null).exports;var Qe=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticStyle:{display:"flex"}})};Qe._withStripped=!0;const et={name:"DrawingPlugins"};const tt=(0,z.A)(et,Qe,[],!1,null,"1ece470a",null).exports,nt={components:{PartPlugins:Y,AssemblyPlugins:Ce,PointCloudPlugins:Ke,DrawingPlugins:tt},data:function(){return{activeDocumentType:"",connected:!1}},mounted:function(){var e=this;this.activeDocumentType="PointCloudDocument",l.connect(function(t){var n=t.docInfo.name,r=t.docInfo.type;m.successTip("插件初始化完成。当前文档名称: "+n),v.docType=r,e.activeDocumentType=r,e.connected=!0})},methods:{},computed:{currentPane:function(){switch(this.activeDocumentType){case"PartDocument":return Y;case"AssemblyDocument":return Ce;default:return Ke}}}};const rt=(0,z.A)(nt,r,[],!1,null,"a0cdccec",null).exports},568:(e,t,n)=>{var r=n(605);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);(0,n(534).A)("94c91792",r,!1,{})},605:(e,t,n)=>{(t=n(314)(!1)).push([e.id,"\n.point-position-input[data-v-3c04ee03] {\r\n  width: 60px;\n}\n.input-form-item[data-v-3c04ee03] {\r\n  display: inline-block;\n}\r\n",""]),e.exports=t},659:(e,t,n)=>{(t=n(314)(!1)).push([e.id,"\n.el-form-item[data-v-6970af8e] {\r\n  margin-bottom: 15px;\n}\r\n",""]),e.exports=t},662:(e,t,n)=>{var r=n(219);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);(0,n(534).A)("209bc762",r,!1,{})},709:(e,t,n)=>{(t=n(314)(!1)).push([e.id,"\n.pick-info-list[data-v-79d80954] {\n}\r\n",""]),e.exports=t},773:(e,t,n)=>{(t=n(314)(!1)).push([e.id,"\n.point-position-input[data-v-67769155] {\r\n  width: 60px;\n}\n.input-form-item[data-v-67769155] {\r\n  display: inline-block;\n}\r\n",""]),e.exports=t},793:(e,t,n)=>{(t=n(314)(!1)).push([e.id,"\n.upload-demo[data-v-3b15c078] {\n  width: 100%;\n}\n.el-upload__tip[data-v-3b15c078] {\n  color: #909399;\n  font-size: 12px;\n  margin-top: 7px;\n}\n",""]),e.exports=t},852:(e,t,n)=>{var r=n(709);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);(0,n(534).A)("1ad75734",r,!1,{})},907:(e,t,n)=>{var r=n(976);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);(0,n(534).A)("431f1c7e",r,!1,{})},976:(e,t,n)=>{(t=n(314)(!1)).push([e.id,"\n.point-position-input[data-v-5928bb58] {\r\n  width: 60px;\n}\r\n",""]),e.exports=t}}]);